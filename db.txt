create database clsoftlabnew default character set utf8mb4 collate utf8mb4_unicode_ci;


use clsoftlabnew;

-- 공통 코드 테이블 --

CREATE TABLE ZSYS_CODE_GROUP (
    -- [식별자]
    ZGROUP_ID     VARCHAR(20)   NOT NULL COMMENT '코드 그룹 ID (PK)',
    
    -- [기본 정보]
    ZGROUP_NM     VARCHAR(100)  NOT NULL COMMENT '코드 그룹명',
    ZUSE_YN       CHAR(1)       NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZORDER        INT           NOT NULL DEFAULT 0   COMMENT '정렬 순서',
    ZREMARK       VARCHAR(300)  NULL     COMMENT '비고 (설명)',

    -- [운영 제어]
    IS_SYSTEM     CHAR(1)       NOT NULL DEFAULT 'N' COMMENT '시스템 전용 여부 (Y:개발자만 수정 가능, N:일반관리자 수정 가능)',
    VERSION   	INT           	NOT NULL DEFAULT 1   COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_AT    DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성일시',
    CREATED_BY    VARCHAR(50)   NOT NULL COMMENT '생성자',
    UPDATED_AT    DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정일시',
    UPDATED_BY    VARCHAR(50)   NULL     COMMENT '수정자',

    PRIMARY KEY (ZGROUP_ID)
) COMMENT '공통코드 그룹 마스터';

-- 더미 데이터 --
INSERT INTO ZSYS_CODE_GROUP 
(ZGROUP_ID, ZGROUP_NM, ZUSE_YN, ZORDER, ZREMARK, IS_SYSTEM, CREATED_BY) 
VALUES 
-- [기존 인사 기초]
('HR_DEPT',      '부서 코드',     'Y', 10, '본부, 팀 단위 조직 구성', 'N', 'SYSTEM'),
('HR_RANK',      '직급 코드',     'Y', 20, '사원~임원 위계 체계',      'N', 'SYSTEM'),
('HR_DUTY',      '직무 코드',     'Y', 30, '실제 수행 업무(Job/Skill)', 'N', 'SYSTEM'),
('HR_EMPTYPE',   '고용 형태',     'Y', 40, '정규직, 계약직, 파견직 등', 'N', 'SYSTEM'),
('HR_STATUS',    '재직 상태',     'Y', 50, '재직, 휴직, 퇴직 상태 관리', 'Y', 'SYSTEM'),
('HR_NATION',    '국적 코드',     'Y', 51, 'ISO 국가코드 준수 권장',    'N', 'SYSTEM'),
('HR_MARITAL',   '결혼 상태',     'Y', 60, '미혼, 기혼 등',             'N', 'SYSTEM'),
('HR_MILITARY',  '병역 구분',     'Y', 70, '군별 및 면제 사유',         'N', 'SYSTEM'),
('HR_APPTYPE',   '인사 발령 유형', 'Y', 80, '채용, 승진, 전보, 휴직 등', 'Y', 'SYSTEM'),
('HR_APPR_STAT', '발령 결재 상태', 'Y', 90, '임시저장, 상신, 승인, 반려', 'Y', 'SYSTEM'),
('SYS_ROLE',     '시스템 권한',   'Y', 99, '메뉴 접근 및 기능 제어 권한', 'Y', 'SYSTEM'),

-- [가족 정보 관련]
('HR_REL_TYPE',  '가족 관계',     'Y', 100, '배우자, 자녀, 부모 등',     'Y', 'SYSTEM'),
('HR_JOB_TYPE',  '가족 직업 구분', 'Y', 110, '소득 공제 판단용 직업 분류',  'N', 'SYSTEM'),
('HR_SCH_TYPE',  '학력/학교 구분', 'Y', 120, '학자금 지원 기준 학교 급수',  'N', 'SYSTEM'),

-- [자격증 정보 관련]
('HR_CERT_CD',   '자격증 목록',    'Y', 130, '국가기술자격 및 어학 시험',   'N', 'SYSTEM'),
('HR_CERT_RANK', '자격 등급',      'Y', 140, '기사, 산업기사, 기술사 등',   'N', 'SYSTEM'),

-- [어학 정보 관련]
('HR_LANG',      '어학 언어 구분',  'Y', 200, '영어, 일본어, 중국어 등',    'N', 'SYSTEM'),
('HR_LANG_TEST', '어학 시험 종류',  'Y', 210, 'TOEIC, OPIc, JPT 등',       'N', 'SYSTEM'),
('HR_LANG_LVL',  '어학 구사 수준',  'Y', 220, '회화/독해 능력 수준',        'N', 'SYSTEM'),

-- [경력 정보 관련 ]
('HR_CAREER_TYPE', '경력 근무 형태', 'Y', 150, '정규직, 계약직, 프리랜서 등', 'N', 'SYSTEM'),

-- [포상 정보 관련]
('HR_REWARD_TYPE', '포상 구분',     'Y', 300, '장기근속, 우수사원 등',      'N', 'SYSTEM'),

-- [교육 정보 관련]
('HR_EDU_TYPE',    '교육 유형',     'Y', 400, '직무, 리더십, 법정의무 등',   'N', 'SYSTEM'),

-- [평가 템플릿 관련]
('EV_TYPE',     '평가 유형',       'Y', 500, '정기평가, 수시평가 구분 (ZEV_TYPE)', 'N', 'SYSTEM'),
('EV_TPL_STAT', '평가 템플릿 상태', 'Y', 510, '템플릿의 작성/오픈/마감 상태 (ZSTATUS)', 'Y', 'SYSTEM'),

-- [평가 결과 관련]
('EV_STEP',      '평가 진행 단계', 'Y', 520, '본인평가, 1차평가, 최종확정 등', 'Y', 'SYSTEM'),
('EV_GRADE',     '평가 등급',      'Y', 530, 'S, A, B, C, D 등급 체계',        'N', 'SYSTEM'),
('EV_RSLT_STAT', '평가표 상태',    'Y', 540, '작성중, 제출완료 상태 구분',     'Y', 'SYSTEM');

-- 공통코드 상세 테이블 --
CREATE TABLE ZSYS_CODE_DETAIL (
    -- [PK: 대리키 사용]
    DETAIL_ID     BIGINT        NOT NULL AUTO_INCREMENT COMMENT '순번 (PK)',
    
    -- [실제 비즈니스 키]
    ZGROUP_ID     VARCHAR(20)   NOT NULL COMMENT '코드 그룹 ID (FK)',
    ZCODE         VARCHAR(20)   NOT NULL COMMENT '상세 코드값',

    -- [기본 정보]
    ZNAME         VARCHAR(100)  NOT NULL COMMENT '코드 명칭 (한글)',
    ZNAME_EN      VARCHAR(100)  NULL     COMMENT '코드 명칭 (영문)',
    
    -- [기간 및 유효성 관리]
    START_DT      DATE          NOT NULL DEFAULT '1900-01-01' COMMENT '시작일자',
    END_DT        DATE          NOT NULL DEFAULT '9999-12-31' COMMENT '종료일자',
    ZUSE_YN       CHAR(1)       NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    
    -- [표시 정보]
    ZORDER        INT           NOT NULL DEFAULT 0   COMMENT '정렬 순서',
    ZREMARK       VARCHAR(300)  NULL     COMMENT '비고',

    -- [운영 제어]
    IS_SYSTEM     CHAR(1)       NOT NULL DEFAULT 'N' COMMENT '시스템 전용 여부 (Y:삭제불가 등 제어)',
    OBJ_VERSION   INT           NOT NULL DEFAULT 1   COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_AT    DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY    VARCHAR(50)   NOT NULL,
    UPDATED_AT    DATETIME      NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY    VARCHAR(50)   NULL,

    PRIMARY KEY (DETAIL_ID),
    
    -- 그룹ID + 코드 중복 방지
    UNIQUE KEY UQ_CODE_DETAIL (ZGROUP_ID, ZCODE)
) COMMENT '공통코드 상세 내역';


-- 더미 데이터 --
INSERT INTO ZSYS_CODE_DETAIL (ZGROUP_ID, ZCODE, ZNAME, ZNAME_EN, ZORDER, IS_SYSTEM, CREATED_BY) VALUES 
-- HR_DEPT
('HR_DEPT', 'MGT', '경영지원본부', 'Management', 10, 'N', 'SYSTEM'),
('HR_DEPT', 'HR', '인사팀', 'HR Team', 11, 'N', 'SYSTEM'),
('HR_DEPT', 'FIN', '재무회계팀', 'Finance', 12, 'N', 'SYSTEM'),
('HR_DEPT', 'DEV', '기술연구소', 'R&D', 20, 'N', 'SYSTEM'),
('HR_DEPT', 'DEV_SVR', '서버개발팀', 'Server', 21, 'N', 'SYSTEM'),
('HR_DEPT', 'DEV_WEB', '웹개발팀', 'Web', 22, 'N', 'SYSTEM'),
('HR_DEPT', 'DEV_AI', 'AI데이터팀', 'AI/Data', 23, 'N', 'SYSTEM'),
('HR_DEPT', 'BIZ', '사업본부', 'Business', 30, 'N', 'SYSTEM'),
('HR_DEPT', 'BIZ_SAL', '영업팀', 'Sales', 31, 'N', 'SYSTEM'),
('HR_DEPT', 'BIZ_MKT', '마케팅팀', 'Marketing', 32, 'N', 'SYSTEM'),

-- HR_RANK
('HR_RANK', '001', '사원', 'Staff', 10, 'N', 'SYSTEM'),
('HR_RANK', '002', '대리', 'Assistant', 20, 'N', 'SYSTEM'),
('HR_RANK', '003', '과장', 'Manager', 30, 'N', 'SYSTEM'),
('HR_RANK', '004', '차장', 'Deputy GM', 40, 'N', 'SYSTEM'),
('HR_RANK', '005', '부장', 'General Mgr', 50, 'N', 'SYSTEM'),
('HR_RANK', '009', '임원', 'Executive', 90, 'N', 'SYSTEM'),

-- HR_DUTY
('HR_DUTY', 'SW_BE', '백엔드 개발', 'Backend', 10, 'N', 'SYSTEM'),
('HR_DUTY', 'SW_FE', '프론트엔드', 'Frontend', 20, 'N', 'SYSTEM'),
('HR_DUTY', 'SW_APP', '모바일 앱', 'Mobile App', 30, 'N', 'SYSTEM'),
('HR_DUTY', 'PO', '서비스 기획', 'PO', 40, 'N', 'SYSTEM'),
('HR_DUTY', 'UIUX', 'UI/UX 디자인', 'Designer', 50, 'N', 'SYSTEM'),
('HR_DUTY', 'HR_M', '인사/채용', 'HR Manager', 60, 'N', 'SYSTEM'),
('HR_DUTY', 'ACC', '회계/세무', 'Accountant', 70, 'N', 'SYSTEM'),
('HR_DUTY', 'SALES', '기술 영업', 'Tech Sales', 80, 'N', 'SYSTEM'),

-- HR_STATUS
('HR_STATUS', '10', '재직', 'Active', 10, 'Y', 'SYSTEM'),
('HR_STATUS', '20', '휴직', 'On Leave', 20, 'Y', 'SYSTEM'),
('HR_STATUS', '99', '퇴직', 'Retired', 99, 'Y', 'SYSTEM'),

-- HR_NATION
('HR_NATION', 'KR', '대한민국', 'Korea', 1, 'N', 'SYSTEM'),
('HR_NATION', 'US', '미국', 'USA', 2, 'N', 'SYSTEM'),
('HR_NATION', 'CN', '중국', 'China', 3, 'N', 'SYSTEM'),
('HR_NATION', 'JP', '일본', 'Japan', 4, 'N', 'SYSTEM'),

-- HR_MARITAL (결혼 상태)
('HR_MARITAL', '10', '미혼', 'Single',   10, 'N', 'SYSTEM'),
('HR_MARITAL', '20', '기혼', 'Married',  20,  'N', 'SYSTEM'),
('HR_MARITAL', '30', '이혼', 'Divorced', 30,  'N', 'SYSTEM'),
('HR_MARITAL', '40', '사별', 'Widowed',  40,  'N', 'SYSTEM'),

-- HR_MILITARY (병역 구분)
('HR_MILITARY', '00', '비대상',   'N/A',         10,  'N', 'SYSTEM'),
('HR_MILITARY', '10', '만기전역', 'Discharged',  20,  'N', 'SYSTEM'),
('HR_MILITARY', '11', '복무중',   'Serving',     21,  'N', 'SYSTEM'),
('HR_MILITARY', '20', '면제',     'Exempted',    30,  'N', 'SYSTEM'),
('HR_MILITARY', '30', '미필',     'Unfulfilled', 40,  'N', 'SYSTEM'),

-- HR_APPTYPE (발령 유형)
('HR_APPTYPE', '10', '채용', 'Hiring',            10, 'Y', 'SYSTEM'),
('HR_APPTYPE', '20', '승진', 'Promotion',         20,  'Y', 'SYSTEM'),
('HR_APPTYPE', '30', '전보', 'Transfer',          30,  'Y', 'SYSTEM'),
('HR_APPTYPE', '40', '파견', 'Dispatch',          40,  'Y', 'SYSTEM'),
('HR_APPTYPE', '50', '휴직', 'Leave of Absence',  50,  'Y', 'SYSTEM'),
('HR_APPTYPE', '60', '복직', 'Reinstatement',     60,  'Y', 'SYSTEM'),
('HR_APPTYPE', '90', '퇴직', 'Retirement',        90,  'Y', 'SYSTEM'),

-- HR_APPR_STAT (발령 상태)
('HR_APPR_STAT', '10', '임시저장', 'Temporary Save', 10, 'Y', 'SYSTEM'),
('HR_APPR_STAT', '20', '결재중',   'In Progress',    20,  'Y', 'SYSTEM'),
('HR_APPR_STAT', '30', '승인',     'Approved',       30,  'Y', 'SYSTEM'),
('HR_APPR_STAT', '40', '반려',     'Rejected',       40,  'Y', 'SYSTEM'),
('HR_APPR_STAT', '99', '취소',     'Canceled',       99,  'Y', 'SYSTEM'),

-- SYS_ROLE (시스템 권한)
('SYS_ROLE', 'ADMIN',  '슈퍼 관리자', 'Super Admin', 10,  'Y', 'SYSTEM'),
('SYS_ROLE', 'HR_MNG', '인사 관리자', 'HR Manager',  20,  'Y', 'SYSTEM'),
('SYS_ROLE', 'USER',   '일반 사용자', 'User',        30,  'Y', 'SYSTEM'),

-- HR_REL_TYPE (가족 관계)
('HR_REL_TYPE', '10', '배우자',      'Spouse',         10,  'Y', 'SYSTEM'),
('HR_REL_TYPE', '20', '자녀',        'Child',          20,  'Y', 'SYSTEM'),
('HR_REL_TYPE', '30', '부',          'Father',         30,  'Y', 'SYSTEM'),
('HR_REL_TYPE', '31', '모',          'Mother',         31,  'Y', 'SYSTEM'),
('HR_REL_TYPE', '32', '조부',        'Grandfather',    32,  'N', 'SYSTEM'),
('HR_REL_TYPE', '33', '조모',        'Grandmother',    33,  'N', 'SYSTEM'),
('HR_REL_TYPE', '34', '손자녀',      'Grandchild',     34,  'N', 'SYSTEM'),
('HR_REL_TYPE', '40', '형제자매',    'Sibling',        40,  'N', 'SYSTEM'),
('HR_REL_TYPE', '90', '위탁아동',    'Foster Child',   90,  'N', 'SYSTEM'),
('HR_REL_TYPE', '99', '기타',        'Others',         99,  'N', 'SYSTEM'),

-- HR_JOB_TYPE (가족 직업)
('HR_JOB_TYPE', '10', '직장인',      'Employee',       10,  'N', 'SYSTEM'),
('HR_JOB_TYPE', '20', '사업자',      'Business Owner', 20,  'N', 'SYSTEM'),
('HR_JOB_TYPE', '30', '일용직',      'Daily Worker',   30,  'N', 'SYSTEM'),
('HR_JOB_TYPE', '40', '학생',        'Student',        40,  'N', 'SYSTEM'),
('HR_JOB_TYPE', '50', '주부',        'Housewife',      50,  'N', 'SYSTEM'),
('HR_JOB_TYPE', '60', '무직',        'Unemployed',     60,  'N', 'SYSTEM'),
('HR_JOB_TYPE', '99', '기타',        'Others',         99,  'N', 'SYSTEM'),

-- HR_SCH_TYPE (학교 구분 - 비고 NULL 처리 완료)
('HR_SCH_TYPE', 'PRE', '미취학',      'Preschool',      10,'N', 'SYSTEM'),
('HR_SCH_TYPE', 'KIN', '유치원',      'Kindergarten',   20,  'N', 'SYSTEM'),
('HR_SCH_TYPE', 'ELE', '초등학교',    'Elementary Sch', 30,  'N', 'SYSTEM'),
('HR_SCH_TYPE', 'MID', '중학교',      'Middle School',  40,  'N', 'SYSTEM'),
('HR_SCH_TYPE', 'HIG', '고등학교',    'High School',    50, 'N', 'SYSTEM'),
('HR_SCH_TYPE', 'UNI', '대학교',      'University',     60,  'N', 'SYSTEM'),
('HR_SCH_TYPE', 'GRA', '대학원',      'Graduate Sch',   70, 'N', 'SYSTEM'),
('HR_SCH_TYPE', 'DIS', '장애인학교',  'Special Sch',    80,  'N', 'SYSTEM'),
('HR_SCH_TYPE', 'ETC', '기타',        'Others',         99,  'N', 'SYSTEM'),

-- HR_CERT_CD 
('HR_CERT_CD', 'IT001', '정보처리기사', 'Info Proc Eng', 10, 'N', 'SYSTEM'),
('HR_CERT_CD', 'IT002', '정보보안기사', 'Info Sec Eng', 20, 'N', 'SYSTEM'),
('HR_CERT_CD', 'IT003', 'SQLD', 'SQL Developer', 30, 'N', 'SYSTEM'),
('HR_CERT_CD', 'IT004', 'AWS SAA', 'AWS Solutions', 40, 'N', 'SYSTEM'),
('HR_CERT_CD', 'FN001', 'CPA(공인회계사)', 'CPA', 80, 'N', 'SYSTEM'),
('HR_CERT_CD', 'FN002', '전산세무1급', 'Tax Acc 1', 90, 'N', 'SYSTEM'),
('HR_CERT_CD', 'ETC99', '기타(직접입력)', 'Others', 999, 'Y', 'SYSTEM'),

-- HR_CERT_RANK
('HR_CERT_RANK', '10', '기술사/전문직', 'Professional', 10, 'N', 'SYSTEM'),
('HR_CERT_RANK', '20', '기사', 'Engineer', 20, 'N', 'SYSTEM'),
('HR_CERT_RANK', '30', '산업기사', 'Ind. Engineer', 30, 'N', 'SYSTEM'),
('HR_CERT_RANK', '40', '기능사', 'Technician', 40, 'N', 'SYSTEM'),
('HR_CERT_RANK', '50', '1급', 'Level 1', 50, 'N', 'SYSTEM'),
('HR_CERT_RANK', '99', '기타', 'Others', 99, 'Y', 'SYSTEM'),

-- HR_LANG / HR_LANG_TEST / HR_LANG_LVL
('HR_LANG', 'EN', '영어', 'English', 10, 'N', 'SYSTEM'),
('HR_LANG', 'JP', '일본어', 'Japanese', 20, 'N', 'SYSTEM'),
('HR_LANG', 'CN', '중국어', 'Chinese', 30, 'N', 'SYSTEM'),
('HR_LANG', 'ES', '스페인어', 'Spanish', 40, 'N', 'SYSTEM'),
('HR_LANG', 'FR', '프랑스어', 'French', 50, 'N', 'SYSTEM'),
('HR_LANG', 'DE', '독일어', 'German', 60, 'N', 'SYSTEM'),
('HR_LANG', 'VN', '베트남어', 'Vietnamese', 80, 'N', 'SYSTEM'),

('HR_LANG_TEST', 'TE01', 'TOEIC', 'TOEIC', 10, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'TE02', 'TOEIC Speaking', 'TOEIC Speaking', 20, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'TE03', 'OPIc', 'OPIc', 30, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'TE04', 'TOEFL', 'TOEFL', 40, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'JP01', 'JPT', 'JPT', 60, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'JP02', 'JLPT', 'JLPT', 70, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'CN01', 'HSK', 'HSK', 80, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'CN02', 'TSC', 'TSC', 90, 'N', 'SYSTEM'),
('HR_LANG_TEST', 'ETC', '기타(직접입력)', 'Others', 999, 'Y', 'SYSTEM'),

('HR_LANG_LVL', '10', '원어민 수준', 'Native', 10, 'N', 'SYSTEM'),
('HR_LANG_LVL', '20', '최상(비즈니스)', 'Fluent', 20, 'N', 'SYSTEM'),
('HR_LANG_LVL', '30', '상(일상회화)', 'Advanced', 30, 'N', 'SYSTEM'),
('HR_LANG_LVL', '40', '중(의사전달)', 'Intermediate', 40, 'N', 'SYSTEM'),
('HR_LANG_LVL', '50', '하(기초)', 'Basic', 50, 'N', 'SYSTEM'),

--  HR_CAREER_TYPE (경력 근무 형태)
('HR_CAREER_TYPE', '10', '정규직',      'Regular',      10,  'N', 'SYSTEM'),
('HR_CAREER_TYPE', '20', '계약직',      'Contract',     20,  'N', 'SYSTEM'),
('HR_CAREER_TYPE', '30', '파견직',      'Dispatch',     30, 'N', 'SYSTEM'),
('HR_CAREER_TYPE', '40', '인턴',        'Intern',       40, 'N', 'SYSTEM'),
('HR_CAREER_TYPE', '50', '프리랜서',    'Freelancer',   50,  'N', 'SYSTEM'),
('HR_CAREER_TYPE', '60', '아르바이트',  'Part-time',    60,  'N', 'SYSTEM'),
('HR_CAREER_TYPE', '99', '기타',        'Others',       99,  'N', 'SYSTEM'),

-- HR_REWARD_TYPE (포상 구분)
('HR_REWARD_TYPE', '10', '장기근속',    'Long Service',   10, 'N', 'SYSTEM'),
('HR_REWARD_TYPE', '20', '우수사원',    'Best Employee',  20, 'N', 'SYSTEM'),
('HR_REWARD_TYPE', '30', '프로젝트공로', 'Project Award',  30, 'N', 'SYSTEM'),
('HR_REWARD_TYPE', '40', '제안/아이디어','Suggestion',     40, 'N', 'SYSTEM'),
('HR_REWARD_TYPE', '90', '대외수상',    'External Award', 90, 'N', 'SYSTEM'),

-- HR_EDU_TYPE (교육 유형)
('HR_EDU_TYPE', 'OJT',  '신입입문',     'Onboarding', 10, 'N', 'SYSTEM'),
('HR_EDU_TYPE', 'JOB',  '직무역량',     'Job Skill',  20, 'N', 'SYSTEM'),
('HR_EDU_TYPE', 'LEAD', '리더십',       'Leadership', 30, 'N', 'SYSTEM'),
('HR_EDU_TYPE', 'LAW',  '법정의무',     'Mandatory',  40, 'N', 'SYSTEM'),
('HR_EDU_TYPE', 'LANG', '외국어',       'Language',   50, 'N', 'SYSTEM'),
('HR_EDU_TYPE', 'ETC',  '기타',         'Others',     99, 'N', 'SYSTEM'),

-- EV_TYPE (평가 유형 : ZEV_TYPE)
('EV_TYPE', 'RG', '정기평가', 'Regular Eval', 10, 'N', 'SYSTEM'),
('EV_TYPE', 'SP', '수시평가', 'Spot Eval',    20, 'N', 'SYSTEM'),

-- EV_TPL_STAT (템플릿 상태 : ZSTATUS)
('EV_TPL_STAT', 'T', '작성중', 'Draft',     10, 'Y', 'SYSTEM'),
('EV_TPL_STAT', 'O', '오픈',   'Open',      20, 'Y', 'SYSTEM'),
('EV_TPL_STAT', 'C', '마감',   'Closed',    30, 'Y', 'SYSTEM'),
('EV_TPL_STAT', 'H', '보류',   'Hold',      99, 'N', 'SYSTEM'),

-- EV_STEP (평가 단계)
('EV_STEP', '300', '본인평가', 'Self Review',  10, 'Y', 'SYSTEM'),
('EV_STEP', '400', '1차평가',  '1st Review',   20, 'Y', 'SYSTEM'),
('EV_STEP', '500', '2차평가',  '2nd Review',   30, 'Y', 'SYSTEM'),
('EV_STEP', '900', '최종확정', 'Finalized',    90, 'Y', 'SYSTEM'), -- 프로필 조회용

-- EV_GRADE (평가 등급)
('EV_GRADE', 'S',  'S (탁월)',       'S (Outstanding)', 10, 'N', 'SYSTEM'),
('EV_GRADE', 'A',  'A (우수)',       'A (Excellent)',   20, 'N', 'SYSTEM'),
('EV_GRADE', 'B',  'B (보통)',       'B (Good)',        30, 'N', 'SYSTEM'),
('EV_GRADE', 'C',  'C (미흡)',       'C (Needs Imprv)', 40, 'N', 'SYSTEM'),
('EV_GRADE', 'D',  'D (부족)',       'D (Unsatisfy)',   50, 'N', 'SYSTEM'),

-- EV_RSLT_STAT (평가표 상태 : ZSTATUS)
('EV_RSLT_STAT', 'T', '임시저장', 'Temporary Save', 10, 'Y', 'SYSTEM'),
('EV_RSLT_STAT', 'C', '제출완료', 'Submitted',      20, 'Y', 'SYSTEM');



-- 사원 마스터 (개발용 임시) --
CREATE TABLE ZHR_EMP_MASTER (
    -- [PK] 사번
    PERNR           VARCHAR(10)  NOT NULL COMMENT '사번 (PK)',

    -- [기본 정보]
    ENAME           VARCHAR(50)  NOT NULL COMMENT '성명',
    
    -- [인사 정보 - 공통코드 참조]
    DEPT_CD         VARCHAR(20)  NOT NULL COMMENT '부서 코드 (HR_DEPT 참조)', -- [NEW] 부서 추가
    RANK_CD         VARCHAR(20)  NOT NULL COMMENT '직급 코드 (HR_RANK 참조)',
    DUTY_CD         VARCHAR(20)  NOT NULL COMMENT '직무 코드 (HR_DUTY 참조)',
    EMP_STATUS      VARCHAR(20)  NOT NULL DEFAULT '10' COMMENT '재직 상태 (HR_STATUS 참조)',

    -- [날짜 정보]
    ENTRY_DT        DATE         NOT NULL COMMENT '입사일자',
    RETIRE_DT       DATE         NULL     COMMENT '퇴직일자',

    -- [동시성 제어]
    OBJ_VERSION     INT          NOT NULL DEFAULT 1 COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_AT      DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME     NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)  NULL     COMMENT '수정자',

    PRIMARY KEY (PERNR)

) COMMENT '사원 마스터 (인사 기본 정보)';


-- 더미 데이터 --
INSERT INTO ZHR_EMP_MASTER 
(PERNR, ENAME, ENTRY_DT, RETIRE_DT, DEPT_CD, RANK_CD, DUTY_CD, EMP_STATUS, OBJ_VERSION, CREATED_BY) 
VALUES 
-- ==========================================
-- [0] 특수 계정 (관리자용)
-- ==========================================
-- 관리자: 기술연구소(DEV) 소속 / 부장(005) / 백엔드(SW_BE)
('2018001', '양한재', '2018-03-01', NULL, 'DEV', '005', 'SW_BE', '10', 1, 'system_admin'),

-- ==========================================
-- [1] 2022년 입사자 (경력직 포함 - 대리/과장급)
-- ==========================================
('2201001', '김철수', '2022-01-01', '2025-09-30', 'DEV_SVR', '003', 'SW_BE',  '99', 1, 'system_admin'), -- 퇴직
('2201002', '이영희', '2022-01-01', '2025-01-31', 'BIZ_MKT', '002', 'UIUX',   '99', 1, 'system_admin'), -- 퇴직
('2203003', '박민준', '2022-03-01', '2025-10-29', 'BIZ',     '003', 'PO',     '99', 1, 'system_admin'), -- 퇴직
('2203004', '최서연', '2022-03-01', NULL,         'HR',      '003', 'HR_M',   '10', 1, 'system_admin'),
('2207005', '정지훈', '2022-07-01', '2025-02-28', 'FIN',     '002', 'ACC',    '99', 1, 'system_admin'), -- 퇴직
('2207006', '윤서아', '2022-07-01', NULL,         'DEV_WEB', '002', 'SW_FE',  '10', 1, 'system_admin'),
('2209007', '강도윤', '2022-09-01', NULL,         'DEV_SVR', '002', 'SW_BE',  '10', 1, 'system_admin'),
('2210008', '임하윤', '2022-10-01', '2025-03-31', 'BIZ',     '002', 'PO',     '99', 1, 'system_admin'), -- 퇴직
('2210009', '한지우', '2022-10-01', NULL,         'BIZ_MKT', '002', 'UIUX',   '10', 1, 'system_admin'),
('2211010', '오시우', '2022-11-01', NULL,         'MGT',     '002', 'ACC',    '10', 1, 'system_admin'),

-- ==========================================
-- [2] 2023년 입사자 (사원/대리급)
-- ==========================================
('2301011', '신유나', '2023-01-01', '2025-06-30', 'HR',      '001', 'HR_M',   '99', 1, 'system_admin'), -- 퇴직
('2301012', '장은우', '2023-01-01', '2025-04-30', 'DEV_AI',  '002', 'SW_BE',  '99', 1, 'system_admin'), -- 퇴직
('2302013', '송지아', '2023-02-01', NULL,         'BIZ',     '001', 'PO',     '10', 1, 'system_admin'),
('2304014', '권혁준', '2023-04-01', '2025-07-31', 'DEV',     '002', 'SW_APP', '99', 1, 'system_admin'), -- 퇴직
('2305015', '황수빈', '2023-05-01', NULL,         'BIZ_MKT', '001', 'UIUX',   '10', 1, 'system_admin'),
('2305016', '안태현', '2023-05-01', NULL,         'MGT',     '001', 'ACC',    '10', 1, 'system_admin'),
('2308017', '문채원', '2023-08-01', '2025-08-31', 'HR',      '001', 'HR_M',   '99', 1, 'system_admin'), -- 퇴직
('2309018', '고은별', '2023-09-01', NULL,         'DEV_WEB', '001', 'SW_FE',  '10', 1, 'system_admin'),
('2310019', '배준호', '2023-10-01', NULL,         'DEV_SVR', '001', 'SW_BE',  '10', 1, 'system_admin'),
('2312020', '조민서', '2023-12-01', NULL,         'BIZ_SAL', '001', 'SALES',  '10', 1, 'system_admin'),

-- ==========================================
-- [3] 2024년 입사자 (대부분 사원)
-- ==========================================
('2401021', '유정민', '2024-01-01', '2025-10-15', 'FIN',     '001', 'ACC',    '99', 1, 'system_admin'), -- 퇴직
('2401022', '홍예준', '2024-01-01', NULL,         'DEV_WEB', '001', 'SW_FE',  '10', 1, 'system_admin'),
('2402023', '나소율', '2024-02-01', NULL,         'BIZ_MKT', '001', 'UIUX',   '10', 1, 'system_admin'),
('2402024', '백시원', '2024-02-01', NULL,         'HR',      '001', 'HR_M',   '10', 1, 'system_admin'),
('2403025', '노하린', '2024-03-01', NULL,         'DEV_AI',  '001', 'SW_BE',  '10', 1, 'system_admin'),
('2404026', '차유진', '2024-04-01', NULL,         'BIZ',     '001', 'PO',     '10', 1, 'system_admin'),
('2404027', '표지성', '2024-04-01', NULL,         'DEV_SVR', '001', 'SW_BE',  '10', 1, 'system_admin'),
('2405028', '기태영', '2024-05-01', NULL,         'MGT',     '001', 'ACC',    '10', 1, 'system_admin'),
('2405029', '선우진', '2024-05-01', NULL,         'DEV',     '001', 'SW_APP', '10', 1, 'system_admin'),
('2406030', '왕지현', '2024-06-01', NULL,         'BIZ_MKT', '001', 'UIUX',   '10', 1, 'system_admin'),
('2407031', '서재윤', '2024-07-01', NULL,         'HR',      '001', 'HR_M',   '10', 1, 'system_admin'),
('2407032', '방민호', '2024-07-01', NULL,         'BIZ_SAL', '001', 'SALES',  '10', 1, 'system_admin'),
('2408033', '편지후', '2024-08-01', NULL,         'DEV_WEB', '001', 'SW_FE',  '10', 1, 'system_admin'),
('2409034', '성주원', '2024-09-01', NULL,         'FIN',     '001', 'ACC',    '10', 1, 'system_admin'),
('2409035', '위하늘', '2024-09-01', NULL,         'DEV_AI',  '001', 'SW_BE',  '10', 1, 'system_admin'),
('2410036', '명지안', '2024-10-01', NULL,         'DEV_SVR', '001', 'SW_BE',  '10', 1, 'system_admin'),
('2411037', '금예서', '2024-11-01', NULL,         'BIZ_MKT', '001', 'UIUX',   '10', 1, 'system_admin'),
('2411038', '도윤재', '2024-11-01', NULL,         'BIZ',     '001', 'PO',     '10', 1, 'system_admin'),
('2412039', '채수현', '2024-12-01', NULL,         'HR',      '001', 'HR_M',   '10', 1, 'system_admin'),
('2412040', '하동균', '2024-12-01', NULL,         'DEV',     '001', 'SW_APP', '10', 1, 'system_admin'),

-- ==========================================
-- [4] 2025년 입사자 (신입 사원)
-- ==========================================
('2501041', '진세아', '2025-01-01', NULL,         'DEV_WEB', '001', 'SW_FE',  '10', 1, 'system_admin'),
('2501042', '원태준', '2025-01-01', NULL,         'BIZ',     '001', 'PO',     '10', 1, 'system_admin'),
('2502043', '라희선', '2025-02-01', NULL,         'BIZ_MKT', '001', 'UIUX',   '10', 1, 'system_admin'),
('2503044', '설강민', '2025-03-01', NULL,         'HR',      '001', 'HR_M',   '10', 1, 'system_admin'),
('2503045', '옥다은', '2025-03-01', NULL,         'FIN',     '001', 'ACC',    '10', 1, 'system_admin'),
('2504046', '경수호', '2025-04-01', NULL,         'DEV_AI',  '001', 'SW_BE',  '10', 1, 'system_admin'),
('2505047', '봉준서', '2025-05-01', NULL,         'DEV_SVR', '001', 'SW_BE',  '10', 1, 'system_admin'),
('2506048', '마동욱', '2025-06-01', NULL,         'BIZ_SAL', '001', 'SALES',  '10', 1, 'system_admin'),
('2507049', '엄지아', '2025-07-01', NULL,         'BIZ_MKT', '001', 'UIUX',   '10', 1, 'system_admin'),
('2508050', '함유주', '2025-08-01', NULL,         'DEV',     '001', 'SW_APP', '10', 1, 'system_admin');

-- 계정 테이블 (로그인) --
CREATE TABLE ZSYS_USER_ACCOUNT (
    -- [1] 식별자 (사번 사용)
    USER_ID         VARCHAR(50)  NOT NULL COMMENT '로그인 ID (사원:사번, 관리자:ID)',

    -- [2] 기본 정보
    PERNR           VARCHAR(10)  NULL     COMMENT '사번 (관리자는 NULL)',
    USER_NM         VARCHAR(50)  NOT NULL COMMENT '사용자명',
    PASSWD          VARCHAR(255) NOT NULL COMMENT '비밀번호 (암호화)',

    -- [3] 상태 및 보안 관리
    SYS_ROLE        VARCHAR(20)  NOT NULL DEFAULT 'USER' COMMENT '권한 코드 (SYS_ROLE 참조: ADMIN, USER)',
    LOGIN_FAIL_CNT  INT          NOT NULL DEFAULT 0   COMMENT '실패 횟수',
    IS_LOCKED       CHAR(1)      NOT NULL DEFAULT 'N' COMMENT '잠금 여부',
    IS_USE          CHAR(1)      NOT NULL DEFAULT 'Y' COMMENT '사용 여부',
    
    -- [4] 이력 및 감사
    LAST_LOGIN_DT   DATETIME     NULL     COMMENT '최근 로그인 일시',
    CREATED_AT      DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY      VARCHAR(50)  NOT NULL,
    UPDATED_AT      DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY      VARCHAR(50)  NULL,

    PRIMARY KEY (USER_ID)
) COMMENT '시스템 사용자 계정';


-- ==========================================================
-- [참고용] 시스템 사용자 계정 더미 데이터 (ZSYS_USER_ACCOUNT)
-- * 실제 DB에는 PASSWD 컬럼이 BCrypt로 암호화되어 저장됨
-- * 초기 비밀번호 규칙: 사번과 동일 (관리자는 1234)
-- ==========================================================
INSERT INTO ZSYS_USER_ACCOUNT 
(USER_ID, PERNR, USER_NM, PASSWD, SYS_ROLE, LOGIN_FAIL_CNT, IS_LOCKED, IS_USE, CREATED_AT, CREATED_BY) 
VALUES 

-- [0] 시스템 슈퍼 관리자 (권한: ADMIN)
('admin1',  NULL,      '시스템총괄', '{bcrypt}1234',    'ADMIN', 0, 'N', 'Y', NOW(), 'SYSTEM'),

-- [1] 특수 관리자 (권한: ADMIN)
('2018001', '2018001', '양한재',     '{bcrypt}2018001', 'ADMIN', 0, 'N', 'Y', NOW(), 'SYSTEM'),

-- [2] 2022년 입사자 (권한: USER)
('2201001', '2201001', '김철수',     '{bcrypt}2201001', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2201002', '2201002', '이영희',     '{bcrypt}2201002', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2203003', '2203003', '박민준',     '{bcrypt}2203003', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2203004', '2203004', '최서연',     '{bcrypt}2203004', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2207005', '2207005', '정지훈',     '{bcrypt}2207005', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2207006', '2207006', '윤서아',     '{bcrypt}2207006', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2209007', '2209007', '강도윤',     '{bcrypt}2209007', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2210008', '2210008', '임하윤',     '{bcrypt}2210008', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2210009', '2210009', '한지우',     '{bcrypt}2210009', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2211010', '2211010', '오시우',     '{bcrypt}2211010', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),

-- [3] 2023년 입사자 (권한: USER)
('2301011', '2301011', '신유나',     '{bcrypt}2301011', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2301012', '2301012', '장은우',     '{bcrypt}2301012', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2302013', '2302013', '송지아',     '{bcrypt}2302013', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2304014', '2304014', '권혁준',     '{bcrypt}2304014', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2305015', '2305015', '황수빈',     '{bcrypt}2305015', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2305016', '2305016', '안태현',     '{bcrypt}2305016', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2308017', '2308017', '문채원',     '{bcrypt}2308017', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2309018', '2309018', '고은별',     '{bcrypt}2309018', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2310019', '2310019', '배준호',     '{bcrypt}2310019', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2312020', '2312020', '조민서',     '{bcrypt}2312020', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),

-- [4] 2024년 입사자 (권한: USER)
('2401021', '2401021', '유정민',     '{bcrypt}2401021', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2401022', '2401022', '홍예준',     '{bcrypt}2401022', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2402023', '2402023', '나소율',     '{bcrypt}2402023', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2402024', '2402024', '백시원',     '{bcrypt}2402024', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2403025', '2403025', '노하린',     '{bcrypt}2403025', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2404026', '2404026', '차유진',     '{bcrypt}2404026', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2404027', '2404027', '표지성',     '{bcrypt}2404027', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2405028', '2405028', '기태영',     '{bcrypt}2405028', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2405029', '2405029', '선우진',     '{bcrypt}2405029', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2406030', '2406030', '왕지현',     '{bcrypt}2406030', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2407031', '2407031', '서재윤',     '{bcrypt}2407031', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2407032', '2407032', '방민호',     '{bcrypt}2407032', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2408033', '2408033', '편지후',     '{bcrypt}2408033', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2409034', '2409034', '성주원',     '{bcrypt}2409034', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2409035', '2409035', '위하늘',     '{bcrypt}2409035', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2410036', '2410036', '명지안',     '{bcrypt}2410036', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2411037', '2411037', '금예서',     '{bcrypt}2411037', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2411038', '2411038', '도윤재',     '{bcrypt}2411038', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2412039', '2412039', '채수현',     '{bcrypt}2412039', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2412040', '2412040', '하동균',     '{bcrypt}2412040', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),

-- [5] 2025년 입사자 (권한: USER)
('2501041', '2501041', '진세아',     '{bcrypt}2501041', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2501042', '2501042', '원태준',     '{bcrypt}2501042', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2502043', '2502043', '라희선',     '{bcrypt}2502043', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2503044', '2503044', '설강민',     '{bcrypt}2503044', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2503045', '2503045', '옥다은',     '{bcrypt}2503045', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2504046', '2504046', '경수호',     '{bcrypt}2504046', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2505047', '2505047', '봉준서',     '{bcrypt}2505047', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2506048', '2506048', '마동욱',     '{bcrypt}2506048', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2507049', '2507049', '엄지아',     '{bcrypt}2507049', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM'),
('2508050', '2508050', '함유주',     '{bcrypt}2508050', 'USER',  0, 'N', 'Y', NOW(), 'SYSTEM');

-- 사용자 로그인 이력 테이블 --
CREATE TABLE ZSYS_LOGIN_LOG (
    -- [1] 로그 식별자
    LOG_ID              BIGINT       NOT NULL AUTO_INCREMENT COMMENT '로그 시퀀스 (PK)',

    -- [2] 로그인 시도 정보
    LOGIN_ID            VARCHAR(50)  NOT NULL COMMENT '로그인 시도 ID (사번 또는 ID)',
    LOGIN_TYPE          VARCHAR(20)  NOT NULL COMMENT '시도한 로그인 방식 (GENERAL/SSO/COOKIE)',
    
    -- [3] 접속 환경 정보
    IP_ADDRESS          VARCHAR(50)  NOT NULL COMMENT '접속 IP (IPv6 고려하여 50자)',
    USER_AGENT          VARCHAR(500) NULL     COMMENT '브라우저 및 OS 정보 (User-Agent String)',
    
    -- [4] 로그인 결과
    LOGIN_RESULT        VARCHAR(10)  NOT NULL COMMENT '결과 상태 (SUCCESS / FAIL / LOCKED)',
    FAIL_REASON         VARCHAR(255) NULL     COMMENT '실패 시 사유 (예: 비밀번호 불일치, 계정 잠금)',

    -- [5] 발생 일시
    LOGIN_DT            DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '로그인 시도 일시',

    -- [6] 제약조건 및 인덱스 정의
    PRIMARY KEY (LOG_ID),

    -- 인덱스 1: 사용자별 이력 조회용 (가장 빈번함)
    INDEX IDX_ZSYS_LOGIN_LOG_01 (LOGIN_ID, LOGIN_DT),

    -- 인덱스 2: 기간별 보안 감사 및 통계용
    INDEX IDX_ZSYS_LOGIN_LOG_02 (LOGIN_DT),

    -- 인덱스 3: 특정 IP 차단/추적용 (보안 이슈 발생 시)
    INDEX IDX_ZSYS_LOGIN_LOG_03 (IP_ADDRESS)

) COMMENT '시스템 로그인 접속 이력';

-- 로그인 정책 및 방식 설정 테이블 --
CREATE TABLE ZCM_LOGIN_CONFIG (
    -- [1] 식별자
    CONFIG_ID           VARCHAR(20)  NOT NULL COMMENT '설정 ID (예: GLOBAL)',

    -- [2] 로그인 방식 제어
    USE_MULTI_METHOD    CHAR(1)      NOT NULL DEFAULT 'N'       COMMENT '복수 로그인 방식 허용 여부',
    USE_SSO             CHAR(1)      NOT NULL DEFAULT 'N'       COMMENT 'SSO 사용 여부 (UI 제어용)',
    USE_COOKIE          CHAR(1)      NOT NULL DEFAULT 'N'       COMMENT '쿠키/자동 로그인 사용 여부',
    USE_BIO_AUTH        CHAR(1)      NOT NULL DEFAULT 'N'       COMMENT '생체 인증 사용 여부',

    -- [3] 보안 정책 설정
    LOCK_AFTER_FAILURE  INT          NOT NULL DEFAULT 5         COMMENT '실패 잠금 기준 횟수',
    LOG_SAVE_YN         CHAR(1)      NOT NULL DEFAULT 'Y'       COMMENT '로그인 로그 저장 여부',
    LOG_RETENTION_MOS   INT          NOT NULL DEFAULT 12        COMMENT '로그 저장 기간 (개월)',

    /* [보류] SSO 상세 설정 (필요 시 주석 해제) */
    /*
    SSO_AUTH_URL        VARCHAR(255) NULL     COMMENT 'SSO 인증 서버 URL',
    SSO_CLIENT_ID       VARCHAR(100) NULL     COMMENT 'SSO Client ID',
    SSO_REDIRECT_URI    VARCHAR(255) NULL     COMMENT 'SSO Redirect URI',
    */

    -- [4] 시스템 관리 필드 (버전 추가)
    VERSION             BIGINT       NOT NULL DEFAULT 1         COMMENT '설정 버전 (낙관적 락용)',
    
    -- [5] 이력 및 감사
    CREATED_AT          DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY          VARCHAR(50)  NOT NULL,
    UPDATED_AT          DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY          VARCHAR(50)  NULL,

    PRIMARY KEY (CONFIG_ID)
) COMMENT '시스템 로그인 정책 및 방식 설정';


-- 급여 --
-- 급여 항목 관리 --
CREATE TABLE ZHR_PAY_ITEM (  
    ZITEM_CD VARCHAR(20) PRIMARY KEY, -- 항목 코드 (기본 키, 중복 불가)
    ZITEM_NM VARCHAR(100) NOT NULL,   -- 항목명
    ZITEM_TY VARCHAR(20) NOT NULL,    -- 항목 유형 (PAY, DEDUCT 등)
    ZTAX_YN CHAR(1) NOT NULL,         -- 과세 여부 (Y/N)
    ZTAX_TY VARCHAR(20),              -- 과세 방식 ('PERCENT' 등)
    ZTAX_PC DECIMAL(5, 2),            -- 과세 비율 (예: 999.99까지 가능)
    ZROUND_TY VARCHAR(20) NOT NULL DEFAULT 'WON', -- 절사 방식 (기본값 'WON')
    ZBACK_YN CHAR(1) NOT NULL,        -- 소급 적용 여부 (Y/N)
    ZINSR_YN CHAR(1) NOT NULL,        -- 4대 보험 대상 여부 (Y/N)
    ZUSE_YN CHAR(1) NOT NULL DEFAULT 'Y', -- 사용 여부 (기본값 'Y')
    ZNOTE VARCHAR(500),               -- 비고
    CREATED_AT DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY VARCHAR(50) NOT NULL COMMENT '생성자',
    UPDATED_AT DATETIME NULL COMMENT '수정 일시',
    UPDATED_BY VARCHAR(50) NULL COMMENT '수정자',

    -- === 제약 조건 (데이터 무결성 보장) ===
    CONSTRAINT CHK_ZITEM_TY CHECK (ZITEM_TY IN ('PAY', 'DEDUCT', 'INSURANCE', 'TAX', 'BACKPAY')),
    CONSTRAINT CHK_ZTAX_YN CHECK (ZTAX_YN IN ('Y', 'N')),
    CONSTRAINT CHK_ZBACK_YN CHECK (ZBACK_YN IN ('Y', 'N')),
    CONSTRAINT CHK_ZINSR_YN CHECK (ZINSR_YN IN ('Y', 'N')),
    CONSTRAINT CHK_ZUSE_YN CHECK (ZUSE_YN IN ('Y', 'N'))
);

-- 더미 데이터 --
INSERT INTO ZHR_PAY_ITEM
(ZITEM_CD, ZITEM_NM, ZITEM_TY, ZTAX_YN, ZTAX_TY, ZTAX_PC, ZROUND_TY, ZBACK_YN, ZINSR_YN, ZUSE_YN, ZNOTE, CREATED_BY)
VALUES
-- 1. 급여 항목 (PAY) --
('PAY001', '기본급', 'PAY', 'Y', 'PERCENT', NULL, 'WON', 'Y', 'Y', 'Y', '월 기본 급여 항목', 'system_admin'),
('PAY002', '상여금', 'PAY', 'Y', 'PERCENT', NULL, 'TEN', 'N', 'Y', 'Y', '정기/비정기 상여금', 'system_admin'),
('PAY003', '식대(비과세)', 'PAY', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '비과세 식대 항목 (월 20만원 한도)', 'system_admin'),
('PAY004', '직책수당', 'PAY', 'Y', 'PERCENT', NULL, 'WON', 'N', 'Y', 'Y', '팀장/임원 직책 보유자 수당', 'system_admin'),
('PAY005', '자격수당', 'PAY', 'Y', 'PERCENT', NULL, 'WON', 'N', 'Y', 'Y', '자격증/면허 보유자 수당', 'system_admin'),
('PAY006', '가족수당', 'PAY', 'Y', 'PERCENT', NULL, 'WON', 'N', 'Y', 'Y', '부양가족 기준 지급 수당', 'system_admin'),
('PAY007', '연장근로수당', 'PAY', 'Y', 'PERCENT', NULL, 'WON', 'N', 'Y', 'Y', '연장/야간/휴일 근로 수당', 'system_admin'),
('PAY008', '차량유지비', 'PAY', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '개인 차량 유지보조비', 'system_admin'),
('PAY009', '성과급', 'PAY', 'Y', 'PERCENT', NULL, 'TEN', 'N', 'Y', 'Y', '목표 달성 시 성과급 지급', 'system_admin'),
('PAY010', '휴가비', 'PAY', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '정기 휴가비 지원', 'system_admin'),

-- 2. 세금 항목 (TAX) --
('TAX001', '소득세', 'TAX', 'N', NULL, NULL, 'WON', 'Y', 'N', 'Y', '근로소득세 갑근세 원천징수', 'system_admin'),
('TAX002', '지방소득세', 'TAX', 'N', NULL, NULL, 'WON', 'Y', 'N', 'Y', '소득세 연계 지방세', 'system_admin'),
('TAX003', '주민세', 'TAX', 'N', NULL, NULL, 'WON', 'Y', 'N', 'Y', '특별세 성격 주민세', 'system_admin'),
('TAX004', '농어촌특별세', 'TAX', 'N', NULL, NULL, 'WON', 'Y', 'N', 'N', '특정 대상자 농어촌특별세', 'system_admin'),

-- 3. 보험 항목 (INSURANCE) --
('INS001', '국민연금', 'INSURANCE', 'N', NULL, NULL, 'TEN', 'Y', 'N', 'Y', '4대보험 국민연금 근로자 부담분', 'system_admin'),
('INS002', '건강보험', 'INSURANCE', 'N', NULL, NULL, 'TEN', 'Y', 'N', 'Y', '4대보험 건강보험 근로자 부담분', 'system_admin'),
('INS003', '장기요양보험', 'INSURANCE', 'N', NULL, NULL, 'TEN', 'Y', 'N', 'Y', '건강보험 연계 장기요양보험', 'system_admin'),
('INS004', '고용보험', 'INSURANCE', 'N', NULL, NULL, 'TEN', 'Y', 'N', 'Y', '4대보험 고용보험 근로자 부담분', 'system_admin'),
('INS005', '산재보험', 'INSURANCE', 'N', NULL, NULL, 'TEN', 'Y', 'N', 'N', '사용자 부담 관리용', 'system_admin'),

-- 4. 일반 공제 항목 (DEDUCT) --
('DED001', '학자금상환', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'N', '취업 후 학자금 상환 의무공제', 'system_admin'),
('DED002', '노조비', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '노동조합 조합비', 'system_admin'),
('DED003', '사내대출상환', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '사내대출 원리금 상환', 'system_admin'),
('DED004', '기숙사비', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '사내 기숙사 사용료', 'system_admin'),
('DED005', '복지기금', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '동호회비/복지기금', 'system_admin'),
('DED006', '개인연금', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '개인연금(회사 대납 후 공제)', 'system_admin'),

-- 5. [추가] 징계/병가 감액용 공제 항목 (DEDUCT) - (ZHR_PAY_DEDUCT_REASON 테이블용) --
('DED101', '병가 감액(무급)', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '무급 병가 사용 시 감액', 'system_admin'),
('DED102', '징계 감액(감봉)', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '징계위원회 결과 감봉 조치', 'system_admin'),
('DED103', '결근 감액', 'DEDUCT', 'N', NULL, NULL, 'WON', 'N', 'N', 'Y', '무단 결근 시 감액', 'system_admin');


-- 월별 급여 항목 내역 (대리 키 PK + 고유 키 UNIQUE) --
CREATE TABLE ZHR_PAY_DETAIL (
    -- 1. 기본 키 컬럼 (PK) - 대리 키
    DETAIL_ID   BIGINT         NOT NULL AUTO_INCREMENT COMMENT '급여상세 고유ID (PK)',

    -- 2. 비즈니스 키 컬럼 (UNIQUE)
    ZPAY_YM     CHAR(6)        NOT NULL COMMENT '지급월',
    ZSEQ_NO     SMALLINT       NOT NULL COMMENT '차수',
    ZEMP_NO     VARCHAR(10)    NOT NULL COMMENT '사번 (FK to ZHR_EMP_MASTER.PERNR)',
    ZITEM_CD    VARCHAR(20)    NOT NULL COMMENT '항목 코드 (FK to ZHR_PAY_ITEM.ZITEM_CD)',

    -- 3. 급여 데이터 필드
    ZAMOUNT     DECIMAL(18, 2) NOT NULL COMMENT '지급/공제액 (공제는 음수 가능)',
    ZBACK_YM    CHAR(6)        NULL     COMMENT '소급월 (소급 항목일 때만 사용)',
    ZORIG_AMT   DECIMAL(18, 2) NULL     COMMENT '원금 (소급 항목일 때 차액 계산용)',
    ZNOTE       VARCHAR(500)   NULL     COMMENT '비고 (수동 조정 사유 등)',
    
    -- 4. 감사(Audit) 필드
    CREATED_AT  DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY  VARCHAR(50)    NOT NULL COMMENT '생성자',
    UPDATED_AT  DATETIME       NULL     COMMENT '수정 일시',
    UPDATED_BY  VARCHAR(50)    NULL     COMMENT '수정자',

    -- 5. 기본 키 설정
    PRIMARY KEY (DETAIL_ID),

    -- 6. 고유 키(UNIQUE) 설정 (중복 체크용)
    UNIQUE KEY UK_ZHR_PAY_DETAIL_01 (ZPAY_YM, ZSEQ_NO, ZEMP_NO, ZITEM_CD),

    -- 7. 외래 키 (FK) 설정
    FOREIGN KEY (ZEMP_NO) REFERENCES ZHR_EMP_MASTER(PERNR),
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),

    -- 8. 인덱스 설정
    INDEX IX_ZHR_PAY_DETAIL_01 (ZEMP_NO),
    INDEX IX_ZHR_PAY_DETAIL_02 (ZITEM_CD)

) COMMENT '월별 사원별 급여 항목 지급/공제 내역';



-- 더미데이터 --

INSERT INTO ZHR_PAY_DETAIL
(ZPAY_YM, ZSEQ_NO, ZEMP_NO, ZITEM_CD, ZAMOUNT, ZBACK_YM, ZORIG_AMT, ZNOTE, CREATED_BY)
VALUES
-- '2201001', '김철수' (10개 항목) - 2024년 10월 1차
('202410', 1, '2201001', 'PAY001', 5000000.00, NULL, NULL, NULL, 'system_admin'), -- 기본급
('202410', 1, '2201001', 'PAY003', 200000.00, NULL, NULL, '비과세 식대', 'system_admin'), -- 식대(비과세)
('202410', 1, '2201001', 'PAY004', 300000.00, NULL, NULL, '팀장 직책수당', 'system_admin'), -- 직책수당
('202410', 1, '2201001', 'PAY008', 200000.00, NULL, NULL, '차량유지비', 'system_admin'), -- 차량유지비
('202410', 1, '2201001', 'TAX001', -420000.00, NULL, NULL, NULL, 'system_admin'), -- 소득세
('202410', 1, '2201001', 'TAX002', -42000.00, NULL, NULL, NULL, 'system_admin'), -- 지방소득세
('202410', 1, '2201001', 'INS001', -225000.00, NULL, NULL, NULL, 'system_admin'), -- 국민연금
('202410', 1, '2201001', 'INS002', -178000.00, NULL, NULL, NULL, 'system_admin'), -- 건강보험
('202410', 1, '2201001', 'INS003', -22800.00, NULL, NULL, NULL, 'system_admin'), -- 장기요양보험
('202410', 1, '2201001', 'INS004', -45000.00, NULL, NULL, NULL, 'system_admin'), -- 고용보험

-- '2301011', '신유나' (9개 항목) - 2024년 10월 1차
('202410', 1, '2301011', 'PAY001', 3500000.00, NULL, NULL, NULL, 'system_admin'), -- 기본급
('202410', 1, '2301011', 'PAY003', 200000.00, NULL, NULL, '비과세 식대', 'system_admin'), -- 식대(비과세)
('202410', 1, '2301011', 'PAY007', 150000.00, NULL, NULL, '10월 연장근로 5시간', 'system_admin'), -- 연장근로수당
('202410', 1, '2301011', 'TAX001', -180000.00, NULL, NULL, NULL, 'system_admin'), -- 소득세
('202410', 1, '2301011', 'TAX002', -18000.00, NULL, NULL, NULL, 'system_admin'), -- 지방소득세
('202410', 1, '2301011', 'INS001', -157500.00, NULL, NULL, NULL, 'system_admin'), -- 국민연금
('202410', 1, '2301011', 'INS002', -124600.00, NULL, NULL, NULL, 'system_admin'), -- 건강보험
('202410', 1, '2301011', 'INS003', -15900.00, NULL, NULL, NULL, 'system_admin'), -- 장기요양보험
('202410', 1, '2301011', 'DED002', -35000.00, NULL, NULL, '노조 조합비', 'system_admin'), -- 노조비

-- '2401021', '유정민' (9개 항목) - 2024년 10월 1차
('202410', 1, '2401021', 'PAY001', 3000000.00, NULL, NULL, NULL, 'system_admin'), -- 기본급
('202410', 1, '2401021', 'PAY003', 200000.00, NULL, NULL, '비과세 식대', 'system_admin'), -- 식대(비과세)
('202410', 1, '2401021', 'TAX001', -110000.00, NULL, NULL, NULL, 'system_admin'), -- 소득세
('202410', 1, '2401021', 'TAX002', -11000.00, NULL, NULL, NULL, 'system_admin'), -- 지방소득세
('202410', 1, '2401021', 'INS001', -135000.00, NULL, NULL, NULL, 'system_admin'), -- 국민연금
('202410', 1, '2401021', 'INS002', -106800.00, NULL, NULL, NULL, 'system_admin'), -- 건강보험
('202410', 1, '2401021', 'INS003', -13700.00, NULL, NULL, NULL, 'system_admin'), -- 장기요양보험
('202410', 1, '2401021', 'INS004', -27000.00, NULL, NULL, NULL, 'system_admin'), -- 고용보험
('202410', 1, '2401021', 'DED003', -250000.00, NULL, NULL, '사내대출 상환 (3/12)', 'system_admin'), -- 사내대출상환

-- '2211010', '오시우' (8개 항목 - 10월분 + 9월 소급분 *병합*) - 2024년 10월 1차
('202410', 1, '2211010', 'PAY001', 4500000.00, '202409', 3500000.00, '10월분(400) + 9월 인상소급(50)', 'system_admin'), -- 기본급
('202410', 1, '2211010', 'PAY003', 200000.00, NULL, NULL, '비과세 식대', 'system_admin'), -- 식대(비과세)
('202410', 1, '2211010', 'TAX001', -280000.00, '202409', -180000.00, '10월분 + 9월 소급분', 'system_admin'), -- 소득세
('202410', 1, '2211010', 'TAX002', -28000.00, '202409', -18000.00, '10월분 + 9월 소급분', 'system_admin'), -- 지방소득세
('202410', 1, '2211010', 'INS001', -202500.00, '202409', -157500.00, '10월분 + 9월 소급분', 'system_admin'), -- 국민연금
('202410', 1, '2211010', 'INS002', -160200.00, '202409', -124600.00, '10월분 + 9월 소급분', 'system_admin'), -- 건강보험
('202410', 1, '2211010', 'INS003', -20480.00, '202409', -15900.00, '10월분 + 9월 소급분', 'system_admin'), -- 장기요양보험
('202410', 1, '2211010', 'INS004', -40500.00, '202409', -31500.00, '10월분 + 9월 소급분', 'system_admin'), -- 고용보험

-- [추가] '2201001', '김철수' (4개 항목) - 2024년 9월 1차 (기간 검색 테스트용)
('202409', 1, '2201001', 'PAY001', 5000000.00, NULL, NULL, NULL, 'system_admin'), -- 기본급
('202409', 1, '2201001', 'PAY003', 200000.00, NULL, NULL, '비과세 식대', 'system_admin'), -- 식대(비과세)
('202409', 1, '2201001', 'TAX001', -420000.00, NULL, NULL, NULL, 'system_admin'), -- 소득세
('202409', 1, '2201001', 'INS001', -225000.00, NULL, NULL, NULL, 'system_admin'), -- 국민연금

-- [추가] '2301011', '신유나' (2개 항목) - 2024년 8월 1차 (기간 검색 테스트용)
('202408', 1, '2301011', 'PAY001', 3500000.00, NULL, NULL, NULL, 'system_admin'), -- 기본급
('202408', 1, '2301011', 'TAX001', -180000.00, NULL, NULL, NULL, 'system_admin'), -- 소득세

-- [추가] '2301011', '신유나' (1개 항목) - 2024년 10월 2차 (차수 검색 테스트용)
('202410', 2, '2301011', 'PAY002', 1000000.00, NULL, NULL, '특별 상여', 'system_admin'), -- 상여금

-- [추가] '2401021', '유정민' (1개 항목) - 2024년 10월 2차 (차수 검색 테스트용)
('202410', 2, '2401021', 'PAY002', 1000000.00, NULL, NULL, '특별 상여', 'system_admin'); -- 상여금
-- 계산 규칙 관리 --
CREATE TABLE ZHR_PAY_RULE (
    RULE_ID      BIGINT         NOT NULL AUTO_INCREMENT COMMENT '규칙 고유 ID',
    ZITEM_CD     VARCHAR(20)    NOT NULL COMMENT '항목 코드 (FK)',
    ZRULE_TY     VARCHAR(10)    NOT NULL COMMENT '계산 방식 (FORMULA, FIXED, TABLE, SQL)',
    ZFORMULA     VARCHAR(2000)  NULL     COMMENT '수식 또는 SQL 쿼리',
    ZFIXED_VAL   DECIMAL(18, 2) NULL     COMMENT '고정 값',
    ZFROM_DT     DATE           NOT NULL COMMENT '유효 시작일',
    ZTO_DT       DATE           NOT NULL COMMENT '유효 종료일',
    ZUSE_YN      CHAR(1)        NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE        VARCHAR(500)   NULL     COMMENT '비고',
    CREATED_AT   DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY   VARCHAR(50)    NOT NULL COMMENT '생성자',
    UPDATED_AT   DATETIME       NULL     COMMENT '수정 일시',
    UPDATED_BY   VARCHAR(50)    NULL     COMMENT '수정자',
    PRIMARY KEY (RULE_ID),
    foreign key (ZITEM_CD) references ZHR_PAY_ITEM(ZITEM_CD),
    INDEX IX_ZHR_PAY_RULE_01 (ZITEM_CD) -- 항목 코드로 조회가 많으므로 인덱스 추가
);


INSERT INTO ZHR_PAY_RULE 
(ZITEM_CD, ZRULE_TY, ZFIXED_VAL, ZFORMULA, ZFROM_DT, ZTO_DT, ZUSE_YN, ZNOTE, CREATED_BY) 
VALUES
-- PAY (지급 항목) 규칙
('PAY002', 'FORMULA', NULL, 'BASE_PAY * 1.5', '2024-01-01', '9999-12-31', 'Y', '기본급의 150%를 정기상여금으로 지급', 'system_admin'),
('PAY003', 'FIXED', 200000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '월 20만원 비과세 식대 정액 지급', 'system_admin'),
('PAY004', 'FIXED', 350000.00, NULL, '2025-01-01', '9999-12-31', 'Y', '팀장급 직책수당 (2025년 인상분)', 'hr_manager'),
('PAY004', 'FIXED', 300000.00, NULL, '2024-01-01', '2024-12-31', 'N', '팀장급 직책수당 (구버전)', 'hr_manager'),
('PAY004', 'TABLE', NULL, 'POSITION_ALLOWANCE_TABLE', '2022-01-01', '9999-12-31', 'Y', '임원 직급 테이블 참조', 'system_admin'),
('PAY005', 'FIXED', 100000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '정보처리기사 자격수당', 'hr_manager'),
('PAY005', 'FIXED', 150000.00, NULL, '2024-01-01', '9999-12-31', 'Y', 'AWS Pro 자격수당', 'hr_manager'),
('PAY006', 'FORMULA', NULL, 'NUM_OF_DEPENDENTS * 50000', '2024-01-01', '9999-12-31', 'Y', '부양가족 1인당 5만원 지급', 'system_admin'),
('PAY007', 'FORMULA', NULL, '(ORDINARY_WAGE / 209) * 1.5 * OT_HOURS', '2024-01-01', '9999-12-31', 'Y', '통상임금 기준 시간외근로수당 계산', 'system_admin'),
('PAY008', 'FIXED', 200000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '차량유지비 정액 지원', 'hr_manager'),
('PAY009', 'FORMULA', NULL, 'BASE_PAY * PERSONAL_RATING * 0.1', '2024-01-01', '9999-12-31', 'Y', '개인 인사고과 연동 성과급', 'system_admin'),
('PAY010', 'FIXED', 500000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '연 1회 정기 휴가비', 'hr_manager'),

-- TAX (세금 항목) 규칙
('TAX001', 'SQL', NULL, 'SELECT F_GET_INCOME_TAX(EMP_ID, TAXABLE_INCOME) FROM DUAL', '2025-01-01', '2025-12-31', 'Y', '2025년 귀속 근로소득세 간이세액표 기준', 'tax_manager'),
('TAX001', 'SQL', NULL, 'SELECT F_GET_INCOME_TAX_2024(EMP_ID, TAXABLE_INCOME) FROM DUAL', '2024-01-01', '2024-12-31', 'N', '2024년 귀속 근로소득세 (구버전)', 'tax_manager'),
('TAX002', 'FORMULA', NULL, 'INCOME_TAX * 0.1', '2024-01-01', '9999-12-31', 'Y', '소득세의 10% 지방소득세', 'tax_manager'),
('TAX003', 'SQL', NULL, 'SELECT F_GET_RESIDENT_TAX(EMP_ID) FROM DUAL', '2024-01-01', '9999-12-31', 'Y', '거주지 기준 주민세 계산', 'tax_manager'),

-- INSURANCE (보험 항목) 규칙
('INS001', 'FORMULA', NULL, 'TAXABLE_INCOME * 0.045', '2024-01-01', '9999-12-31', 'Y', '국민연금 요율 9% 중 근로자 부담분 4.5%', 'system_admin'),
('INS002', 'FORMULA', NULL, 'TAXABLE_INCOME * 0.03545', '2025-01-01', '9999-12-31', 'Y', '2025년 건강보험 요율 7.09% 중 근로자 부담분', 'system_admin'),
('INS002', 'FORMULA', NULL, 'TAXABLE_INCOME * 0.035', '2024-01-01', '2024-12-31', 'N', '2024년 건강보험 요율 7.0% 중 근로자 부담분', 'system_admin'),
('INS003', 'FORMULA', NULL, 'HEALTH_INSURANCE_PREMIUM * 0.1295', '2025-01-01', '9999-12-31', 'Y', '2025년 장기요양보험 요율 (건강보험료의 12.95%)', 'system_admin'),
('INS003', 'FORMULA', NULL, 'HEALTH_INSURANCE_PREMIUM * 0.1281', '2024-01-01', '2024-12-31', 'N', '2024년 장기요양보험 요율', 'system_admin'),
('INS004', 'FORMULA', NULL, 'TAXABLE_INCOME * 0.009', '2024-01-01', '9999-12-31', 'Y', '고용보험 요율 1.8% 중 근로자 부담분 0.9%', 'system_admin'),

-- DEDUCT (공제 항목) 규칙
('DED001', 'SQL', NULL, 'SELECT F_GET_STUDENT_LOAN_PAYMENT(EMP_ID, PAY_YM) FROM DUAL', '2024-01-01', '9999-12-31', 'Y', '국세청 학자금 상환액 조회', 'hr_manager'),
('DED002', 'FIXED', 10000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '노동조합 조합비 정액 공제', 'hr_manager'),
('DED003', 'SQL', NULL, 'SELECT F_GET_COMPANY_LOAN_PAYMENT(EMP_ID, PAY_YM) FROM DUAL', '2024-01-01', '9999-12-31', 'Y', '개인별 사내대출 상환 스케줄 조회', 'hr_manager'),
('DED004', 'FIXED', 150000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '기숙사 1인실 사용료 공제', 'hr_manager'),
('DED004', 'FIXED', 80000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '기숙사 2인실 사용료 공제', 'hr_manager'),
('DED005', 'FIXED', 20000.00, NULL, '2024-01-01', '9999-12-31', 'Y', '사내 복지기금(상조회비 등) 공제', 'hr_manager'),
('DED006', 'SQL', NULL, 'SELECT F_GET_PRIVATE_PENSION_PAYMENT(EMP_ID, PAY_YM) FROM DUAL', '2024-01-01', '9999-12-31', 'Y', '개인연금 대납 공제액 조회', 'hr_manager');


-- 세율/구간 관리 --  
CREATE TABLE ZHR_TAX_TABLE (
    ZYEAR               SMALLINT            NOT NULL COMMENT '적용 연도',
    ZFAMILY_CNT         TINYINT         NOT NULL COMMENT '가족 수 (공제 대상)',
    ZINCOME_AMT  		DECIMAL(18, 0)  NOT NULL COMMENT '과세 기준 소득 (구간 시작 금액)',
    ZTAX_PC             DECIMAL(5, 2)   NULL     COMMENT '근로소득세율 (%)',
    ZLOCAL_PC           DECIMAL(5, 2)   NULL     COMMENT '지방소득세율 (%)',
    ZTOTAL_TAX          DECIMAL(18, 0)  NULL     COMMENT '총 결정세액 (고정값)',
    ZUSE_YN             CHAR(1)         NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE               VARCHAR(500)    NULL     COMMENT '비고',
    CREATED_AT          DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY          VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT          DATETIME        NULL     COMMENT '수정 일시',
    UPDATED_BY          VARCHAR(50)     NULL     COMMENT '수정자',

    PRIMARY KEY (ZYEAR, ZFAMILY_CNT, ZINCOME_AMT)
) COMMENT '연도별 간이세액표 관리 테이블';

INSERT INTO ZHR_TAX_TABLE 
(ZYEAR, ZFAMILY_CNT, ZINCOME_AMT, ZTAX_PC, ZLOCAL_PC, ZTOTAL_TAX, ZUSE_YN, CREATED_BY, ZNOTE)
VALUES
-- 2025년 귀속, 1인 가족 기준 (11건)
(2025, 1, 0, 0.00, 0.00, 0, 'Y', 'system_admin', '월 소득 106만원 미만'),
(2025, 1, 2500000, 2.13, 0.21, 53280, 'Y', 'system_admin', '월 소득 250만원 이상 ~ 260만원 미만'),
(2025, 1, 2600000, 2.33, 0.23, 60620, 'Y', 'system_admin', '월 소득 260만원 이상 ~ 280만원 미만'),
(2025, 1, 2800000, 2.71, 0.27, 75940, 'Y', 'system_admin', '월 소득 280만원 이상 ~ 300만원 미만'),
(2025, 1, 3000000, 3.11, 0.31, 93310, 'Y', 'system_admin', '월 소득 300만원 이상 ~ 350만원 미만'),
(2025, 1, 3500000, 4.41, 0.44, 154210, 'Y', 'system_admin', '월 소득 350만원 이상 ~ 400만원 미만'),
(2025, 1, 4000000, 5.67, 0.57, 226910, 'Y', 'system_admin', '월 소득 400만원 이상 ~ 450만원 미만'),
(2025, 1, 4500000, 6.86, 0.69, 308810, 'Y', 'system_admin', '월 소득 450만원 이상 ~ 500만원 미만'),
(2025, 1, 5000000, 8.03, 0.80, 401660, 'Y', 'system_admin', '월 소득 500만원 이상 ~ 600만원 미만'),
(2025, 1, 6000000, 9.97, 0.99, 598320, 'Y', 'system_admin', '월 소득 600만원 이상 ~ 700만원 미만'),
(2025, 1, 7000000, 11.69, 1.17, 818320, 'Y', 'system_admin', '월 소득 700만원 이상 ~ 800만원 미만'),

-- 2025년 귀속, 2인 가족 기준 (10건)
(2025, 2, 2500000, 1.45, 0.14, 36240, 'Y', 'system_admin', '월 소득 250만원 이상 ~ 260만원 미만'),
(2025, 2, 2600000, 1.68, 0.17, 43580, 'Y', 'system_admin', '월 소득 260만원 이상 ~ 280만원 미만'),
(2025, 2, 2800000, 2.10, 0.21, 58900, 'Y', 'system_admin', '월 소득 280만원 이상 ~ 300만원 미만'),
(2025, 2, 3000000, 2.54, 0.25, 76270, 'Y', 'system_admin', '월 소득 300만원 이상 ~ 350만원 미만'),
(2025, 2, 3500000, 3.92, 0.39, 137170, 'Y', 'system_admin', '월 소득 350만원 이상 ~ 400만원 미만'),
(2025, 2, 4000000, 5.25, 0.52, 209870, 'Y', 'system_admin', '월 소득 400만원 이상 ~ 450만원 미만'),
(2025, 2, 4500000, 6.48, 0.65, 291770, 'Y', 'system_admin', '월 소득 450만원 이상 ~ 500만원 미만'),
(2025, 2, 5000000, 7.69, 0.77, 384620, 'Y', 'system_admin', '월 소득 500만원 이상 ~ 600만원 미만'),
(2025, 2, 6000000, 9.69, 0.97, 581280, 'Y', 'system_admin', '월 소득 600만원 이상 ~ 700만원 미만'),
(2025, 2, 7000000, 11.45, 1.14, 801280, 'Y', 'system_admin', '월 소득 700만원 이상 ~ 800만원 미만'),

-- 2025년 귀속, 3인 가족 기준 (10건)
(2025, 3, 2500000, 0.94, 0.09, 23410, 'Y', 'system_admin', '월 소득 250만원 이상 ~ 260만원 미만'),
(2025, 3, 2600000, 1.18, 0.12, 30750, 'Y', 'system_admin', '월 소득 260만원 이상 ~ 280만원 미만'),
(2025, 3, 2800000, 1.65, 0.16, 46070, 'Y', 'system_admin', '월 소득 280만원 이상 ~ 300만원 미만'),
(2025, 3, 3000000, 2.11, 0.21, 63440, 'Y', 'system_admin', '월 소득 300만원 이상 ~ 350만원 미만'),
(2025, 3, 3500000, 3.55, 0.36, 124340, 'Y', 'system_admin', '월 소득 350만원 이상 ~ 400만원 미만'),
(2025, 3, 4000000, 4.93, 0.49, 197040, 'Y', 'system_admin', '월 소득 400만원 이상 ~ 450만원 미만'),
(2025, 3, 4500000, 6.20, 0.62, 278940, 'Y', 'system_admin', '월 소득 450만원 이상 ~ 500만원 미만'),
(2025, 3, 5000000, 7.44, 0.74, 371790, 'Y', 'system_admin', '월 소득 500만원 이상 ~ 600만원 미만'),
(2025, 3, 6000000, 9.47, 0.95, 568450, 'Y', 'system_admin', '월 소득 600만원 이상 ~ 700만원 미만'),
(2025, 3, 7000000, 11.26, 1.13, 788450, 'Y', 'system_admin', '월 소득 700만원 이상 ~ 800만원 미만'),

-- 2024년 귀속 (과거 데이터 예시)
(2024, 1, 3000000, 3.00, 0.30, 90110, 'N', 'system_admin', '2024년 귀속분 (현재 미사용)');

-- 소급 규칙 관리 --
CREATE TABLE ZHR_BACKPAY_RULE (
    RULE_ID       BIGINT         NOT NULL AUTO_INCREMENT COMMENT '규칙 고유 ID (기본 키)',
    ZITEM_CD      VARCHAR(20)    NOT NULL COMMENT '적용 항목 코드 (소급될 항목, FK)',
    ZBASE_ITEM    VARCHAR(20)    NOT NULL COMMENT '기준 항목 코드 (소급 계산의 기준이 되는 항목, FK)',
    ZRULE_TY      VARCHAR(10)    NOT NULL COMMENT '소급 방식 (FIXED: 고정비율, DIFF: 차액계산)',
    ZBACK_PC      DECIMAL(5, 2)  NULL     COMMENT '소급 비율 (FIXED 방식일 때 사용, 예: 999.99)',
    ZUSE_YN       CHAR(1)        NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE         VARCHAR(500)   NULL     COMMENT '비고',
    CREATED_AT    DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY    VARCHAR(50)    NOT NULL COMMENT '생성자',
    UPDATED_AT    DATETIME       NULL     COMMENT '수정 일시',
    UPDATED_BY    VARCHAR(50)    NULL     COMMENT '수정자',

    PRIMARY KEY (RULE_ID),
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),
    FOREIGN KEY (ZBASE_ITEM) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),
    
    -- === 제약 조건 (데이터 무결성 보장) ===
    CONSTRAINT CHK_ZRULE_TY CHECK (ZRULE_TY IN ('FIXED', 'DIFF')),
    CONSTRAINT CHK_ZUSE_YN_BACKPAY CHECK (ZUSE_YN IN ('Y', 'N')),
    
    -- === 인덱스 (조회 성능 향상) ===
    INDEX IX_ZHR_BACKPAY_RULE_01 (ZITEM_CD),
    INDEX IX_ZHR_BACKPAY_RULE_02 (ZBASE_ITEM)
) COMMENT '과거 지급 내역에 대한 소급 적용 규칙 정의 테이블';

-- backpay_rule 더미 데이터 --

INSERT INTO ZHR_BACKPAY_RULE 
(ZITEM_CD, ZBASE_ITEM, ZRULE_TY, ZBACK_PC, ZUSE_YN, ZNOTE, CREATED_BY) 
VALUES
-- === 시나리오 1: 기본급(PAY001) 인상 시 연동되는 소급 규칙 ===
('PAY001', 'PAY001', 'DIFF', NULL, 'Y', '기본급 인상 시, 기본급 자체에 대한 차액 소급', 'system_admin'),
('PAY002', 'PAY001', 'FIXED', 150.00, 'Y', '기본급 인상 시, 기본급의 150%로 계산되는 상여금 소급', 'system_admin'),
('PAY007', 'PAY001', 'DIFF', NULL, 'Y', '기본급(통상임금) 인상에 따른 연장근로수당 재계산 소급', 'system_admin'),
('PAY009', 'PAY001', 'DIFF', NULL, 'Y', '기본급 인상에 따른 성과급 재계산 소급', 'system_admin'),
('TAX001', 'PAY001', 'DIFF', NULL, 'Y', '기본급 인상으로 과세표준 변경 시 소득세 재정산 소급', 'tax_manager'),
('TAX002', 'PAY001', 'DIFF', NULL, 'Y', '기본급 인상에 따른 지방소득세 재정산 소급', 'tax_manager'),
('INS001', 'PAY001', 'FIXED', 4.50, 'Y', '기본급 인상에 따른 국민연금 소급 (과세소득의 4.5%)', 'system_admin'),
('INS002', 'PAY001', 'FIXED', 3.55, 'Y', '기본급 인상에 따른 건강보험 소급 (과세소득의 3.545%)', 'system_admin'),
('INS003', 'PAY001', 'DIFF', NULL, 'Y', '기본급 인상에 따른 장기요양보험(건강보험 연동) 소급', 'system_admin'),
('INS004', 'PAY001', 'FIXED', 0.90, 'Y', '기본급 인상에 따른 고용보험 소급 (과세소득의 0.9%)', 'system_admin'),

-- === 시나리오 2: 특정 수당이 자체적으로 변경/신설될 경우 ===
('PAY004', 'PAY004', 'DIFF', NULL, 'Y', '직책수당 자체 인상/변경 시 차액 소급', 'hr_manager'),
('PAY005', 'PAY005', 'DIFF', NULL, 'Y', '자격수당 자체 인상/변경 시 차액 소급', 'hr_manager'),
('PAY006', 'PAY006', 'DIFF', NULL, 'Y', '가족수당 자체 인상/변경 시 차액 소급', 'hr_manager'),

-- === 시나리오 3: 과세/보험료율 변경에 따른 재정산 ===
('TAX001', 'TAX001', 'DIFF', NULL, 'Y', '연말정산 등으로 소득세 결정세액 변동 시 소급 적용', 'tax_manager'),
('TAX002', 'TAX001', 'FIXED', 10.00, 'Y', '소득세 변동 시 지방소득세(소득세의 10%) 연동 소급', 'tax_manager'),
('INS002', 'INS002', 'DIFF', NULL, 'Y', '건강보험료 정산으로 인한 차액 발생 시 소급 적용', 'system_admin'),
('INS003', 'INS002', 'DIFF', NULL, 'Y', '건강보험료 정산 시 장기요양보험료 연동 소급', 'system_admin'),

-- === 시나리오 4: 비활성화된 규칙 (과거 규칙) ===
('PAY002', 'PAY001', 'FIXED', 120.00, 'N', '과거 상여금 소급 규칙 (기본급의 120%)', 'system_admin'),
('INS002', 'PAY001', 'FIXED', 3.50, 'N', '2024년 건강보험 요율 기준 소급 규칙', 'system_admin'),

-- === 시나리오 5: 다양한 기준 항목에 따른 규칙들 ===
('TAX001', 'PAY002', 'DIFF', NULL, 'Y', '상여금 지급으로 과세표준 변경 시 소득세 재정산', 'tax_manager'),
('TAX001', 'PAY009', 'DIFF', NULL, 'Y', '성과급 지급으로 과세표준 변경 시 소득세 재정산', 'tax_manager'),
('INS001', 'PAY002', 'DIFF', NULL, 'Y', '상여금 지급에 따른 국민연금 재정산', 'system_admin'),
('INS002', 'PAY009', 'DIFF', NULL, 'Y', '성과급 지급에 따른 건강보험 재정산', 'system_admin'),

-- === 시나리오 6: 추가적인 연동 규칙들 ===
('PAY007', 'PAY004', 'DIFF', NULL, 'Y', '직책수당이 통상임금에 포함될 경우, 연장근로수당 재계산 소급', 'hr_manager'),
('PAY007', 'PAY005', 'DIFF', NULL, 'Y', '자격수당이 통상임금에 포함될 경우, 연장근로수당 재계산 소급', 'hr_manager'),
('TAX001', 'PAY007', 'DIFF', NULL, 'Y', '연장근로수당 지급으로 인한 소득세 변동분 소급', 'tax_manager'),
('INS004', 'PAY007', 'DIFF', NULL, 'Y', '연장근로수당 지급으로 인한 고용보험 변동분 소급', 'system_admin'),

-- === 시나리오 7: 복잡한 연동 관계 ===
('TAX002', 'TAX001', 'FIXED', 10.00, 'Y', '소득세 변동에 따른 지방소득세 소급 (중복처럼 보이지만 명시적 규칙)', 'tax_manager'),
('INS003', 'INS002', 'FIXED', 12.95, 'Y', '건강보험료 변동 시 장기요양보험료(건보료의 12.95%) 소급', 'system_admin'),
('PAY001', 'PAY004', 'DIFF', NULL, 'N', '직책수당이 기본급에 영향을 주는 가상 시나리오 (미사용)', 'hr_manager'),
('PAY002', 'PAY009', 'FIXED', 10.00, 'N', '성과급의 10%를 특별 상여로 소급하는 가상 시나리오 (미사용)', 'hr_manager'),
('TAX001', 'PAY004', 'DIFF', NULL, 'Y', '직책수당 지급으로 인한 소득세 변동분 소급', 'tax_manager');


-- 지급 주기 관리 테이블 --
CREATE TABLE ZHR_PAY_CYCLE (
    ZJOB_GRP   VARCHAR(20)  NOT NULL COMMENT '직군 코드 (PK)',
    ZSTART_DAY TINYINT      NOT NULL COMMENT '급여 기준 시작일 (1~31)',
    ZEND_DAY   TINYINT      NOT NULL COMMENT '급여 기준 종료일 (1~31), 시작일보다 작으면 익월 마감',
    ZPAY_DAY   TINYINT      NOT NULL COMMENT '실제 급여 지급일 (1~31)',
    ZUSE_YN    CHAR(1)      NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE      VARCHAR(500) NULL COMMENT '비고 및 설명',
    CREATED_AT DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT DATETIME     NULL COMMENT '수정 일시',
    UPDATED_BY VARCHAR(50)  NULL COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (ZJOB_GRP),

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZSTART_DAY CHECK (ZSTART_DAY BETWEEN 1 AND 31),
    CONSTRAINT CHK_ZEND_DAY CHECK (ZEND_DAY BETWEEN 1 AND 31),
    CONSTRAINT CHK_ZPAY_DAY CHECK (ZPAY_DAY BETWEEN 1 AND 31),
    CONSTRAINT CHK_ZUSE_YN_PAY_CYCLE CHECK (ZUSE_YN IN ('Y', 'N'))
) COMMENT '직군별 급여 기준일 및 지급일 관리 테이블';
	
    
-- 더미데이터 --
INSERT INTO ZHR_PAY_CYCLE
(ZJOB_GRP, ZSTART_DAY, ZEND_DAY, ZPAY_DAY, ZUSE_YN, ZNOTE, CREATED_BY)
VALUES
-- === 일반적인 당월 정산 (1일 ~ 말일 기준) ===
('HR_PAYROLL', 1, 31, 25, 'Y', '인사팀 급여담당: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('FIN_ACCOUNTING', 1, 31, 25, 'Y', '재무팀 회계담당: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('IT_DEV_SENIOR', 1, 31, 25, 'Y', 'IT개발팀 선임급: 당월 1일~말일 기준, 당월 25일 지급', 'system_manager'),
('IT_INFRA', 1, 31, 25, 'Y', 'IT인프라팀: 당월 1일~말일 기준, 당월 25일 지급', 'system_manager'),
('EXEC_BOARD', 1, 31, 20, 'Y', '임원진: 당월 1일~말일 기준, 당월 20일 지급', 'hr_admin'),
('MKT_BRAND', 1, 31, 25, 'Y', '마케팅 브랜드팀: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('RND_RESEARCHER', 1, 31, 25, 'Y', '연구소 연구원: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('LEGAL_TEAM', 1, 31, 25, 'Y', '법무팀: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('SUPPORT_ADMIN', 1, 31, 25, 'Y', '경영지원팀: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('DESIGN_UXUI', 1, 31, 25, 'Y', '디자인팀 UX/UI: 당월 1일~말일 기준, 당월 25일 지급', 'system_manager'),
('PLANNING_BIZ', 1, 31, 25, 'Y', '기획팀 사업기획: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('QA_TEAM', 1, 31, 25, 'Y', '품질보증(QA)팀: 당월 1일~말일 기준, 당월 25일 지급', 'payroll_specialist'),
('SERVICE_OPS', 1, 31, 25, 'Y', '서비스운영팀: 당월 1일~말일 기준, 당월 25일 지급', 'hr_admin'),
('FIN_AUDIT', 1, 31, 20, 'Y', '재무팀 내부감사: 당월 1일~말일 기준, 당월 20일 지급', 'hr_admin'),

-- === 익월 마감 (전월 21일 ~ 당월 20일 등) ===
('PROD_LINE_A', 21, 20, 28, 'Y', '생산1라인: 전월 21일~당월 20일 기준, 당월 28일 지급', 'payroll_specialist'),
('PROD_LINE_B', 21, 20, 28, 'Y', '생산2라인: 전월 21일~당월 20일 기준, 당월 28일 지급', 'payroll_specialist'),
('PROD_QC', 21, 20, 28, 'Y', '생산 품질관리(QC): 전월 21일~당월 20일 기준, 당월 28일 지급', 'payroll_specialist'),
('LOGISTICS_SEOUL', 26, 25, 5, 'Y', '물류팀 서울센터: 전월 26일~당월 25일 기준, 익월 5일 지급', 'system_manager'),
('LOGISTICS_BUSAN', 26, 25, 5, 'Y', '물류팀 부산센터: 전월 26일~당월 25일 기준, 익월 5일 지급', 'system_manager'),
('SALES_DOMESTIC', 21, 20, 31, 'Y', '국내영업팀: 전월 21일~당월 20일 기준, 당월 말일 지급', 'hr_admin'),
('SALES_OVERSEAS', 21, 20, 31, 'Y', '해외영업팀: 전월 21일~당월 20일 기준, 당월 말일 지급', 'hr_admin'),
('SALES_B2B', 21, 20, 10, 'Y', 'B2B영업팀: 전월 21일~당월 20일 기준, 익월 10일 지급(실적합산)', 'hr_admin'),
('FIELD_SVC_ENG', 26, 25, 10, 'Y', '필드서비스 엔지니어: 전월 26일~당월 25일 기준, 익월 10일 지급', 'system_manager'),
('PROD_MAINTENANCE', 21, 20, 28, 'Y', '생산 설비보전팀: 전월 21일~당월 20일 기준, 당월 28일 지급', 'payroll_specialist'),
('LOGISTICS_INTL', 26, 25, 5, 'Y', '국제물류팀: 전월 26일~당월 25일 기준, 익월 5일 지급', 'system_manager'),
('CUSTOMER_SUPPORT', 16, 15, 25, 'Y', '고객지원팀(교대): 당월 16일~익월 15일 기준, 익월 25일 지급', 'hr_admin'),

-- === 다양한 계약 형태 (파트타임, 인턴, 프리랜서 등) ===
('PARTTIME_STORE', 16, 15, 20, 'Y', '매장 아르바이트: 당월 16일~익월 15일 기준, 익월 20일 지급', 'payroll_specialist'),
('INTERN_2025_SM', 1, 31, 10, 'Y', '2025년 하계인턴: 당월 1일~말일 기준, 익월 10일 지급', 'hr_admin'),
('INTERN_2025_WN', 1, 31, 10, 'Y', '2025년 동계인턴: 당월 1일~말일 기준, 익월 10일 지급', 'hr_admin'),
('FREELANCER_DEV', 1, 31, 15, 'Y', '개발 프리랜서: 당월 1일~말일 기준, 익월 15일 정산', 'system_manager'),
('FREELANCER_DESIGN', 1, 31, 15, 'Y', '디자인 프리랜서: 당월 1일~말일 기준, 익월 15일 정산', 'system_manager'),
('CONTRACTOR_CS', 1, 31, 25, 'Y', '고객센터 계약직: 당월 1일~말일 기준, 당월 25일 지급', 'payroll_specialist'),
('DISPATCH_TECH', 21, 20, 7, 'Y', '기술지원 파견직: 전월 21일~당월 20일 기준, 익월 7일 지급', 'hr_admin'),
('PARTTIME_OFFICE', 1, 15, 20, 'Y', '사무보조 아르바이트: 당월 1일~15일(상반기) 기준, 당월 20일 지급', 'payroll_specialist'),
('PARTTIME_OFFICE_B', 16, 31, 5, 'Y', '사무보조 아르바이트: 당월 16일~말일(하반기) 기준, 익월 5일 지급', 'payroll_specialist'),
('CONTRACTOR_PMO', 1, 31, 10, 'Y', 'PMO 계약직: 당월 1일~말일 기준, 익월 10일 지급', 'system_manager'),
('INTERN_RND_2026', 1, 31, 10, 'Y', '2026년 연구소 인턴: 당월 1일~말일 기준, 익월 10일 지급', 'hr_admin'),
('FREELANCER_WRITER', 1, 31, 20, 'Y', '프리랜서 작가: 당월 1일~말일 기준, 익월 20일 정산', 'system_manager'),
('DISPATCH_ACCOUNT', 1, 31, 10, 'Y', '회계 파견직: 당월 1일~말일 기준, 익월 10일 지급', 'hr_admin'),
('COLLEGE_TRAINEE', 1, 31, 10, 'Y', '산학협력 연수생: 당월 1일~말일 기준, 익월 10일 지급', 'hr_admin');

-- 사원별 정기 수당 설정 --
CREATE TABLE ZHR_EMP_ALLOW (
    -- === 기본 키 컬럼 (PK) ===
    ALLOW_ID  BIGINT      NOT NULL AUTO_INCREMENT COMMENT '정기수당 ID (PK)',

    -- === 비즈니스 키 및 데이터 컬럼 ===
    ZEMP_NO   VARCHAR(10) NOT NULL COMMENT '사번 (FK: ZHR_EMP_MASTER.PERNR)',
    ZITEM_CD  VARCHAR(20) NOT NULL COMMENT '항목 코드 (FK: ZHR_PAY_ITEM.ZITEM_CD)',
    ZFROM_DT  DATE        NOT NULL COMMENT '적용 시작일',

    -- === 데이터 컬럼 ===
    ZTO_DT      DATE        NOT NULL COMMENT '적용 종료일',
    ZALLOW_AMT  BIGINT      NOT NULL DEFAULT 0 COMMENT '정기 수당 금액',
    ZUSE_YN     CHAR(1)     NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE       VARCHAR(500) NULL COMMENT '비고 또는 주석',

    -- === 동시성 제어 (낙관적 락) ===
    VERSION     INT         NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락용)',

    -- === 감사(Audit) 필드 ===
    CREATED_AT  DATETIME    NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY  VARCHAR(50) NOT NULL COMMENT '생성자',
    UPDATED_AT  DATETIME    NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY  VARCHAR(50) NULL COMMENT '수정자',

    -- === 제약 조건 ===
    PRIMARY KEY (ALLOW_ID),

    -- 고유 키(Unique Key) 설정 (비즈니스 룰)
    CONSTRAINT UK_EMP_ITEM_FROM UNIQUE (ZEMP_NO, ZITEM_CD, ZFROM_DT),

    -- 외래 키 (FK) 설정
    CONSTRAINT FK_ALLOW_TO_EMP    FOREIGN KEY (ZEMP_NO)  REFERENCES ZHR_EMP_MASTER (PERNR),
    CONSTRAINT FK_ALLOW_TO_ITEM   FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM (ZITEM_CD),

    -- CHECK 제약 조건
    CONSTRAINT CHK_ALLOW_AMT_POSITIVE CHECK (ZALLOW_AMT >= 0),
    CONSTRAINT CHK_ALLOW_USE_YN     CHECK (ZUSE_YN IN ('Y', 'N')),
    CONSTRAINT CHK_ALLOW_DATES      CHECK (ZTO_DT >= ZFROM_DT)
    
) COMMENT '사원별 정기 수당 이력';

-- ZHR_EMP_ALLOW 테이블 더미 데이터 (37건)
INSERT INTO ZHR_EMP_ALLOW 
(ZEMP_NO, ZITEM_CD, ZFROM_DT, ZTO_DT, ZALLOW_AMT, ZUSE_YN, ZNOTE, CREATED_BY)
VALUES
-- '2201001', '김철수' (이력 발생: 기본급 인상, 직책수당)
('2201001', 'PAY001', '2022-01-01', '2023-12-31', 3000000, 'Y', '2022-2023년 기본급', 'system_admin'),
('2201001', 'PAY001', '2024-01-01', '9999-12-31', 3200000, 'Y', '2024년 연봉인상 반영', 'system_admin'),
('2201001', 'PAY003', '2022-01-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2201001', 'PAY004', '2023-01-01', '9999-12-31', 500000, 'Y', '팀장 직책수당', 'system_admin'),

-- '2201002', '이영희' (자격수당)
('2201002', 'PAY001', '2022-01-01', '9999-12-31', 2900000, 'Y', '기본급', 'system_admin'),
('2201002', 'PAY003', '2022-01-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2201002', 'PAY005', '2022-06-01', '9999-12-31', 150000, 'Y', '정보처리기사 자격수당', 'system_admin'),

-- '2203003', '박민준' (사용 중지 이력)
('2203003', 'PAY001', '2022-03-01', '9999-12-31', 3100000, 'Y', '기본급', 'system_admin'),
('2203003', 'PAY003', '2022-03-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2203003', 'PAY008', '2022-03-01', '2023-12-31', 200000, 'N', '영업직 차량유지비(종료)', 'system_admin'),

-- '2203004', '최서연' (기본)
('2203004', 'PAY001', '2022-03-01', '9999-12-31', 3000000, 'Y', '기본급', 'system_admin'),
('2203004', 'PAY003', '2022-03-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2207005', '정지훈' (복수 수당)
('2207005', 'PAY001', '2022-07-01', '9999-12-31', 3500000, 'Y', '기본급', 'system_admin'),
('2207005', 'PAY003', '2022-07-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2207005', 'PAY004', '2024-01-01', '9999-12-31', 500000, 'Y', '파트장 직책수당', 'system_admin'),
('2207005', 'PAY008', '2022-07-01', '9999-12-31', 200000, 'Y', '법인차량 지원', 'system_admin'),

-- '2207006', '윤서아' (기본)
('2207006', 'PAY001', '2022-07-01', '9999-12-31', 2800000, 'Y', '기본급', 'system_admin'),
('2207006', 'PAY003', '2022-07-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2209007', '강도윤' (기본)
('2209007', 'PAY001', '2022-09-01', '9999-12-31', 2850000, 'Y', '기본급', 'system_admin'),
('2209007', 'PAY003', '2022-09-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2210008', '임하윤' (자격수당)
('2210008', 'PAY001', '2022-10-01', '9999-12-31', 2950000, 'Y', '기본급', 'system_admin'),
('2210008', 'PAY003', '2022-10-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2210008', 'PAY005', '2023-01-01', '9999-12-31', 100000, 'Y', 'AWS 자격수당', 'system_admin'),

-- '2301011', '신유나' (23년 입사자)
('2301011', 'PAY001', '2023-01-01', '9999-12-31', 2700000, 'Y', '기본급', 'system_admin'),
('2301011', 'PAY003', '2023-01-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2301012', '장은우' (23년 입사자)
('2301012', 'PAY001', '2023-01-01', '9999-12-31', 2700000, 'Y', '기본급', 'system_admin'),
('2301012', 'PAY003', '2023-01-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2302013', '송지아' (23년 입사자, 자격수당)
('2302013', 'PAY001', '2023-02-01', '9999-12-31', 2600000, 'Y', '기본급', 'system_admin'),
('2302013', 'PAY003', '2023-02-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2302013', 'PAY005', '2023-02-01', '9999-12-31', 100000, 'Y', 'SQLD 자격수당', 'system_admin'),

-- '2401021', '유정민' (24년 입사자)
('2401021', 'PAY001', '2024-01-01', '9999-12-31', 2500000, 'Y', '기본급', 'system_admin'),
('2401021', 'PAY003', '2024-01-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2401022', '홍예준' (24년 입사자)
('2401022', 'PAY001', '2024-01-01', '9999-12-31', 2500000, 'Y', '기본급', 'system_admin'),
('2401022', 'PAY003', '2024-01-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),

-- '2403025', '노하린' (24년 입사자, 차량유지비)
('2403025', 'PAY001', '2024-03-01', '9999-12-31', 2550000, 'Y', '기본급', 'system_admin'),
('2403025', 'PAY003', '2024-03-01', '9999-12-31', 200000, 'Y', '비과세 식대', 'system_admin'),
('2403025', 'PAY008', '2024-03-01', '9999-12-31', 200000, 'Y', '외근직 차량유지비', 'system_admin');

-- 기준급여 마스터 테이블 (숫자 ID를 기본 키로 사용) --
CREATE TABLE ZHR_BASE_PAY (
    PAY_ID BIGINT NOT NULL AUTO_INCREMENT COMMENT '급여이력 ID (PK)',
    ZEMP_NO VARCHAR(10) NOT NULL COMMENT '사원번호 (FK -> ZHR_EMP_MASTER.PERNR)',
    ZFROM_DT DATE NOT NULL COMMENT '적용 시작일',
    ZTO_DT DATE NOT NULL COMMENT '적용 종료일',
    ZBASE_PAY DECIMAL(18, 2) NOT NULL COMMENT '기준급여',
    ZBASE_UNIT VARCHAR(10) NOT NULL COMMENT '급여 단위 (YEARLY, MONTHLY, DAILY, HOURLY)',
    ZSTD_HOURS SMALLINT NOT NULL COMMENT '월 소정 근로시간',
    ZNOTE VARCHAR(500) NULL COMMENT '비고',
    CREATED_AT DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY VARCHAR(50) NOT NULL COMMENT '생성자',
    UPDATED_AT DATETIME NULL COMMENT '수정 일시',
    UPDATED_BY VARCHAR(50) NULL COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (PAY_ID),

    -- 비즈니스 규칙을 위한 UNIQUE KEY 설정 (사번 + 시작일 중복 방지)
    UNIQUE KEY UK_ZHR_BASE_PAY (ZEMP_NO, ZFROM_DT),

    -- [추가] 사원 마스터(PERNR)를 참조하는 외래 키 설정
    CONSTRAINT FK_ZHR_BASE_PAY_ZEMP_NO
      FOREIGN KEY (ZEMP_NO)
      REFERENCES ZHR_EMP_MASTER(PERNR)
      ON DELETE RESTRICT
      ON UPDATE CASCADE,

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZBASE_PAY CHECK (ZBASE_PAY >= 0),
    CONSTRAINT CHK_ZBASE_UNIT CHECK (ZBASE_UNIT IN ('YEARLY', 'MONTHLY', 'DAILY', 'HOURLY')),
    CONSTRAINT CHK_ZSTD_HOURS CHECK (ZSTD_HOURS > 0)
) COMMENT '사원별 기준급여 및 이력 관리 테이블 (ID 기준)';

-- 더미 데이터 --
INSERT INTO ZHR_BASE_PAY
(ZEMP_NO, ZFROM_DT, ZTO_DT, ZBASE_PAY, ZBASE_UNIT, ZSTD_HOURS, ZNOTE, CREATED_BY)
VALUES
-- 2022년 입사자 (10명) - 각 2건 (과거 1 + 현재 1) = 20건
('2201001', '2022-01-01', '2023-12-31', 50000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2201001', '2024-01-01', '9999-12-31', 55000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2201002', '2022-01-01', '2023-12-31', 52000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2201002', '2024-01-01', '9999-12-31', 57000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2203003', '2022-03-01', '2023-12-31', 48000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2203003', '2024-01-01', '9999-12-31', 52000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2203004', '2022-03-01', '2023-12-31', 49000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2203004', '2024-01-01', '9999-12-31', 53000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2207005', '2022-07-01', '2023-12-31', 51000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2207005', '2024-01-01', '9999-12-31', 55000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2207006', '2022-07-01', '2023-12-31', 53000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2207006', '2024-01-01', '9999-12-31', 57000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2209007', '2022-09-01', '2023-12-31', 50000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2209007', '2024-01-01', '9999-12-31', 54000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2210008', '2022-10-01', '2023-12-31', 47000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2210008', '2024-01-01', '9999-12-31', 51000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2210009', '2022-10-01', '2023-12-31', 48000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2210009', '2024-01-01', '9999-12-31', 52000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2211010', '2022-11-01', '2023-12-31', 46000000.00, 'YEARLY', 209, '2022년 신규 입사', 'system_admin'),
('2211010', '2024-01-01', '9999-12-31', 50000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),

-- 2023년 입사자 (10명) - 1명 2건, 9명 1건 = 11건
('2301011', '2023-01-01', '2023-12-31', 45000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2301011', '2024-01-01', '9999-12-31', 48000000.00, 'YEARLY', 209, '2024년 정기 급여조정', 'system_admin'),
('2301012', '2023-01-01', '9999-12-31', 47000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2302013', '2023-02-01', '9999-12-31', 46000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2304014', '2023-04-01', '9999-12-31', 48000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2305015', '2023-05-01', '9999-12-31', 50000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2305016', '2023-05-01', '9999-12-31', 4000000.00, 'MONTHLY', 209, '2023년 신규 입사 (월급)', 'system_admin'),
('2308017', '2023-08-01', '9999-12-31', 49000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2309018', '2023-09-01', '9999-12-31', 47000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2310019', '2023-10-01', '9999-12-31', 48000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),
('2312020', '2023-12-01', '9999-12-31', 46000000.00, 'YEARLY', 209, '2023년 신규 입사', 'system_admin'),

-- 2024년 입사자 (10명) - 각 1건 (현재) = 10건
('2401021', '2024-01-01', '9999-12-31', 45000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2401022', '2024-01-01', '9999-12-31', 46000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2402023', '2024-02-01', '9999-12-31', 47000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2402024', '2024-02-01', '9999-12-31', 48000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2403025', '2024-03-01', '9999-12-31', 45000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2404026', '2024-04-01', '9999-12-31', 46000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2404027', '2024-04-01', '9999-12-31', 47000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2405028', '2024-05-01', '9999-12-31', 48000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2405029', '2024-05-01', '9999-12-31', 49000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin'),
('2406030', '2024-06-01', '9999-12-31', 50000000.00, 'YEARLY', 209, '2024년 신규 입사', 'system_admin');

-- 월별/직군별 소정 근로시간 관리 테이블 --
CREATE TABLE ZHR_STD_HOURS (
    STD_HOURS_ID    BIGINT          NOT NULL AUTO_INCREMENT COMMENT '소정근로시간 ID (PK)',
    ZCAL_YM         VARCHAR(6)      NOT NULL COMMENT '기준연월 (YYYYMM)',
    ZJOB_GRP        VARCHAR(10)     NULL     COMMENT '직군코드',
    ZSTD_HOURS      SMALLINT        NOT NULL COMMENT '월 소정 근로시간',
    ZNOTE           VARCHAR(500)    NULL     COMMENT '설명 (시간 편차 등 메모)',
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NULL     COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (STD_HOURS_ID),

    -- 비즈니스 규칙을 위한 UNIQUE KEY 설정 (기준연월 + 직군코드 중복 방지)
    UNIQUE KEY UK_ZHR_STD_HOURS (ZCAL_YM, ZJOB_GRP),

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZSTD_HOURS_POSITIVE CHECK (ZSTD_HOURS >= 0)
) COMMENT '월별/직군별 소정 근로시간 관리 테이블';


-- 더미 데이터 --
INSERT INTO ZHR_STD_HOURS
(ZCAL_YM, ZJOB_GRP, ZSTD_HOURS, ZNOTE, CREATED_BY)
VALUES
-- 2024년 데이터 (직군 공통)
('202401', NULL, 209, '1월 공휴일(신정) 반영', 'HR_Admin'),
('202402', NULL, 191, '2월 공휴일(설날) 반영, 윤년', 'HR_Admin'),
('202403', NULL, 209, '3월 공휴일(삼일절) 반영', 'HR_Admin'),
('202404', NULL, 201, '4월 공휴일(총선) 반영', 'HR_Admin'),
('202405', NULL, 200, '5월 공휴일(어린이날, 부처님오신날) 반영', 'HR_Admin'),
('202406', NULL, 200, '6월 공휴일(현충일) 반영', 'HR_Admin'),
('202407', NULL, 217, '공휴일 없음', 'HR_Admin'),
('202408', NULL, 209, '8월 공휴일(광복절) 반영', 'HR_Admin'),
('202409', NULL, 184, '9월 공휴일(추석) 반영', 'HR_Admin'),
('202410', NULL, 200, '10월 공휴일(개천절, 한글날) 반영', 'HR_Admin'),
('202411', NULL, 209, '공휴일 없음', 'HR_Admin'),
('202412', NULL, 209, '12월 공휴일(성탄절) 반영', 'HR_Admin'),

-- 2025년 데이터 (직군 공통)
('202501', NULL, 209, '1월 공휴일(신정, 설날) 반영', 'HR_Admin'),
('202502', NULL, 200, '공휴일 없음', 'HR_Admin'),
('202503', NULL, 209, '3월 공휴일(삼일절) 반영', 'HR_Admin'),
('202504', NULL, 209, '공휴일 없음', 'HR_Admin'),
('202505', NULL, 200, '5월 공휴일(어린이날, 부처님오신날) 반영', 'HR_Admin'),
('202506', NULL, 208, '6월 공휴일(현충일) 반영', 'HR_Admin'),
('202507', NULL, 217, '공휴일 없음', 'HR_Admin'),
('202508', NULL, 209, '8월 공휴일(광복절) 반영', 'HR_Admin'),
('202509', NULL, 209, '공휴일 없음', 'HR_Admin'),
('202510', NULL, 192, '10월 공휴일(개천절, 한글날, 추석) 반영', 'HR_Admin'),
('202511', NULL, 200, '공휴일 없음', 'HR_Admin'),
('202512', NULL, 209, '12월 공휴일(성탄절) 반영', 'HR_Admin'),

-- 특정 직군 예외 데이터
('202501', 'PROD', 220, '1월 생산직 특별 근무 편성', 'system_manager'),
('202502', 'PROD', 210, '2월 생산직 특별 근무 편성', 'system_manager'),
('202507', 'SALES', 225, '7월 영업팀 성수기 특별 근무', 'payroll_specialist'),
('202508', 'SALES', 225, '8월 영업팀 성수기 특별 근무', 'payroll_specialist'),
('202512', 'DEV', 192, '12월 개발팀 연말 프로젝트 집중 기간 단축 근무', 'HR_Admin'),
('202512', 'CS', 168, '고객지원팀 교대근무 B조 기준', 'HR_Admin');

-- 사원별 소정 근로시간 예외 관리 테이블 --
CREATE TABLE ZHR_STD_HOURS_EMP (
    STD_HOURS_EMP_ID BIGINT       NOT NULL AUTO_INCREMENT COMMENT '소정근로시간 예외 ID (PK)',
    ZCAL_YM          VARCHAR(6)   NOT NULL COMMENT '기준연월 (YYYYMM)',
    ZEMP_NO          VARCHAR(10)  NOT NULL COMMENT '사번 (FK from ZHR_EMP_MASTER.PERNR)',
    ZSTD_HOURS       SMALLINT     NOT NULL COMMENT '월 소정 근로시간',
    ZREASON_CD       VARCHAR(20)  NULL     COMMENT '예외 사유코드',
    ZNOTE            VARCHAR(500) NULL     COMMENT '비고 (예외 원인 주석)',
    
    -- 감사(Audit) 및 버전(Version) 필드
    CREATED_AT       DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY       VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT       DATETIME     NULL     COMMENT '수정 일시',
    UPDATED_BY       VARCHAR(50)  NULL     COMMENT '수정자',
    VERSION          BIGINT       NOT NULL DEFAULT 0 COMMENT '버전 (낙관적 락)',

    -- 기본 키 설정
    PRIMARY KEY (STD_HOURS_EMP_ID),

    -- 비즈니스 규칙을 위한 UNIQUE KEY 설정 (사번 + 기준연월 중복 방지)
    UNIQUE KEY UK_ZHR_STD_HOURS_EMP (ZEMP_NO, ZCAL_YM),

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZSTD_HOURS_EMP_POSITIVE CHECK (ZSTD_HOURS >= 0),
    
    -- 외래 키(FK) 제약 조건 추가
    CONSTRAINT FK_ZHR_STD_HOURS_EMP_ZEMP_NO 
        FOREIGN KEY (ZEMP_NO) 
        REFERENCES ZHR_EMP_MASTER (PERNR)
        
) COMMENT '사원별 소정 근로시간 예외 관리';


-- 사원별 소정 근로시간 예외 관리 테이블 더미 데이터 --
INSERT INTO ZHR_STD_HOURS_EMP
(ZCAL_YM, ZEMP_NO, ZSTD_HOURS, ZREASON_CD, ZNOTE, CREATED_BY)
VALUES
-- 시나리오 1: '김철수' (2201001), 3개월간 육아기 단축 (160시간)
('202401', '2201001', 160, 'REDUCE_CHILD', '육아기 근로시간 단축 (주 32시간)', 'system_loader'),
('202402', '2201001', 160, 'REDUCE_CHILD', '육아기 근로시간 단축 (주 32시간)', 'system_loader'),
('202403', '2201001', 160, 'REDUCE_CHILD', '육아기 근로시간 단축 (주 32시간)', 'system_loader'),

-- 시나리오 2: '이영희' (2201002), 2024년 1월부터 파트타임 (100시간)
('202401', '2201002', 100, 'PARTTIME', '파트타임 전환 (주 20시간)', 'system_loader'),
('202402', '2201002', 100, 'PARTTIME', '파트타임 전환 (주 20시간)', 'system_loader'),

-- 시나리오 3: 2024년 입사자 (중도 입사로 인한 일할 계산)
('202401', '2401021', 104, 'PRORATE_JOIN', '1월 15일 입사 (104시간)', 'system_loader'),
('202401', '2401022', 80, 'PRORATE_JOIN', '1월 20일 입사 (80시간)', 'system_loader'),
('202402', '2402023', 96, 'PRORATE_JOIN', '2월 14일 입사 (96시간)', 'system_loader'),
('202402', '2402024', 80, 'PRORATE_JOIN', '2월 19일 입사 (80시간)', 'system_loader'),
('202403', '2403025', 112, 'PRORATE_JOIN', '3월 11일 입사 (112시간)', 'system_loader'),
('202404', '2404026', 104, 'PRORATE_JOIN', '4월 15일 입사 (104시간)', 'system_loader'),
('202404', '2404027', 80, 'PRORATE_JOIN', '4월 22일 입사 (80시간)', 'system_loader'),
('202405', '2405028', 120, 'PRORATE_JOIN', '5월 13일 입사 (120시간)', 'system_loader'),
('202405', '2405029', 88, 'PRORATE_JOIN', '5월 20일 입사 (88시간)', 'system_loader'),
('202406', '2406030', 104, 'PRORATE_JOIN', '6월 10일 입사 (104시간)', 'system_loader'),

-- 시나리오 4: 건강상 사유 및 기타 단축
('202403', '2203003', 120, 'REDUCE_HEALTH', '건강상 사유 (주 24시간)', 'system_loader'),
('202404', '2203003', 120, 'REDUCE_HEALTH', '건강상 사유 (주 24시간)', 'system_loader'),
('202405', '2301011', 160, 'REDUCE_CHILD', '육아기 단축', 'system_loader'),
('202405', '2301012', 180, 'CONTRACT_36H', '특수 계약 (주 36시간)', 'system_loader'),
('202405', '2302013', 100, 'PARTTIME', '학업 병행 (주 20시간)', 'system_loader'),

-- 시나리오 5: 중도 퇴사자
('202406', '2207005', 80, 'PRORATE_LEAVE', '6월 15일 퇴사 (80시간)', 'system_loader'),
('202406', '2207006', 120, 'PRORATE_LEAVE', '6월 20일 퇴사 (120시간)', 'system_loader'),

-- 시나리오 6: 2023년 입사자들의 산발적 단축
('202407', '2304014', 160, 'REDUCE_CHILD', '육아기 단축', 'system_loader'),
('202407', '2305015', 160, 'REDUCE_CHILD', '육아기 단축', 'system_loader'),
('202407', '2305016', 120, 'REDUCE_HEALTH', '질병 휴직 후 단축 복귀', 'system_loader'),
('202408', '2305016', 120, 'REDUCE_HEALTH', '질병 휴직 후 단축 복귀', 'system_loader'),
('202408', '2308017', 100, 'PARTTIME', '대학원 진학 (주 20시간)', 'system_loader'),
('202408', '2309018', 160, 'CONTRACT_32H', '계약 변경 (주 32시간)', 'system_loader'),
('202408', '2310019', 160, 'REDUCE_CHILD', '배우자 출산 관련 단축', 'system_loader'),
('202408', '2312020', 160, 'REDUCE_CHILD', '육아기 단축', 'system_loader');

-- 정산 메인 --
CREATE TABLE ZHR_PAY_SUMMARY_MAIN (
    -- 1. 기본 키 컬럼 (PK) - 신규 요청
    ID              BIGINT       NOT NULL AUTO_INCREMENT COMMENT '고유 식별자 (PK)',

    -- 2. 비즈니스 식별자 (Unique)
    -- 기존 PK -> Unique Index로 변경 (비즈니스 룰 6.2)
    ZEMP_NO         VARCHAR(10) NOT NULL COMMENT '사번 (FK)',
    ZPAY_YM         CHAR(6)     NOT NULL COMMENT '정산월 (YYYYMM)',
    ZSEQ_NO         INT         NOT NULL COMMENT '정산차수',

    -- 3. 정산 요약 정보 (기능 2.2)
    ZTOTAL_PAY      BIGINT      NOT NULL DEFAULT 0 COMMENT '총지급액',
    ZTOTAL_DEDUCT   BIGINT      NOT NULL DEFAULT 0 COMMENT '총공제액',
    ZTOTAL_REAL     BIGINT      NOT NULL DEFAULT 0 COMMENT '실지급액',

    -- 4. 관리 필드 (기능 2.3, 2.4)
    ZIS_FINAL       CHAR(1)     NOT NULL DEFAULT 'N' COMMENT '확정여부 (Y/N)',
    ZNOTE           VARCHAR(500) NULL COMMENT '정산 메모 (특이사항)',

    -- 5. 버전 관리 (Optimistic Locking) - 신규 요청
    VERSION         INT         NOT NULL DEFAULT 0 COMMENT '버전 (낙관적 잠금용)',

    -- 6. 감사(Audit) 필드
    CREATED_AT      DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)  NULL COMMENT '수정자',

    -- 7. 제약 조건 설정
    -- 7-1. 기본 키 (신규)
    PRIMARY KEY (ID),

    -- 7-2. 고유 키 (기존 PK -> UK)
    -- 비즈니스 룰 6.2 (동일 차수 중복 방지)
    UNIQUE KEY UK_ZHR_PAY_SUMMARY_BIZ (ZEMP_NO, ZPAY_YM, ZSEQ_NO),

    -- 7-3. 외래 키 (검증 5.1)
    CONSTRAINT FK_PAY_SUMMARY_TO_EMP_MASTER
        FOREIGN KEY (ZEMP_NO) 
        REFERENCES ZHR_EMP_MASTER (PERNR),

    -- 7-4. 체크 제약 (기능 2.3)
    CHECK (ZIS_FINAL IN ('Y', 'N'))

) COMMENT '정산 차수별 급여 요약 정보 (중심 테이블)';

-- ZHR_PAY_SUMMARY_MAIN 더미 데이터 (총 43건)

INSERT INTO ZHR_PAY_SUMMARY_MAIN
(ZEMP_NO, ZPAY_YM, ZSEQ_NO, ZTOTAL_PAY, ZTOTAL_DEDUCT, ZTOTAL_REAL, ZIS_FINAL, ZNOTE, CREATED_BY)
VALUES
-- 시나리오 1: 2024년 6월 정기 급여 (ZSEQ_NO=1), 확정 전 (N) - 30명 전체
('2201001', '202406', 1, 5200000, 810000, 4390000, 'N', '6월 정기급여', 'hr_admin'),
('2201002', '202406', 1, 5100000, 790000, 4310000, 'N', '6월 정기급여', 'hr_admin'),
('2203003', '202406', 1, 5000000, 750000, 4250000, 'N', '6월 정기급여', 'hr_admin'),
('2203004', '202406', 1, 4900000, 730000, 4170000, 'N', '6월 정기급여', 'hr_admin'),
('2207005', '202406', 1, 4800000, 710000, 4090000, 'N', '6월 정기급여', 'hr_admin'),
('2207006', '202406', 1, 4850000, 720000, 4130000, 'N', '6월 정기급여', 'hr_admin'),
('2209007', '202406', 1, 4700000, 680000, 4020000, 'N', '6월 정기급여', 'hr_admin'),
('2210008', '202406', 1, 4600000, 660000, 3940000, 'N', '6월 정기급여', 'hr_admin'),
('2210009', '202406', 1, 4650000, 670000, 3980000, 'N', '6월 정기급여', 'hr_admin'),
('2211010', '202406', 1, 4500000, 640000, 3860000, 'N', '6월 정기급여', 'hr_admin'),
('2301011', '202406', 1, 4000000, 510000, 3490000, 'N', '6월 정기급여', 'hr_admin'),
('2301012', '202406', 1, 3900000, 490000, 3410000, 'N', '6월 정기급여', 'hr_admin'),
('2302013', '202406', 1, 3950000, 500000, 3450000, 'N', '6월 정기급여', 'hr_admin'),
('2304014', '202406', 1, 3800000, 470000, 3330000, 'N', '6월 정기급여', 'hr_admin'),
('2305015', '202406', 1, 3700000, 450000, 3250000, 'N', '6월 정기급여', 'hr_admin'),
('2305016', '202406', 1, 3750000, 460000, 3290000, 'N', '6월 정기급여', 'hr_admin'),
('2308017', '202406', 1, 3600000, 430000, 3170000, 'N', '6월 정기급여', 'hr_admin'),
('2309018', '202406', 1, 3500000, 410000, 3090000, 'N', '6월 정기급여', 'hr_admin'),
('2310019', '202406', 1, 3400000, 390000, 3010000, 'N', '6월 정기급여', 'hr_admin'),
('2312020', '202406', 1, 3300000, 370000, 2930000, 'N', '6월 정기급여', 'hr_admin'),
('2401021', '202406', 1, 3200000, 350000, 2850000, 'N', '6월 정기급여', 'hr_admin'),
('2401022', '202406', 1, 3200000, 350000, 2850000, 'N', '6월 정기급여', 'hr_admin'),
('2402023', '202406', 1, 3100000, 330000, 2770000, 'N', '6월 정기급여', 'hr_admin'),
('2402024', '202406', 1, 3100000, 330000, 2770000, 'N', '6월 정기급여', 'hr_admin'),
('2403025', '202406', 1, 3000000, 310000, 2690000, 'N', '6월 정기급여', 'hr_admin'),
('2404026', '202406', 1, 3000000, 310000, 2690000, 'N', '6월 정기급여', 'hr_admin'),
('2404027', '202406', 1, 3000000, 310000, 2690000, 'N', '6월 정기급여', 'hr_admin'),
('2405028', '202406', 1, 2900000, 290000, 2610000, 'N', '6월 정기급여', 'hr_admin'),
('2405029', '202406', 1, 2900000, 290000, 2610000, 'N', '6월 정기급여', 'hr_admin'),
('2406030', '202406', 1, 2800000, 270000, 2530000, 'N', '6월 신규입사자', 'hr_admin'),

-- 시나리오 2: 2024년 5월 정기 급여 (ZSEQ_NO=1), 확정 (Y) - 22년 입사자 10명
('2201001', '202405', 1, 5200000, 810000, 4390000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2201002', '202405', 1, 5100000, 790000, 4310000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2203003', '202405', 1, 5000000, 750000, 4250000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2203004', '202405', 1, 4900000, 730000, 4170000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2207005', '202405', 1, 4800000, 710000, 4090000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2207006', '202405', 1, 4850000, 720000, 4130000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2209007', '202405', 1, 4700000, 680000, 4020000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2210008', '202405', 1, 4600000, 660000, 3940000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2210009', '202405', 1, 4650000, 670000, 3980000, 'Y', '5월 정기급여 (확정)', 'system_batch'),
('2211010', '202405', 1, 4500000, 640000, 3860000, 'Y', '5월 정기급여 (확정)', 'system_batch'),

-- 시나리오 3: 2024년 5월 특별 상여 (ZSEQ_NO=2), 확정 (Y) - 3명
('2201001', '202405', 2, 2000000, 250000, 1750000, 'Y', '1분기 우수사원 포상', 'hr_manager'),
('2207005', '202405', 2, 1500000, 180000, 1320000, 'Y', '프로젝트 기여 인센티브', 'hr_manager'),
('2301011', '202405', 2, 1000000, 100000, 900000, 'Y', '신규 입사자 추천 포상', 'hr_manager');

-- 퇴직 정산용 보조 --
CREATE TABLE ZHR_RETIRE_SUMMARY (
    -- 1. Key Columns
    id             BIGINT       NOT NULL AUTO_INCREMENT COMMENT '고유 식별 ID (Surrogate Key, PK)',
    PERNR          VARCHAR(10)  NOT NULL COMMENT '사번 (Unique, FK from ZHR_EMP_MASTER)',

    -- 2. Snapshot Data (from Master)
    ENTRY_DT       DATE         NOT NULL COMMENT '입사일자 (계산 시점의 마스터 데이터)',
    RETIRE_DT      DATE         NOT NULL COMMENT '퇴직일자 (계산 시점의 마스터 데이터)',

    -- 3. Calculated Data (from Business Rules)
    ZSERVICE_YRS   DECIMAL(10, 2) NOT NULL DEFAULT 0.00 COMMENT '근속년수 (룰: 자동계산, 소수점 2자리)',
    ZAVG_SALARY    DECIMAL(18, 2) NOT NULL DEFAULT 0.00 COMMENT '평균임금 (룰: 최근 3개월 총액/3)',
    ZRETIRE_PAY    DECIMAL(18, 2) NOT NULL DEFAULT 0.00 COMMENT '퇴직금 (ZAVG_SALARY * ZSERVICE_YRS 등)',
    ZTAX_AMOUNT    DECIMAL(18, 2) NOT NULL DEFAULT 0.00 COMMENT '소득세 (룰: 퇴직소득세율표 적용)',
    ZFINAL_PAY     DECIMAL(18, 2) NOT NULL DEFAULT 0.00 COMMENT '실지급액 (ZRETIRE_PAY - ZTAX_AMOUNT)',

    -- 4. Note Field
    ZNOTE          VARCHAR(1000) NULL COMMENT '설명 (계산근거, 특이사항 로그)',

    -- 5. Version & Audit Fields
    version        INT          NOT NULL DEFAULT 0 COMMENT '데이터 버전 (Optimistic Lock용)',
    CREATED_AT     DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY     VARCHAR(50)  NOT NULL COMMENT '생성자 (정산 실행자)',
    UPDATED_AT     DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY     VARCHAR(50)  NULL     COMMENT '수정자',

    -- 6. Constraints
    PRIMARY KEY (id),
    UNIQUE KEY UK_PERNR (PERNR) COMMENT '사번은 유일해야 함',
    FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER(PERNR)
        ON DELETE RESTRICT  -- 마스터 사원이 삭제되면 정산 내역도 삭제될 수 없음 (안전장치)
        ON UPDATE CASCADE   -- 마스터 사번이 변경되면 같이 변경

) COMMENT '퇴직 정산 내역 요약 (스토리보드 중심 테이블)';


-- 더미데이터 --
INSERT INTO ZHR_RETIRE_SUMMARY
(PERNR, ENTRY_DT, RETIRE_DT, ZSERVICE_YRS, ZAVG_SALARY, ZRETIRE_PAY, ZTAX_AMOUNT, ZFINAL_PAY, ZNOTE, CREATED_BY)
VALUES
-- '2201001', '김철수', '2022-01-01', '2025-09-30'
(
    '2201001', '2022-01-01', '2025-09-30', 
    3.75, 4500000.00, 16875000.00, 1181250.00, 15693750.00,
    '근속 3.75년 (1368일). 평균임금 4,500,000. 정산 실행: system_admin', 'system_admin'
),
-- '2201002', '이영희', '2022-01-01', '2025-01-31'
(
    '2201002', '2022-01-01', '2025-01-31', 
    3.08, 4200000.00, 12936000.00, 776160.00, 12159840.00,
    '근속 3.08년 (1126일). 평균임금 4,200,000. 정산 실행: system_admin', 'system_admin'
),
-- '2203003', '박민준', '2022-03-01', '2025-10-29'
(
    '2203003', '2022-03-01', '2025-10-29', 
    3.67, 4800000.00, 17616000.00, 1409280.00, 16206720.00,
    '근속 3.67년 (1338일). 평균임금 4,800,000. 정산 실행: system_admin', 'system_admin'
),
-- '2207005', '정지훈', '2022-07-01', '2025-02-28'
(
    '2207005', '2022-07-01', '2025-02-28', 
    2.67, 4000000.00, 10680000.00, 534000.00, 10146000.00,
    '근속 2.67년 (973일). 평균임금 4,000,000. 정산 실행: system_admin', 'system_admin'
),
-- '2210008', '임하윤', '2022-10-01', '2025-03-31'
(
    '2210008', '2022-10-01', '2025-03-31', 
    2.50, 4100000.00, 10250000.00, 512500.00, 9737500.00,
    '근속 2.50년 (912일). 평균임금 4,100,000. 정산 실행: system_admin', 'system_admin'
),
-- '2301011', '신유나', '2023-01-01', '2025-06-30'
(
    '2301011', '2023-01-01', '2025-06-30', 
    2.50, 3800000.00, 9500000.00, 380000.00, 9120000.00,
    '근속 2.50년 (911일). 평균임금 3,800,000. 정산 실행: system_admin', 'system_admin'
),
-- '2301012', '장은우', '2023-01-01', '2025-04-30'
(
    '2301012', '2023-01-01', '2025-04-30', 
    2.33, 3900000.00, 9087000.00, 363480.00, 8723520.00,
    '근속 2.33년 (850일). 평균임금 3,900,000. 정산 실행: system_admin', 'system_admin'
),
-- '2304014', '권혁준', '2023-04-01', '2025-07-31'
(
    '2304014', '2023-04-01', '2025-07-31', 
    2.33, 3700000.00, 8621000.00, 344840.00, 8276160.00,
    '근속 2.33년 (852일). 평균임금 3,700,000. 정산 실행: system_admin', 'system_admin'
),
-- '2308017', '문채원', '2023-08-01', '2025-08-31'
(
    '2308017', '2023-08-01', '2025-08-31', 
    2.08, 3600000.00, 7488000.00, 224640.00, 7263360.00,
    '근속 2.08년 (761일). 평균임금 3,600,000. 정산 실행: system_admin', 'system_admin'
),
-- '2401021', '유정민', '2024-01-01', '2025-10-15'
(
    '2401021', '2024-01-01', '2025-10-15', 
    1.79, 3500000.00, 6265000.00, 187950.00, 6077050.00,
    '근속 1.79년 (653일). 평균임금 3,500,000. 정산 실행: system_admin', 'system_admin'
);

-- 퇴직금 가감 --
CREATE TABLE ZHR_RETIRE_ADJUST (
    -- 1. Key Columns
    id                  BIGINT       NOT NULL AUTO_INCREMENT COMMENT '고유 식별 ID (PK)',
    ZRETIRE_SUMMARY_ID  BIGINT       NOT NULL COMMENT '퇴직 정산 ID (FK from ZHR_RETIRE_SUMMARY.id)',
    version             INT          NOT NULL DEFAULT 0 COMMENT '데이터 버전 (Optimistic Lock용)',

    -- 2. Adjustment Details (from Storyboard [C])
    ZADJ_TY             VARCHAR(10)  NOT NULL COMMENT '가감 유형 (EXTRA: 가산, DEDUCT: 감산)',
    ZADJ_REASON         VARCHAR(100) NOT NULL COMMENT '가감 사유 코드 또는 사유',
    ZADJ_AMOUNT         DECIMAL(18, 2) NULL COMMENT '가감 금액 (EXPR과 둘 중 하나 필수)',
    ZADJ_EXPR           VARCHAR(500)   NULL COMMENT '계산 공식/비율 (AMOUNT와 둘 중 하나 필수)',
    ZNOTE               VARCHAR(1000)  NULL COMMENT '비고 (상세 사유 등)',

    -- 3. Audit Fields (Matching other tables)
    CREATED_AT          DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY          VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT          DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY          VARCHAR(50)  NULL COMMENT '수정자',

    -- 4. Constraints
    PRIMARY KEY (id),
    
    -- ZHR_RETIRE_SUMMARY(id)를 참조하는 외래키
    FOREIGN KEY (ZRETIRE_SUMMARY_ID) 
        REFERENCES ZHR_RETIRE_SUMMARY(id)
        ON DELETE CASCADE  -- 정산 요약(Summary)이 삭제되면, 관련 가감 항목도 함께 자동 삭제
        ON UPDATE CASCADE,

    -- 5. Business Rule Validation (from Storyboard 5, 6)
    
    -- ZADJ_TY는 'EXTRA' 또는 'DEDUCT'만 허용
    CONSTRAINT CHK_ZADJ_TY CHECK (ZADJ_TY IN ('EXTRA', 'DEDUCT')),
    
    -- ZADJ_AMOUNT는 양수만 허용 (NULL은 허용)
    CONSTRAINT CHK_ZADJ_AMOUNT_POSITIVE CHECK (ZADJ_AMOUNT IS NULL OR ZADJ_AMOUNT >= 0),
    
    -- ZADJ_AMOUNT와 ZADJ_EXPR 둘 중 하나는 필수
    CONSTRAINT CHK_AMOUNT_OR_EXPR_REQUIRED 
        CHECK (ZADJ_AMOUNT IS NOT NULL OR ZADJ_EXPR IS NOT NULL)

) COMMENT '퇴직금 가감 항목 관리 (스토리보드: ZHR_RETIRE_ADJUST)';

-- 징계/병가 공제 항목 --
CREATE TABLE ZHR_PAY_DEDUCT_REASON (
    PAY_DEDUCT_REASON_ID BIGINT       NOT NULL AUTO_INCREMENT COMMENT '징계/병가 공제 ID (PK)',
    
    ZEMP_NO              VARCHAR(10)  NOT NULL COMMENT '사번 (FK to ZHR_EMP_MASTER)',
    ZPAY_YM              VARCHAR(6)   NOT NULL COMMENT '급여월 (YYYYMM)',
    ZSEQ_NO              SMALLINT     NOT NULL COMMENT '급여차수',
    ZITEM_CD             VARCHAR(20)  NOT NULL COMMENT '감액 항목 코드 (FK to ZHR_PAY_ITEM)',
    ZDAYS                DECIMAL(5,2) NULL     COMMENT '감액 일수',
    ZHOURS               DECIMAL(5,2) NULL     COMMENT '감액 시간',
    ZAMOUNT              BIGINT       NOT NULL COMMENT '감액 금액',
    ZREASON_CD           VARCHAR(20)  NOT NULL COMMENT '사유 코드',
    ZNOTE                VARCHAR(500) NULL     COMMENT '비고 (상세 사유 등)',

    --  데이터 버전 관리 (낙관적 락)
    VERSION              BIGINT       NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락용)',

    -- 감사(Audit) 필드
    CREATED_AT           DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY           VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT           DATETIME     NULL     COMMENT '수정 일시',
    UPDATED_BY           VARCHAR(50)  NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (PAY_DEDUCT_REASON_ID),

    -- 비즈니스 규칙을 위한 UNIQUE KEY 설정 (동일 급여월/차수/사번에 동일 항목 중복 등록 방지)
    UNIQUE KEY UK_ZHR_PAY_DEDUCT_REASON (ZEMP_NO, ZPAY_YM, ZSEQ_NO, ZITEM_CD),

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZDAYS_POSITIVE CHECK (ZDAYS >= 0),
    CONSTRAINT CHK_ZHOURS_POSITIVE CHECK (ZHOURS >= 0),
    CONSTRAINT CHK_ZAMOUNT_POSITIVE CHECK (ZAMOUNT >= 0),

    -- 외래 키(Foreign Key) 설정
    CONSTRAINT FK_DEDUCT_REASON_TO_PAY_ITEM
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),

    CONSTRAINT FK_DEDUCT_REASON_TO_EMP_MASTER
    FOREIGN KEY (ZEMP_NO) REFERENCES ZHR_EMP_MASTER(PERNR)
    
) COMMENT '징계/병가 등 급여 감액 사유 관리';


-- ZHR_PAY_DEDUCT_REASON 테이블에 삽입할 더미 데이터 (30건)
INSERT INTO ZHR_PAY_DEDUCT_REASON
(ZEMP_NO, ZPAY_YM, ZSEQ_NO, ZITEM_CD, ZDAYS, ZHOURS, ZAMOUNT, ZREASON_CD, ZNOTE, CREATED_BY)
VALUES
-- 2025년 10월 (ZPAY_YM = '202510')
('2203004', '202510', 1, 'DED101', 3.00, NULL, 450000, 'SICK_2510', '10/13~10/15 무급 병가 (3일)', 'system_admin'),
('2207006', '202510', 1, 'DED102', NULL, NULL, 300000, 'DISC_2509', '징계(감봉) 3개월 중 1회차', 'system_admin'),
('2302013', '202510', 1, 'DED103', 1.00, 8.00, 210000, 'ABSENT_2510', '10/20 무단 결근 (1일)', 'system_admin'),
('2305015', '202510', 1, 'DED102', NULL, 4.00, 100000, 'LATE_2510', '10월 중 지각 2회 (총 4시간) 감액', 'system_admin'),
('2401022', '202510', 1, 'DED003', NULL, NULL, 500000, 'LOAN_REPAY', '사내대출 원리금 상환 (10/12회차)', 'system_admin'),
('2402023', '202510', 1, 'DED004', NULL, NULL, 150000, 'DORM_FEE', '10월 기숙사 사용료', 'system_admin'),
('2209007', '202510', 1, 'DED002', NULL, NULL, 30000, 'UNION_FEE', '10월 정기 노조 조합비', 'system_admin'),
('2210009', '202510', 1, 'DED003', NULL, NULL, 250000, 'LOAN_REPAY', '생활안정자금 대출 상환 (5/24회차)', 'system_admin'),
('2309018', '202510', 1, 'DED004', NULL, NULL, 150000, 'DORM_FEE', '10월 기숙사 사용료 (2인실)', 'system_admin'),
('2310019', '202510', 1, 'DED005', NULL, NULL, 10000, 'WELFARE_FUND', '사내 복지 기금', 'system_admin'),
('2403025', '202510', 1, 'DED103', 0.50, 4.00, 95000, 'LATE_HALF', '10/30 오전 무단 결근 (반차 감액)', 'system_admin'),
('2404026', '202510', 1, 'DED101', 1.00, NULL, 180000, 'SICK_2510', '10/07 개인 질병 (무급 병가 1일)', 'system_admin'),

-- 2025년 10월 퇴직 정산 (ZSEQ_NO = 9)
('2203003', '202510', 9, 'DED103', 2.00, 16.00, 420000, 'ABSENT_FINAL', '퇴직 전 무단 결근(10/27~28) 정산', 'system_admin'),
('2203003', '202510', 9, 'DED003', NULL, NULL, 2500000, 'LOAN_FINAL', '퇴직 정산 시 사내 대출 잔액 일시 상환', 'system_admin'),
('2401021', '202510', 9, 'DED101', 1.50, NULL, 200000, 'SICK_FINAL', '최종 급여 정산 (10/06~ 1.5일 무급 병가)', 'system_admin'),

-- 2025년 9월 (ZPAY_YM = '202509')
('2402024', '202509', 1, 'DED101', 5.00, NULL, 1000000, 'SICK_2509', '9/01~9/05 무급 병가 (5일)', 'system_admin'),
('2203004', '202509', 1, 'DED003', NULL, NULL, 300000, 'LOAN_REPAY', '주택자금 대출 상환 (9월분)', 'system_admin'),
('2401022', '202509', 1, 'DED003', NULL, NULL, 500000, 'LOAN_REPAY', '사내대출 원리금 상환 (9/12회차)', 'system_admin'),
('2402023', '202509', 1, 'DED004', NULL, NULL, 150000, 'DORM_FEE', '9월 기숙사 사용료', 'system_admin'),
('2207006', '202509', 1, 'DED102', NULL, NULL, 300000, 'DISC_2509', '징계(감봉) 3개월 중 2회차', 'system_admin'),
('2501041', '202509', 1, 'DED103', 1.00, 8.00, 190000, 'ABSENT_2509', '9/22 무단 결근', 'system_admin'),

-- 2025년 9월 퇴직 정산 (ZSEQ_NO = 9)
('2201001', '202509', 9, 'DED003', NULL, NULL, 1200000, 'LOAN_FINAL', '퇴직 정산 대출 잔액 상환', 'system_admin'),
('2201001', '202509', 9, 'DED101', 1.00, NULL, 220000, 'SICK_FINAL', '9/15 무급 병가 정산', 'system_admin'),

-- 2025년 8월 (ZPAY_YM = '202508')
('2402024', '202508', 1, 'DED003', NULL, NULL, 150000, 'LOAN_REPAY_S', '학자금 대출 상환 (8월)', 'system_admin'),
('2401022', '202508', 1, 'DED003', NULL, NULL, 500000, 'LOAN_REPAY', '사내대출 원리금 상환 (8/12회차)', 'system_admin'),
('2402023', '202508', 1, 'DED004', NULL, NULL, 150000, 'DORM_FEE', '8월 기숙사 사용료', 'system_admin'),
('2207006', '202508', 1, 'DED102', NULL, NULL, 300000, 'DISC_2509', '징계(감봉) 3개월 중 3회차', 'system_admin'),

-- 2025년 8월 퇴직 정산 (ZSEQ_NO = 9)
('2308017', '202508', 9, 'DED103', 0.50, 4.00, 100000, 'ABSENT_FINAL', '퇴직일 무단 조퇴 (4시간)', 'system_admin');

CREATE TABLE ZHR_STEP_BASE (
    STEP_BASE_ID      BIGINT       NOT NULL AUTO_INCREMENT COMMENT '호봉 기준 ID (PK)',
    ZGRADE_CD         VARCHAR(20)  NOT NULL COMMENT '직군 코드',
    ZSTEP_NO          SMALLINT     NOT NULL COMMENT '호봉 번호',
    ZBASE_PAY         BIGINT       NOT NULL COMMENT '기준급여',
    ZBASE_UNIT        VARCHAR(10)  NOT NULL COMMENT '기준 단위 (MONTHLY, YEARLY)',
    ZFROM_DT          DATE         NOT NULL COMMENT '유효 시작일',
    ZTO_DT            DATE         NOT NULL COMMENT '유효 종료일',
    ZUSE_YN           CHAR(1)      NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE             VARCHAR(500) NULL     COMMENT '비고 (설명)',
    CREATED_AT        DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY        VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT        DATETIME     NULL     COMMENT '수정 일시',
    UPDATED_BY        VARCHAR(50)  NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (STEP_BASE_ID),

    -- 비즈니스 규칙을 위한 UNIQUE KEY 설정 (동일 직군/호봉에 동일 적용 시작일 중복 등록 방지)
    UNIQUE KEY UK_ZHR_STEP_BASE (ZGRADE_CD, ZSTEP_NO, ZFROM_DT),

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZBASE_PAY_POSITIVE CHECK (ZBASE_PAY >= 0),
    CONSTRAINT CHK_ZBASE_UNIT_VALUE CHECK (ZBASE_UNIT IN ('MONTHLY', 'YEARLY')),
    CONSTRAINT CHK_ZUSE_YN_VALUE CHECK (ZUSE_YN IN ('Y', 'N')),
    CONSTRAINT CHK_VALID_DATE_RANGE CHECK (ZFROM_DT <= ZTO_DT)

) COMMENT '직급/직군별 호봉 기준 급여 정보';

-- ZHR_STEP_BASE 테이블에 삽입할 더미 데이터 (30건)
INSERT INTO ZHR_STEP_BASE
(ZGRADE_CD, ZSTEP_NO, ZBASE_PAY, ZBASE_UNIT, ZFROM_DT, ZTO_DT, ZUSE_YN, ZNOTE, CREATED_BY)
VALUES
-- === DEV01: 개발 직군 (2025년 기준, 연봉) ===
('DEV01', 1, 40000000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 1호봉', 'system_admin'),
('DEV01', 2, 42000000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 2호봉', 'system_admin'),
('DEV01', 3, 44100000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 3호봉', 'system_admin'),
('DEV01', 4, 46300000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 4호봉', 'system_admin'),
('DEV01', 5, 48600000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 5호봉', 'system_admin'),
('DEV01', 6, 51000000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 6호봉', 'system_admin'),
('DEV01', 7, 53500000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 개발 직군 7호봉', 'system_admin'),

-- === DSN01: 디자인 직군 (2025년 기준, 연봉) ===
('DSN01', 1, 38000000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 디자인 직군 1호봉', 'system_admin'),
('DSN01', 2, 40000000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 디자인 직군 2호봉', 'system_admin'),
('DSN01', 3, 42000000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 디자인 직군 3호봉', 'system_admin'),
('DSN01', 4, 44100000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 디자인 직군 4호봉', 'system_admin'),
('DSN01', 5, 46500000, 'YEARLY', '2025-01-01', '2025-12-31', 'Y', '2025년 디자인 직군 5호봉', 'system_admin'),

-- === MGT01: 경영지원 직군 (2025년 기준, 월급) ===
('MGT01', 1, 2800000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 1호봉', 'hr_manager'),
('MGT01', 2, 2950000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 2호봉', 'hr_manager'),
('MGT01', 3, 3100000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 3호봉', 'hr_manager'),
('MGT01', 4, 3250000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 4호봉', 'hr_manager'),
('MGT01', 5, 3420000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 5호봉', 'hr_manager'),
('MGT01', 6, 3600000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 6호봉', 'hr_manager'),
('MGT01', 7, 3780000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 7호봉', 'hr_manager'),
('MGT01', 8, 4000000, 'MONTHLY', '2025-01-01', '2025-12-31', 'Y', '2025년 경영지원 8호봉', 'hr_manager'),

-- === 과거 데이터 예시 (2024년 기준) ===
('DEV01', 1, 38000000, 'YEARLY', '2024-01-01', '2024-12-31', 'Y', '2024년 개발 직군 1호봉 (인상 전)', 'system_admin'),
('DEV01', 2, 40000000, 'YEARLY', '2024-01-01', '2024-12-31', 'Y', '2024년 개발 직군 2호봉 (인상 전)', 'system_admin'),
('DEV01', 3, 42000000, 'YEARLY', '2024-01-01', '2024-12-31', 'Y', '2024년 개발 직군 3호봉 (인상 전)', 'system_admin'),
('DEV01', 4, 44100000, 'YEARLY', '2024-01-01', '2024-12-31', 'Y', '2024년 개발 직군 4호봉 (인상 전)', 'system_admin'),
('DSN01', 1, 36500000, 'YEARLY', '2024-01-01', '2024-12-31', 'Y', '2024년 디자인 직군 1호봉 (인상 전)', 'system_admin'),
('DSN01', 2, 38500000, 'YEARLY', '2024-01-01', '2024-12-31', 'Y', '2024년 디자인 직군 2호봉 (인상 전)', 'system_admin'),
('MGT01', 1, 2700000, 'MONTHLY', '2024-01-01', '2024-12-31', 'Y', '2024년 경영지원 1호봉 (인상 전)', 'hr_manager'),
('MGT01', 2, 2850000, 'MONTHLY', '2024-01-01', '2024-12-31', 'Y', '2024년 경영지원 2호봉 (인상 전)', 'hr_manager'),

-- === 사용 안 함(N) 처리된 과거 데이터 예시 ===
('DEV01', 1, 36000000, 'YEARLY', '2023-01-01', '2023-12-31', 'N', '2023년도 기준. 현재 미사용.', 'system_admin'),
('DSN01', 1, 35000000, 'YEARLY', '2023-01-01', '2023-12-31', 'N', '2023년도 기준. 현재 미사용.', 'system_admin');

-- 사원별 호봉 정보 --
CREATE TABLE ZHR_EMP_STEP (
    -- 1. 기본 키 및 버전 관리 (요청 사항)
    ID            BIGINT       NOT NULL AUTO_INCREMENT COMMENT '호봉 이력 ID (PK)',
    VERSION       INT          NOT NULL DEFAULT 0 COMMENT '데이터 버전',

    -- 2. 핵심 데이터 (스토리보드 4.C 기준)
    PERNR         VARCHAR(10)  NOT NULL COMMENT '사번 (FK: ZHR_EMP_MASTER)',
    ZGRADE_CD     VARCHAR(20)  NOT NULL COMMENT '직군 코드',
    ZSTEP_NO      SMALLINT     NOT NULL COMMENT '호봉 번호',
    ZFROM_DT      DATE         NOT NULL COMMENT '적용 시작일',
    ZTO_DT        DATE         NOT NULL COMMENT '적용 종료일',
    ZNOTE         VARCHAR(500) NULL     COMMENT '비고',

    -- 3. 감사(Audit) 필드
    CREATED_AT    DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY    VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT    DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY    VARCHAR(50)  NULL     COMMENT '수정자',

    -- 4. 제약 조건
    PRIMARY KEY (ID),

    -- 스토리보드 5. "동일 사원의 기간이 겹치면 안 됨"
    UNIQUE KEY UK_ZHR_EMP_STEP_BIZ (PERNR, ZFROM_DT),

    -- 스토리보드 5. "사원 테이블에 존재해야 함" (요청 사항)
    FOREIGN KEY (PERNR) 
        REFERENCES ZHR_EMP_MASTER(PERNR)
        ON DELETE RESTRICT

) COMMENT '사원별 호봉 등록 정보';

-- 더미 데이터 -- 
INSERT INTO ZHR_EMP_STEP
(PERNR, ZGRADE_CD, ZSTEP_NO, ZFROM_DT, ZTO_DT, ZNOTE, CREATED_BY)
VALUES
-- 시나리오 1: 2025년 신규 입사자 (5명, 5건)
-- 입사일 = 첫 호봉 시작일, 종료일 = 9999-12-31
('2501041', 'G1', 1, '2025-01-01', '9999-12-31', '신규 입사', 'system_admin'),
('2501042', 'G1', 1, '2025-01-01', '9999-12-31', '신규 입사', 'system_admin'),
('2502043', 'S1', 1, '2025-02-01', '9999-12-31', '신규 입사', 'system_admin'),
('2503044', 'G1', 1, '2025-03-01', '9999-12-31', '신규 입사', 'system_admin'),
('2505047', 'M1', 1, '2025-05-01', '9999-12-31', '신규 입사 (경력)', 'system_admin'),

-- 시나리오 2: 2024년 입사자 (5명, 10건)
-- 2025년 1월 1일부로 정기 승급 (1호봉 -> 2호봉)
('2401022', 'G1', 1, '2024-01-01', '2024-12-31', '신규 입사', 'system_admin'),
('2401022', 'G1', 2, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),
('2402023', 'S1', 1, '2024-02-01', '2024-12-31', '신규 입사', 'system_admin'),
('2402023', 'S1', 2, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),
('2403025', 'G1', 1, '2024-03-01', '2024-12-31', '신규 입사', 'system_admin'),
('2403025', 'G1', 2, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),
('2407031', 'G1', 1, '2024-07-01', '2024-12-31', '신규 입사', 'system_admin'),
('2407031', 'G1', 2, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),
('2410036', 'M1', 1, '2024-10-01', '2024-12-31', '신규 입사 (경력)', 'system_admin'),
('2410036', 'M1', 2, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),

-- 시나리오 3: 2022년 입사자 (재직자, 3명, 12건)
-- 매년 정기 승급 + 1명은 중간에 승진 (G1 -> G2)
-- 최서연 ('2203004', G1 -> G2 승진)
('2203004', 'G1', 1, '2022-03-01', '2022-12-31', '신규 입사', 'system_admin'),
('2203004', 'G1', 2, '2023-01-01', '2023-12-31', '2023년 정기승급', 'system_admin'),
('2203004', 'G1', 3, '2024-01-01', '2024-06-30', '2024년 정기승급', 'system_admin'),
('2203004', 'G2', 1, '2024-07-01', '9999-12-31', 'G2 승진', 'system_admin'),
-- 윤서아 ('2207006', 정기 승급만)
('2207006', 'S1', 1, '2022-07-01', '2022-12-31', '신규 입사', 'system_admin'),
('2207006', 'S1', 2, '2023-01-01', '2023-12-31', '2023년 정기승급', 'system_admin'),
('2207006', 'S1', 3, '2024-01-01', '2024-12-31', '2024년 정기승급', 'system_admin'),
('2207006', 'S1', 4, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),
-- 강도윤 ('2209007', 정기 승급만)
('2209007', 'G1', 1, '2022-09-01', '2022-12-31', '신규 입사', 'system_admin'),
('2209007', 'G1', 2, '2023-01-01', '2023-12-31', '2023년 정기승급', 'system_admin'),
('2209007', 'G1', 3, '2024-01-01', '2024-12-31', '2024년 정기승급', 'system_admin'),
('2209007', 'G1', 4, '2025-01-01', '9999-12-31', '2025년 정기승급', 'system_admin'),

-- 시나리오 4: 퇴직자 (2명, 7건)
-- 마지막 레코드의 ZTO_DT가 RETIRE_DT와 일치함
-- 김철수 ('2201001', 2025-09-30 퇴직)
('2201001', 'S1', 1, '2022-01-01', '2022-12-31', '신규 입사', 'system_admin'),
('2201001', 'S1', 2, '2023-01-01', '2023-12-31', '2023년 정기승급', 'system_admin'),
('2201001', 'S1', 3, '2024-01-01', '2024-12-31', '2024년 정기승급', 'system_admin'),
('2201001', 'S1', 4, '2025-01-01', '2025-09-30', '퇴직 (최종)', 'system_admin'),
-- 신유나 ('2301011', 2025-06-30 퇴직)
('2301011', 'G1', 1, '2023-01-01', '2023-12-31', '신규 입사', 'system_admin'),
('2301011', 'G1', 2, '2024-01-01', '2024-12-31', '2024년 정기승급', 'system_admin'),
('2301011', 'G1', 3, '2025-01-01', '2025-06-30', '퇴직 (최종)', 'system_admin');


-- 급여 계좌 --
CREATE TABLE ZHR_BANK_ACCOUNT (
    BANK_ACCOUNT_ID   BIGINT         NOT NULL AUTO_INCREMENT COMMENT '계좌 ID (PK)',
    
    ZEMP_NO            VARCHAR(10)    NOT NULL COMMENT '사원번호 (FK, ZHR_EMP_MASTER.PERNR)',
    ZACC_TYPE         VARCHAR(10)    NOT NULL COMMENT '계좌 유형 (MAIN, SUB, LOAN, RETIRE)',
    ZBANK_CD          VARCHAR(10)    NOT NULL COMMENT '은행 코드',
    ZBANK_NAME        VARCHAR(100)   NOT NULL COMMENT '은행명',
    ZACC_NO           VARCHAR(255)   NOT NULL COMMENT '계좌번호 (암호화/마스킹 필요)',
    ZACC_NO_HASH      VARCHAR(64)    NOT NULL COMMENT '계좌번호 검색용 해시 (HMAC-SHA256)',
    ZACC_HOLDER       VARCHAR(100)   NOT NULL COMMENT '예금주',
    ZFROM_DT          DATE           NOT NULL COMMENT '유효 시작일',
    ZTO_DT            DATE           NOT NULL DEFAULT '9999-12-31' COMMENT '유효 종료일',
    ZUSE_YN           CHAR(1)        NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE             VARCHAR(500)   NULL     COMMENT '비고 (설명)',
    
    VERSION            INT            NOT NULL DEFAULT 0 COMMENT '버전 (낙관적 락킹용)',
    CREATED_AT        DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY        VARCHAR(50)    NOT NULL COMMENT '생성자',
    UPDATED_AT        DATETIME       NULL     COMMENT '수정 일시',
    UPDATED_BY        VARCHAR(50)    NULL     COMMENT '수정자',
    
    INDEX IDX_ZACC_NO_HASH (ZACC_NO_HASH),
	INDEX IDX_BANK_ACCOUNT_ZEMP_NO (ZEMP_NO),
    -- 기본 키 설정
    PRIMARY KEY (BANK_ACCOUNT_ID),

	-- 1-2. 외래 키 제약 조건 추가
    CONSTRAINT FK_BANK_ACCOUNT_ZEMP_NO 
        FOREIGN KEY (ZEMP_NO) 
        REFERENCES ZHR_EMP_MASTER (PERNR),
    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZACC_TYPE_VALUE CHECK (ZACC_TYPE IN ('MAIN', 'SUB', 'LOAN', 'RETIRE')),
    CONSTRAINT CHK_BANK_ACCOUNT_ZUSE_YN_VALUE CHECK (ZUSE_YN IN ('Y', 'N')),
    CONSTRAINT CHK_ACCOUNT_VALID_DATE_RANGE CHECK (ZFROM_DT <= ZTO_DT)

) COMMENT '사원별 급여 계좌 정보';

-- ZHR_BANK_ACCOUNT 테이블에 삽입할 더미 데이터 (사번 및 예금주명 ZHR_EMP_MASTER 기준으로 수정)
INSERT INTO ZHR_BANK_ACCOUNT
(ZEMP_NO, ZACC_TYPE, ZBANK_CD, ZBANK_NAME, ZACC_NO, ZACC_NO_HASH, ZACC_HOLDER, ZFROM_DT, ZTO_DT, ZUSE_YN, ZNOTE, CREATED_BY)
VALUES
-- 'EMP001', '김철수' -> '2201001', '김철수'
('2201001', 'MAIN', '004', 'KB국민은행', '1zOraYvFUhwKhRyb7Zlq5egCfZZnYnYCYQpuZ5LPp64=', '86edfcd7421e3b6051a20204daba94ae8dad4df370473651ac78d01172835b74', '김철수', '2022-03-02', '9999-12-31', 'Y', '급여 입금용 주거래 계좌', 'hr_manager'),

-- 'EMP002', '이영희' -> '2201002', '이영희'
('2201002', 'MAIN', '088', '신한은행', 'YE2UTMTFb3SQsd5p/A7hGa03ysgpicEe0tyTxYVbN7o=', 'c0cdfc57b8c186bff124eb5711da7d231c78b2be5b0d782a8c5dc2796da7e856', '이영희', '2023-01-10', '9999-12-31', 'Y', '주 급여계좌', 'hr_manager'),
('2201002', 'SUB', '088', '신한은행', 'YE2UTMTFb3SQsd5p/A7hGa03ysgpicEe0tyTxYVbN7o=', 'c0cdfc57b8c186bff124eb5711da7d231c78b2be5b0d782a8c5dc2796da7e856', '이영희', '2023-01-10', '9999-12-31', 'Y', '경비 지출용 예비 계좌', 'hr_manager'),
('2201002', 'LOAN', '088', '신한은행', 'YE2UTMTFb3SQsd5p/A7hGa03ysgpicEe0tyTxYVbN7o=', 'c0cdfc57b8c186bff124eb5711da7d231c78b2be5b0d782a8c5dc2796da7e856', '이영희', '2024-05-01', '9999-12-31', 'Y', '사내 대출 상환용', 'hr_manager'),

-- 'DEV001', '박개발' -> '2203003', '박민준'
('2203003', 'MAIN', '020', '우리은행', 'B3pvs6RDpsyRmhZquLc/6+umkWIpMgUrCHWR0oZE/eg=', 'e355b472e470ea8659bb0d6c957b920abc8577885af4cde6f3b2bbce11e6ace5', '박민준', '2021-06-15', '2024-12-31', 'N', '이전 급여 계좌. 현재 미사용.', 'system_admin'),
('2203003', 'MAIN', '090', '카카오뱅크', 'hZ3yu/ptQ9iLzH1PfmIziSq7c4nXWfvFxIgeDza+t1s=', 'ac39a4470455079adbe336b7003857c5f87680b647b07c8bf9cbb102c997a790', '박민준', '2025-01-01', '9999-12-31', 'Y', '2025년부터 변경된 급여 계좌', 'system_admin'),
('2203003', 'SUB', '090', '카카오뱅크', 'hZ3yu/ptQ9iLzH1PfmIziSq7c4nXWfvFxIgeDza+t1s=', 'ac39a4470455079adbe336b7003857c5f87680b647b07c8bf9cbb102c997a790', '박민준', '2025-03-01', '9999-12-31', 'Y', '사내 스터디 경비 계좌', 'system_admin'),

-- 'DSN001', '최디자인' -> '2203004', '최서연'
('2203004', 'MAIN', '081', '하나은행', 'PNyQqcfNp3OPl6Z6lrlHwOiCN0DWUcGlQZcGhw6so6Y=', '846695d300455ba7b55497e4ea413bc816d05985bfcb13b16aa51f101f5d6e20', '최서연', '2020-11-20', '9999-12-31', 'Y', '급여 계좌', 'hr_manager'),
('2203004', 'RETIRE', '003', 'IBK기업은행', 'g80jqHfkLbHtrCm53Ju4N7fgPjyOVT6tS1KWirEH8mA=', '8305a21339fb26e0b439bcbdf0b1422bb966d92c4bc93c9d801e731f81f8fce5', '최서연', '2020-11-20', '9999-12-31', 'Y', '퇴직연금 IRP 계좌', 'hr_manager'),
('2203004', 'SUB', '081', '하나은행', 'IfgdOb5i6yMhRRk/z10PnOb/fN1WPHlMHQrIatd4KX8=', '36244f31afa5e28ad2ccb0ea75ad1125469f371215289250d39e0c0e2a217898', '최서연', '2021-01-01', '2022-12-31', 'N', '프로젝트 종료된 계좌', 'hr_manager'),

-- 'MGT001', '강지원' -> '2207005', '정지훈'
('2207005', 'MAIN', '011', 'NH농협은행', 'kYz1nO5Bfqw/y7WFV1gXomUkYnxmHxU6qVkwHbQaLO8=', '9511f8924e130e12da351b63051b7d0fdc97a31438cb7d5ca8e5da8ed6deba92', '정지훈', '2023-09-01', '9999-12-31', 'Y', '경영지원팀 급여계좌', 'hr_manager'),
('2207005', 'SUB', '020', '우리은행', 'zRX3sDc15BmhhnTyDdJAoLESbaW4qr7MAjbkwRa3uNI=', 'd7d97a025a8cdc17b76b368530b83c786c0bbd2679670ca274c4edab532edba0', '정지훈', '2024-02-14', '2024-08-31', 'N', '프로젝트 경비 계좌 (종료)', 'hr_manager'),

-- 'PLN001', '이기획' -> '2207006', '윤서아'
('2207006', 'MAIN', '088', '신한은행', 'vjWIPe8woFDzzl2sJOWWto9VsdqJuyEjaLy8D7bSW8E=', 'ca5d5b775698a8a68d515a590eed7317929aadfa2250064094ca5350afc742f1', '윤서아', '2022-08-01', '9999-12-31', 'Y', '급여계좌', 'hr_manager'),
('2207006', 'LOAN', '081', '하나은행', '6xyaNZ9eMpjisURoZdFDsxAWBB7DR426h4O8//kECTc=', 'cc48a07fb7412f70d151a9495d4bc3d074167d1ad475d6294b452f76f3192417', '윤서아', '2023-03-10', '2025-03-09', 'N', '대출 상환 완료로 미사용 처리', 'hr_manager'),

-- 'DEV002', '오서버' -> '2209007', '강도윤'
('2209007', 'MAIN', '090', '카카오뱅크', 'xjE/wctutSud16gc9PfGxbNAi1XIQbhm2HB7fk0mB04=', '833186db9558fe3d308f0b476b4ce906550ca67dcea6918b637d3f46c32f411d', '강도윤', '2024-01-15', '9999-12-31', 'Y', '백엔드 개발자 급여 계좌', 'system_admin'),
('2209007', 'RETIRE', '089', '케이뱅크', '2TBUhdbrCKaC1omXJT1jP8YDMkwQMuNJwBpAfn/2MvY=', 'f15be905582ecb0ec3fb373648317b873da775c2b7221f100b7c8e06e58bba8a', '강도윤', '2024-01-15', '9999-12-31', 'Y', '퇴직연금 IRP', 'system_admin'),

-- 'DSN002', '나화면' -> '2210008', '임하윤'
('2210008', 'MAIN', '027', '한국씨티은행', '98eQ+UZ/ElpQDO7QyOa4ATLIBGUAX4I4xjo44O3XPOc=', '58e5a9cb937bd8e54c4d079d0df15f769c35c3bc1ad39bffec4ff78cd9290b73', '임하윤', '2023-07-01', '9999-12-31', 'Y', 'UI/UX 디자이너 급여 계좌', 'hr_manager'),
('2210008', 'RETIRE', '027', '한국씨티은행', '98eQ+UZ/ElpQDO7QyOa4ATLIBGUAX4I4xjo44O3XPOc=', '58e5a9cb937bd8e54c4d079d0df15f769c35c3bc1ad39bffec4ff78cd9290b73', '임하윤', '2023-07-01', '2025-09-20', 'N', '계좌 통합으로 미사용 처리', 'hr_manager'),

-- 'MGT002', '박관리' -> '2210009', '한지우'
('2210009', 'MAIN', '020', '우리은행', 'lYkD1V+MZOSk7KCMwTWJrbj/xQdg6S4PrQ9pZeSHz/A=', 'b07351e1b494e32aea1c5b6e78ba1981460fd8c1d50f9838bdadccb8597c9d62', '한지우', '2023-11-01', '9999-12-31', 'Y', '급여 계좌', 'hr_manager'),
('2210009', 'RETIRE', '020', '우리은행', 'ZUzYdQM2qvB+hhA0SMdUd0wqZ0fhw6LU4wDYhYGAIN0=', '2613f1fb2c50ee556490293f52d6a8a8b4e140bfb6e162592e326d4ba7fdead3', '한지우', '2023-11-01', '9999-12-31', 'Y', '퇴직연금 DC형 계좌', 'hr_manager'),

-- 'EMP003', '윤사원' -> '2211010', '오시우'
('2211010', 'MAIN', '003', 'IBK기업은행', 'VNQIEUeA4g+C0un3X1jNriJQeo88m9QPzFqN4mQXWlA=', 'VNQIEUeA4g+C0un3X1jNriJQeo88m9QPzFqN4mQXWlA=', '오시우', '2024-04-20', '9999-12-31', 'Y', '급여 이체용', 'hr_manager'),
('2211010', 'MAIN', '088', '신한은행', 'X8O7Tzvvn3XWRbVnpKJwgJdDZSL+r1C59JgvhBgiL6w=', '43285fc4429caee88a3d581945579e86564eb3935dedac31b9b1816398daf29a', '오시우', '2022-02-10', '2024-04-19', 'N', '이전 주거래 계좌', 'hr_manager'),

-- 'DEV003', '김코딩' -> '2301011', '신유나'
('2301011', 'MAIN', '089', '케이뱅크', 'kq5/PiDLSE378MT0+tD2+h7BIomlANf9YNvEUO3CoVg=', '856f9879b4b62de4c8d2638f6bd97e780ffb79626a346c885429da04d297ddb0', '신유나', '2025-01-02', '9999-12-31', 'Y', '신규 입사자 급여 계좌', 'system_admin'),

-- 'DSN003', '정도형' -> '2301012', '장은우'
('2301012', 'MAIN', '004', 'KB국민은행', 'PFEMBwOiFZxRVXLooJ3dbmcCX0Adfcb8V0ByUfhimjo=', '70f8978fdb09db33e3e284fd0ee668ef7d42e506f6cbe18c876b13526f2f1382', '장은우', '2021-09-01', '9999-12-31', 'Y', '프리랜서 계약시 사용 계좌', 'hr_manager'),
('2301012', 'SUB', '090', '카카오뱅크', '5GPwMGr6zd0MWXJMOLObQENb3Di4H4jKt215aGyv3s8=', 'db535d11ab1837b7d57db23d924033304972d7a240b10996aecfee89626091ee', '장은우', '2022-10-01', '9999-12-31', 'Y', '개인 경비 처리용', 'hr_manager'),

-- 'PLN002', '최기획' -> '2302013', '송지아'
('2302013', 'MAIN', '081', '하나은행', 'qcAfGvzmwp+sz7oqzADz6pdUk5RB5+/i811TfycdTvc=', '049d6cc81b95aa57a25efaf7bf36795865fd62552bb1ec1787ffadb8db247f52', '송지아', '2020-03-16', '9999-12-31', 'Y', '기획팀 급여계좌', 'hr_manager'),
('2302013', 'LOAN', '081', '하나은행', 'qcAfGvzmwp+sz7oqzADz6pdUk5RB5+/i811TfycdTvc=', '049d6cc81b95aa57a25efaf7bf36795865fd62552bb1ec1787ffadb8db247f52', '송지아', '2025-02-01', '2028-01-31', 'Y', '학자금 대출 상환', 'hr_manager'),

-- 'EMP004', '황인턴' -> '2304014', '권혁준'
('2304014', 'MAIN', '011', 'NH농협은행', 'j27PB3+IX6ds3vj1Kurmc3sP45+NWRBpi1qLn+FiJVg=', '6bbc4011f890e2f8bfef3f7a539b1135c2b4c5426264b5882a7e58d05a35fc34', '권혁준', '2025-07-01', '2025-12-31', 'Y', '인턴 급여 계좌', 'hr_manager'),

-- 'EMP005', '천재무' -> '2305015', '황수빈'
('2305015', 'MAIN', '002', 'KDB산업은행', 'E41MzMkh6JmyGsOyjpeYXbhlzph7Wy8gwfVoiMo/X2I=', '6ca25bf84fa99056c2c50950a413a5ad918843306df7cd7bca846cc239eb97d4', '황수빈', '2019-08-12', '9999-12-31', 'Y', '재무팀 급여 계좌', 'hr_manager'),
('2305015', 'LOAN', '002', 'KDB산업은행', 'JnQsTvyOdhrMJYoHxjK/AbbwIqIsa/jtTiH0aNn8lxQ=', '38ac0f693e577215b03d3e8f8c15be0ade4806c10a546e7325ca9e398f17fc52', '황수빈', '2021-01-01', '2024-12-31', 'N', '상환 완료된 대출 계좌', 'hr_manager');

--  사원별 원천징수 세율 --
CREATE TABLE ZHR_EMP_WITHHOLD_RATE (
    -- 1. 시스템 관리 필드 (요청 사항)
    id              BIGINT        NOT NULL AUTO_INCREMENT COMMENT '시스템 ID (PK, 순차 증가)',
    version         INT           NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금용)',

    -- 2. 핵심 데이터 필드 (스토리보드 기반)
    ZEMP_NO         VARCHAR(10)   NOT NULL COMMENT '사번 (FK: ZHR_EMP_MASTER.PERNR)',
    ZFROM_DT        DATE          NOT NULL COMMENT '적용 시작일',
    ZTO_DT          DATE          NOT NULL COMMENT '적용 종료일',
    ZWITHHOLD_PC    DECIMAL(5, 2) NOT NULL COMMENT '원천징수율 (%, 예: 80.00, 120.00)',
    ZNOTE           VARCHAR(500)  NULL     COMMENT '비고 (감면 근거, 사유 등)',

    -- 3. 감사(Audit) 필드 (ZHR_EMP_MASTER 형식 통일)
    CREATED_AT      DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)   NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)   NULL     COMMENT '수정자',

    -- 4. 제약 조건 (Constraints)
    
    -- 기본 키 (요청 사항)
    PRIMARY KEY (id),

    -- 외래 키 (요청 사항: ZHR_EMP_MASTER 참조)
    CONSTRAINT FK_WITHHOLD_RATE_EMP_NO
        FOREIGN KEY (ZEMP_NO)
        REFERENCES ZHR_EMP_MASTER(PERNR)
        ON DELETE RESTRICT -- 마스터 사원이 삭제되면 이력도 삭제되지 않도록 보호 (혹은 CASCADE)
        ON UPDATE CASCADE, -- 마스터 사번이 변경되면 같이 변경

    -- 고유 제약 조건 (비즈니스 룰: "동일 사번/기간 중복 불가")
    -- 한 사원에 대해 동일한 '적용 시작일'을 가진 데이터는 중복될 수 없음.
    UNIQUE KEY UK_EMP_FROM_DT (ZEMP_NO, ZFROM_DT),

    -- 체크 제약 조건 (검증 조건: "0 ~ 999.99 범위")
    CONSTRAINT CHK_WITHHOLD_PC_RANGE
        CHECK (ZWITHHOLD_PC >= 0.00 AND ZWITHHOLD_PC <= 999.99)

) COMMENT '사원별 개별 원천징수율 관리';


-- 더미데이터 --
INSERT INTO ZHR_EMP_WITHHOLD_RATE
(ZEMP_NO, ZFROM_DT, ZTO_DT, ZWITHHOLD_PC, ZNOTE, CREATED_BY)
VALUES
-- 기존 8건 --
('2203004', '2025-01-01', '2025-12-31', 120.00, '2025년 120% 적용', 'system_admin'),
('2404026', '2024-01-01', '2024-12-31', 120.00, '2024년 120% 적용', 'system_admin'),
('2305015', '2025-01-01', '2025-12-31', 80.00, '2025년 80% 적용', 'system_admin'),
('2406030', '2024-06-01', '9999-12-31', 19.00, '외국인 단일세율 19%', 'system_admin'),
('2503044', '2025-03-01', '2025-12-31', 19.00, '외국인 단일세율 19%', 'system_admin'),
('2401022', '2024-01-01', '2024-12-31', 120.00, '2024년 120%', 'system_admin'),
('2401022', '2025-01-01', '2025-12-31', 80.00, '2025년 80%로 변경', 'system_admin'),
('2201001', '2024-01-01', '2024-12-31', 120.00, '퇴직 전 120% 적용 이력', 'system_admin'),

-- 추가 4건 (총 12건) --
('2207006', '2025-01-01', '2025-12-31', 80.00, '2025년 80% 적용', 'system_admin'),
('2209007', '2025-01-01', '2025-12-31', 120.00, '2025년 120% 적용', 'system_admin'),
('2302013', '2024-01-01', '2024-12-31', 120.00, '2024년 120%', 'system_admin'),
('2302013', '2025-01-01', '9999-12-31', 19.00, '외국인 단일세율 19%로 변경', 'system_admin');

-- 사원 가족 정보 --
CREATE TABLE ZHR_EMP_FAMILY (
    FAMILY_ID          BIGINT          NOT NULL AUTO_INCREMENT COMMENT '가족 ID (PK)',
    PERNR              VARCHAR(10)     NOT NULL COMMENT '사원번호 (FK to ZHR_EMP_MASTER.PERNR)',
    ZFAM_SEQ           INT             NOT NULL COMMENT '가족 순번 (화면 표시 정렬용)',
    
    -- [공통코드] 가족 관계 (예: 10:배우자, 20:자녀... 공통코드 테이블 참조)
    ZFAM_TYPE          VARCHAR(10)     NOT NULL COMMENT '관계 코드 (Common Code: HR_REL_TYPE)',
    
    ZFAM_NAME          VARCHAR(100)    NOT NULL COMMENT '가족 성명',
    
    -- [보안] 주민등록번호는 반드시 암호화하여 저장 
    ZSSN               VARCHAR(256)    NOT NULL COMMENT '주민등록번호(암호화)',
    
    ZBIRTH             DATE            NOT NULL COMMENT '생년월일',
    ZGENDER            CHAR(1)         NOT NULL COMMENT '성별 (M/F)',
    
    -- [추가됨] 직업 및 학력 정보 (공통코드 사용 권장)
    ZJOB_TYPE          VARCHAR(10)     NULL     COMMENT '직업 구분 (Common Code: HR_JOB_TYPE - 예: 직장인, 주부, 학생, 무직)',
    ZSCH_TYPE          VARCHAR(10)     NULL     COMMENT '학력/학교 구분 (Common Code: HR_SCH_TYPE - 예: 유치원, 초/중/고, 대학교)',
    ZSCH_NAME          VARCHAR(100)    NULL     COMMENT '학교명 (학자금 신청 시 필요)',

    -- [인사 로직 플래그]
    ZLIVE_YN           CHAR(1)         NOT NULL DEFAULT 'Y' COMMENT '동거 여부 (Y/N)',
    ZDEPEND_YN         CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '부양가족 공제 여부 (Y/N)',
    ZALLOW_YN          CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '가족수당 지급 여부 (Y/N)',
    ZTAX_YN            CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '의료비/교육비 등 공제 대상 (Y/N)',
    ZDISABLED_YN       CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '장애인 여부 (Y/N)',
    
    -- [연락처] 긴급 연락망이나 사고 시 필요
    ZPHONE             VARCHAR(20)     NULL     COMMENT '연락처',
    
    -- [이력 관리]
    ZFROM_DT           DATE            NOT NULL COMMENT '적용 시작일',
    ZTO_DT             DATE            NOT NULL DEFAULT '9999-12-31' COMMENT '적용 종료일',
    
    ZNOTE              VARCHAR(500)    NULL     COMMENT '비고',
    
    -- [시스템 감사]
    VERSION            INT             NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금)',
    CREATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY         VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT         DATETIME        NULL     ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY         VARCHAR(50)     NULL     COMMENT '수정자',

    PRIMARY KEY (FAMILY_ID),

    UNIQUE KEY UK_ZHR_EMP_FAMILY_01 (PERNR, ZFAM_SEQ),
    
    INDEX IDX_ZHR_EMP_FAMILY_01 (ZFAM_NAME),
    INDEX IDX_ZHR_EMP_FAMILY_02 (PERNR, ZFAM_TYPE), 

    CONSTRAINT FK_ZHR_EMP_FAMILY_MASTER 
        FOREIGN KEY (PERNR) 
        REFERENCES ZHR_EMP_MASTER(PERNR) ON DELETE CASCADE,

    -- 데이터 무결성 체크
    CONSTRAINT CHK_ZGENDER_VALUE CHECK (ZGENDER IN ('M', 'F')),
    CONSTRAINT CHK_ZLIVE_YN_VALUE CHECK (ZLIVE_YN IN ('Y', 'N')),
    CONSTRAINT CHK_ZDEPEND_YN_VALUE CHECK (ZDEPEND_YN IN ('Y', 'N')),
    CONSTRAINT CHK_FAMILY_VALID_DATE CHECK (ZFROM_DT <= ZTO_DT)

) COMMENT '사원별 가족 구성원 정보';



-- 사원별 가족 더미데이터 --
INSERT INTO ZHR_EMP_FAMILY
(ZEMP_NO, ZFAM_SEQ, ZFAM_TYPE, ZFAM_NAME, ZBIRTH, ZGENDER, ZDEPEND_YN, ZALLOW_YN, ZTAX_YN, ZDISABLED_YN, ZFROM_DT, ZTO_DT, ZNOTE, CREATED_BY)
VALUES
('2203004', 1, 'SPOUSE', '박서연', '1988-05-15', 'F', 'Y', 'Y', 'Y', 'N', '2015-06-01', '9999-12-31', '배우자', 'hr_manager'),
('2203004', 2, 'SON', '김민준', '2016-09-20', 'M', 'Y', 'Y', 'Y', 'N', '2016-09-20', '9999-12-31', '첫째 자녀', 'hr_manager'),
('2203004', 3, 'DAUGHTER', '김지아', '2019-03-10', 'F', 'Y', 'Y', 'Y', 'N', '2019-03-10', '9999-12-31', '둘째 자녀', 'hr_manager'),
('2203004', 4, 'MOTHER', '김영숙', '1959-10-27', 'F', 'Y', 'N', 'Y', 'N', '2015-06-01', '9999-12-31', '모', 'hr_manager'),
('2203004', 5, 'FATHER', '김정수', '1957-08-14', 'M', 'N', 'N', 'N', 'N', '2015-06-01', '2023-12-31', '부, 소득 발생으로 부양가족 제외', 'hr_manager'),
('2207006', 1, 'FATHER', '이강산', '1955-02-28', 'M', 'Y', 'N', 'Y', 'N', '2023-01-10', '9999-12-31', '부', 'hr_manager'),
('2207006', 2, 'MOTHER', '최은혜', '1958-11-05', 'F', 'Y', 'N', 'Y', 'Y', '2023-01-10', '9999-12-31', '모, 장애인 공제 대상', 'hr_manager'),
('2209007', 1, 'SPOUSE', '윤지수', '1992-08-01', 'F', 'N', 'N', 'N', 'N', '2024-05-20', '9999-12-31', '맞벌이 배우자, 부양가족 아님', 'system_admin'),
('2209007', 2, 'FATHER', '박종철', '1960-07-11', 'M', 'Y', 'N', 'Y', 'N', '2021-06-15', '9999-12-31', '부', 'system_admin'),
('2211010', 1, 'MOTHER', '최미경', '1965-01-25', 'F', 'Y', 'N', 'Y', 'N', '2020-11-20', '9999-12-31', '모', 'hr_manager'),
('2302013', 1, 'SPOUSE', '송하준', '1990-12-30', 'M', 'Y', 'Y', 'Y', 'N', '2022-10-10', '9999-12-31', '배우자', 'hr_manager'),
('2302013', 2, 'SON', '송시우', '2024-03-05', 'M', 'Y', 'Y', 'Y', 'N', '2024-03-05', '9999-12-31', '자녀', 'hr_manager'),
('2305015', 1, 'SPOUSE', '한유라', '1985-04-16', 'F', 'Y', 'Y', 'Y', 'N', '2010-11-20', '9999-12-31', '배우자', 'hr_manager'),
('2305015', 2, 'SON', '이도윤', '2004-06-30', 'M', 'N', 'N', 'N', 'N', '2004-06-30', '9999-12-31', '자녀, 만 20세 초과로 공제 대상 제외', 'hr_manager'),
('2305015', 3, 'MOTHER', '이순희', '1960-01-10', 'F', 'Y', 'N', 'Y', 'N', '2022-08-01', '9999-12-31', '모', 'hr_manager'),
('2305016', 1, 'DAUGHTER', '오아린', '2020-07-07', 'F', 'Y', 'Y', 'Y', 'Y', '2024-01-15', '9999-12-31', '자녀, 장애인 공제 대상', 'system_admin'),
('2305016', 2, 'SPOUSE', '장미래', '1993-02-14', 'F', 'Y', 'Y', 'Y', 'N', '2024-01-15', '9999-12-31', '배우자', 'system_admin'),
('2309018', 1, 'FATHER', '나영웅', '1962-10-10', 'M', 'Y', 'N', 'Y', 'N', '2023-07-01', '2025-01-15', '부, 2025년 별도 세대 분리', 'hr_manager'),
('2310019', 1, 'SPOUSE', '정유미', '1989-09-09', 'F', 'N', 'N', 'N', 'N', '2016-05-02', '2022-08-15', '이혼으로 인한 관계 종료', 'hr_manager'),
('2310019', 2, 'DAUGHTER', '박서아', '2018-04-01', 'F', 'Y', 'Y', 'Y', 'N', '2018-04-01', '9999-12-31', '자녀, 한부모 공제 대상', 'hr_manager'),
('2310019', 3, 'MOTHER', '박순자', '1960-01-01', 'F', 'Y', 'N', 'Y', 'N', '2023-11-01', '9999-12-31', '모', 'hr_manager'),
('2312020', 1, 'MOTHER', '윤정희', '1968-12-24', 'F', 'Y', 'N', 'Y', 'N', '2022-02-10', '9999-12-31', '모', 'hr_manager'),
('2401022', 1, 'SPOUSE', '배서준', '1982-01-18', 'M', 'Y', 'Y', 'Y', 'N', '2008-05-12', '9999-12-31', '배우자', 'hr_manager'),
('2401022', 2, 'DAUGHTER', '최하윤', '2010-02-25', 'F', 'Y', 'Y', 'Y', 'N', '2010-02-25', '9999-12-31', '첫째 자녀', 'hr_manager'),
('2401022', 3, 'SON', '최하람', '2015-11-30', 'M', 'Y', 'Y', 'Y', 'N', '2015-11-30', '9999-12-31', '둘째 자녀', 'hr_manager'),
('2401022', 4, 'FATHER', '최경환', '1950-03-01', 'M', 'Y', 'N', 'Y', 'Y', '2020-03-16', '9999-12-31', '부, 장애인 공제 및 경로 우대 대상', 'hr_manager'),
('2402023', 1, 'ETC', '정다운', '2002-09-17', 'M', 'Y', 'N', 'Y', 'N', '2021-09-01', '2024-02-29', '동생, 대학 졸업으로 부양 종료', 'hr_manager'),
('2402024', 1, 'FATHER', '황대호', '1961-04-19', 'M', 'Y', 'N', 'Y', 'N', '2025-07-01', '9999-12-31', '부', 'hr_manager'),
('2403025', 1, 'SPOUSE', '홍길순', '1984-06-22', 'F', 'Y', 'Y', 'Y', 'N', '2019-08-12', '9999-12-31', '배우자', 'hr_manager'),
('2403025', 2, 'SON', '천명훈', '2021-12-25', 'M', 'Y', 'Y', 'Y', 'N', '2021-12-25', '9999-12-31', '자녀', 'hr_manager'),
('2404026', 1, 'MOTHER', '김미자', '1966-07-20', 'F', 'Y', 'N', 'Y', 'N', '2025-01-02', '9999-12-31', '모', 'system_admin'),
('2404026', 2, 'FATHER', '김영철', '1963-03-15', 'M', 'Y', 'N', 'Y', 'N', '2025-01-02', '9999-12-31', '부', 'system_admin');


-- 급여 절사 이력 --
CREATE TABLE ZHR_PAY_ROUND_HISTORY (
    ROUND_HISTORY_ID  BIGINT         NOT NULL AUTO_INCREMENT COMMENT '절사 이력 ID (PK)',
    ZEMP_NO           VARCHAR(10)    NOT NULL COMMENT '사원번호 (FK: ZHR_EMP_MASTER.PERNR)',
    ZPAY_YM           VARCHAR(6)     NOT NULL COMMENT '급여월 (YYYYMM)',
    ZITEM_CD          VARCHAR(20)    NOT NULL COMMENT '급여 항목 코드 (FK: ZHR_PAY_ITEM.ZITEM_CD)',
    ZRAW_AMT          BIGINT         NOT NULL DEFAULT 0 COMMENT '절사 전 원금액',
    ZROUND_TY         VARCHAR(20)    NOT NULL COMMENT '절사 방식 (WON, TEN, HUNDRED 등)',
    ZROUND_AMT        BIGINT         NOT NULL DEFAULT 0 COMMENT '절사 후 금액 (실제 지급/공제액)',
    ZDIFF_AMT         BIGINT         NOT NULL DEFAULT 0 COMMENT '차액 (ZRAW_AMT - ZROUND_AMT)',
    ZSRC_CD           VARCHAR(20)    NOT NULL COMMENT '절사 기준 항목 코드 (FK: ZHR_PAY_ITEM.ZITEM_CD)',
    ZNOTE             VARCHAR(500)   NULL     COMMENT '절사 기준 설명 및 비고',
    
    -- 버전 및 감사(Audit) 필드
    VERSION           BIGINT         NOT NULL DEFAULT 0 COMMENT '버전 (낙관적 잠금용)',
    CREATED_AT        DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY        VARCHAR(50)    NOT NULL COMMENT '생성자',
    UPDATED_AT        DATETIME       NULL     COMMENT '수정 일시',
    UPDATED_BY        VARCHAR(50)    NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (ROUND_HISTORY_ID),

    -- 비즈니스 키 (사번 + 급여월 + 항목) 고유성 보장
    UNIQUE KEY UK_ZHR_PAY_ROUND_HISTORY_01 (ZEMP_NO, ZPAY_YM, ZITEM_CD),
    
    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZPAY_YM (ZPAY_YM),
    INDEX IDX_ZSRC_CD (ZSRC_CD), -- '절사 기준 항목' FK 인덱스
    INDEX IDX_ZEMP_NO (ZEMP_NO), -- '사번' FK 인덱스
    INDEX IDX_ZITEM_CD (ZITEM_CD), --  '급여 항목' FK 인덱스

    -- 데이터 무결성을 위한 제약 조건
    CONSTRAINT CHK_ZROUND_TY_VALUE CHECK (ZROUND_TY IN ('WON', 'TEN', 'HUNDRED', 'THOUSAND')),
    CONSTRAINT CHK_AMOUNT_VALIDITY CHECK (ZRAW_AMT >= ZROUND_AMT),

    -- 외래 키 제약 조건
    CONSTRAINT FK_ZHR_PAY_ROUND_HISTORY_01 -- 절사 '기준' 항목
        FOREIGN KEY (ZSRC_CD)
        REFERENCES ZHR_PAY_ITEM(ZITEM_CD),
        
    CONSTRAINT FK_ZHR_PAY_ROUND_HISTORY_02 -- 사번
        FOREIGN KEY (ZEMP_NO)
        REFERENCES ZHR_EMP_MASTER(PERNR),
        
    CONSTRAINT FK_ZHR_PAY_ROUND_HISTORY_03 -- 절사 '대상' 항목 (신규 추가)
        FOREIGN KEY (ZITEM_CD)
        REFERENCES ZHR_PAY_ITEM(ZITEM_CD)

) COMMENT '급여 항목별 금액 절사 이력';

-- 더미데이터 --
INSERT INTO ZHR_PAY_ROUND_HISTORY 
(ZEMP_NO, ZPAY_YM, ZITEM_CD, ZRAW_AMT, ZROUND_TY, ZROUND_AMT, ZDIFF_AMT, ZSRC_CD, ZNOTE, VERSION, CREATED_BY) 
VALUES
-- 'EMP1001' -> '2201001' (김철수) / 2025년 9월 (퇴직월)
('2201001', '202509', 'TAX001', 158234, 'WON', 158230, 4, 'TAX001', '소득세법 기준 10원 미만 절사', 0, 'system_batch'),
('2201001', '202509', 'TAX002', 15823, 'WON', 15820, 3, 'TAX001', '소득세분 지방소득세, 소득세법 연동', 0, 'system_batch'),
('2201001', '202509', 'INS001', 265509, 'TEN', 265500, 9, 'INS001', '국민연금법 고지 금액 기준', 0, 'system_batch'),
('2201001', '202509', 'INS002', 210875, 'TEN', 210870, 5, 'INS002', '건강보험법 고지 금액 기준', 0, 'system_batch'),
('2201001', '202509', 'INS003', 27092, 'TEN', 27090, 2, 'INS003', '장기요양보험법 고지 금액 기준', 0, 'system_batch'),
('2201001', '202509', 'INS004', 52981, 'TEN', 52980, 1, 'INS004', '고용보험법 기준 절사', 0, 'system_batch'),
('2201001', '202509', 'PAY009', 1250008, 'TEN', 1250000, 8, 'PAY009', '성과급 지급 규정 10원 단위 절사', 0, 'system_batch'),

-- 'EMP2004' -> '2302013' (송지아) / 2025년 9월
('2302013', '202509', 'TAX001', 89442, 'WON', 89440, 2, 'TAX001', '소득세법 기준 10원 미만 절사', 0, 'system_batch'),
('2302013', '202509', 'TAX002', 8944, 'WON', 8940, 4, 'TAX001', '소득세분 지방소득세, 소득세법 연동', 0, 'system_batch'),
('2302013', '202509', 'INS001', 180001, 'TEN', 180000, 1, 'INS001', '국민연금법 고지 금액 기준', 0, 'system_batch'),
('2302013', '202509', 'INS002', 145678, 'TEN', 145670, 8, 'INS002', '건강보험법 고지 금액 기준', 0, 'system_batch'),
('2302013', '202509', 'INS003', 18721, 'TEN', 18720, 1, 'INS003', '장기요양보험법 고지 금액 기준', 0, 'system_batch'),
('2302013', '202509', 'INS004', 35555, 'TEN', 35550, 5, 'INS004', '고용보험법 기준 절사', 0, 'system_batch'),

-- 'EMP3015' -> '2402024' (백시원) / 2025년 9월
('2402024', '202509', 'TAX001', 310569, 'WON', 310560, 9, 'TAX001', '소득세법 기준 10원 미만 절사', 0, 'system_batch'),
('2402024', '202509', 'TAX002', 31056, 'WON', 31050, 6, 'TAX001', '소득세분 지방소득세, 소득세법 연동', 0, 'system_batch'),
('2402024', '202509', 'INS001', 265500, 'TEN', 265500, 0, 'INS001', '국민연금 상한액, 절사 금액 없음', 0, 'system_batch'),
('2402024', '202509', 'INS002', 288443, 'TEN', 288440, 3, 'INS002', '건강보험법 고지 금액 기준', 0, 'system_batch'),
('2402024', '202509', 'INS003', 37064, 'TEN', 37060, 4, 'INS003', '장기요양보험법 고지 금액 기준', 0, 'system_batch'),
('2402024', '202509', 'INS004', 65547, 'TEN', 65540, 7, 'INS004', '고용보험법 기준 절사', 0, 'system_batch'),

-- 'EMP4210' -> '2503044' (설강민) / 2025년 9월
('2503044', '202509', 'TAX001', 45111, 'WON', 45110, 1, 'TAX001', '소득세법 기준 10원 미만 절사', 0, 'system_batch'),
('2503044', '202509', 'TAX002', 4511, 'WON', 4510, 1, 'TAX001', '소득세분 지방소득세, 소득세법 연동', 0, 'system_batch'),
('2503044', '202509', 'INS001', 166503, 'TEN', 166500, 3, 'INS001', '국민연금법 고지 금액 기준', 0, 'system_batch'),

-- 'EMP1001' -> '2201001' (김철수) / 2025년 8월
('2201001', '202508', 'TAX001', 157998, 'WON', 157990, 8, 'TAX001', '소득세법 기준 10원 미만 절사', 0, 'system_batch'),
('2201001', '202508', 'TAX002', 15799, 'WON', 15790, 9, 'TAX001', '소득세분 지방소득세, 소득세법 연동', 0, 'system_batch'),
('2201001', '202508', 'INS001', 265501, 'TEN', 265500, 1, 'INS001', '국민연금법 고지 금액 기준', 0, 'system_batch'),
('2201001', '202508', 'INS002', 210871, 'TEN', 210870, 1, 'INS002', '건강보험법 고지 금액 기준', 0, 'system_batch'),
('2201001', '202508', 'INS003', 27099, 'TEN', 27090, 9, 'INS003', '장기요양보험법 고지 금액 기준', 0, 'system_batch'),
('2201001', '202508', 'INS004', 52988, 'TEN', 52980, 8, 'INS004', '고용보험법 기준 절사', 0, 'system_batch'),
('2201001', '202508', 'PAY002', 800005, 'TEN', 800000, 5, 'PAY002', '명절 상여금 지급', 0, 'system_batch'),

-- 'EMP2004' -> '2302013' (송지아) / 2025년 8월
('2302013', '202508', 'TAX001', 89333, 'WON', 89330, 3, 'TAX001', '소득세법 기준 10원 미만 절사', 0, 'system_batch'),
('2302013', '202508', 'TAX002', 8933, 'WON', 8930, 3, 'TAX001', '소득세분 지방소득세, 소득세법 연동', 0, 'system_batch'),
('2302013', '202508', 'INS002', 145672, 'TEN', 145670, 2, 'INS002', '건강보험법 고지 금액 기준', 0, 'system_batch');

-- 지급명세표 --
CREATE TABLE ZHR_PAY_CERTIFICATE (
    CERTIFICATE_ID  BIGINT        NOT NULL AUTO_INCREMENT COMMENT '지급명세표 ID (PK)',
    ZCERT_NO        VARCHAR(50)   NOT NULL UNIQUE COMMENT '지급명세표 번호 (화면 표시용/참조용)',
    ZYEAR           VARCHAR(4)    NOT NULL COMMENT '귀속 연도 (YYYY)',
    ZEMP_NO         VARCHAR(10)   NOT NULL COMMENT '사원번호 (FK to ZHR_EMP_MASTER.PERNR)',
    ZPERIOD_TY      VARCHAR(20)   NOT NULL COMMENT '기간 유형 (HALF, MONTH, QUARTER, YEAR 등)',
    
    ZPERIOD_FROM    DATE          NOT NULL COMMENT '귀속 기간 시작일',
    ZPERIOD_TO      DATE          NOT NULL COMMENT '귀속 기간 종료일',
    ZTOT_GROSS      BIGINT        NOT NULL DEFAULT 0 COMMENT '총 지급액 (과세+비과세)',
    ZTOT_TAXABLE    BIGINT        NOT NULL DEFAULT 0 COMMENT '과세 대상 금액',
    ZTOT_NONTAX     BIGINT        NOT NULL DEFAULT 0 COMMENT '비과세 금액',
    ZTOT_TAX        BIGINT        NOT NULL DEFAULT 0 COMMENT '소득세',
    ZTOT_LOCAL_TAX  BIGINT        NOT NULL DEFAULT 0 COMMENT '지방소득세',
    ZTOT_INSURANCE  BIGINT        NOT NULL DEFAULT 0 COMMENT '4대보험 총액',
    ZINSR_DETAIL    VARCHAR(1000) NULL     COMMENT '보험 상세 내역 (JSON 또는 텍스트)',
    ZPAY_COUNT      INT           NOT NULL DEFAULT 0 COMMENT '급여 지급 횟수',
    ZNOTE           VARCHAR(500)  NULL     COMMENT '비고',
    CREATED_AT      DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)   NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME      NULL     COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)   NULL     COMMENT '수정자',
    VERSION         INT           NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금용)',

    -- 기본 키 설정
    PRIMARY KEY (CERTIFICATE_ID),
    
    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZEMP_NO (ZEMP_NO),
    INDEX IDX_ZCERT_NO (ZCERT_NO),
    
    -- 외래 키(FK) 제약 조건
    CONSTRAINT FK_CERT_TO_EMP FOREIGN KEY (ZEMP_NO) 
        REFERENCES ZHR_EMP_MASTER(PERNR)
        ON DELETE RESTRICT 
        ON UPDATE CASCADE
        
) COMMENT '지급명세표(근로소득 원천징수영수증) 정보';


-- 더미 데이터 --
INSERT INTO ZHR_PAY_CERTIFICATE
(ZCERT_NO, ZYEAR, ZEMP_NO, ZPERIOD_TY, ZPERIOD_FROM, ZPERIOD_TO, ZTOT_GROSS, ZTOT_TAXABLE, ZTOT_NONTAX, ZTOT_TAX, ZTOT_LOCAL_TAX, ZTOT_INSURANCE, ZINSR_DETAIL, ZPAY_COUNT, ZNOTE, CREATED_BY)
VALUES
-- '2203004' (최서연)
('2024-2203004-YEAR-2024-01-01', '2024', '2203004', 'YEAR', '2024-01-01', '2024-12-31', 65000000, 62600000, 2400000, 3855000, 385500, 5984000, '국민:2817000, 건강:2200000, 장기:280000, 고용:587000', 12, '2024년 귀속 연말정산', 'admin'),
('2024-2203004-QUARTER-2024-04-01', '2024', '2203004', 'QUARTER', '2024-04-01', '2024-06-30', 16250000, 15650000, 600000, 960000, 96000, 1496000, NULL, 3, '2024년 2분기', 'user_park'),
('2023-2203004-YEAR-2023-01-01', '2023', '2203004', 'YEAR', '2023-01-01', '2023-12-31', 62000000, 59600000, 2400000, 3510000, 351000, 5680000, '국민:2682000, 건강:2100000, 장기:268000, 고용:530000', 12, '2023년 귀속 연말정산', 'admin'),
('2023-2203004-HALF-2023-07-01', '2023', '2203004', 'HALF', '2023-07-01', '2023-12-31', 31000000, 29800000, 1200000, 1750000, 175000, 2840000, NULL, 6, '2023년 하반기 관공서 제출용', 'user_kim'),
('2025-2203004-QUARTER-2025-01-01', '2025', '2203004', 'QUARTER', '2025-01-01', '2025-03-31', 17000000, 16400000, 600000, 1050000, 105000, 1550000, NULL, 3, '2025년 1분기', 'system_batch'),
('2025-2203004-QUARTER-2025-04-01', '2025', '2203004', 'QUARTER', '2025-04-01', '2025-06-30', 17000000, 16400000, 600000, 1050000, 105000, 1550000, NULL, 3, '2025년 2분기', 'system_batch'),
('2025-2203004-MONTH-2025-09-01', '2025', '2203004', 'MONTH', '2025-09-01', '2025-09-30', 5600000, 5400000, 200000, 310000, 31000, 510000, NULL, 1, '2025년 9월분', 'system_batch'),

-- '2207006' (윤서아)
('2024-2207006-YEAR-2024-01-01', '2024', '2207006', 'YEAR', '2024-01-01', '2024-12-31', 42000000, 39600000, 2400000, 1450000, 145000, 3800000, '국민:1782000, 건강:1395000, 장기:178000, 고용:356000', 12, '2024년 귀속 연말정산', 'admin'),
('2023-2207006-YEAR-2023-01-01', '2023', '2207006', 'YEAR', '2023-01-01', '2023-12-31', 38000000, 35600000, 2400000, 1180000, 118000, 3410000, '국민:1602000, 건강:1250000, 장기:158000, 고용:310000', 12, '2023년 귀속 연말정산', 'admin'),
('2023-2207006-MONTH-2023-11-01', '2023', '2207006', 'MONTH', '2023-11-01', '2023-11-30', 3160000, 2960000, 200000, 98000, 9800, 284000, NULL, 1, '2023년 11월분', 'system_batch'),
('2025-2207006-HALF-2025-01-01', '2025', '2207006', 'HALF', '2025-01-01', '2025-06-30', 22000000, 20800000, 1200000, 810000, 81000, 1950000, NULL, 6, '2025년 상반기', 'system_batch'),
('2024-2207006-MONTH-2024-10-01', '2024', '2207006', 'MONTH', '2024-10-01', '2024-10-31', 3500000, 3300000, 200000, 120000, 12000, 316000, NULL, 1, '2024년 10월분', 'system_batch'),

-- '2302013' (송지아)
('2024-2302013-YEAR-2024-01-01', '2024', '2302013', 'YEAR', '2024-01-01', '2024-12-31', 95000000, 92600000, 2400000, 11500000, 1150000, 8310000, '국민:3186000, 건강:3250000, 장기:415000, 고용:859000', 12, '2024년 귀속 연말정산', 'admin'),
('2023-2302013-YEAR-2023-01-01', '2023', '2302013', 'YEAR', '2023-01-01', '2023-12-31', 91000000, 88600000, 2400000, 10800000, 1080000, 7950000, '국민:3042000, 건강:3110000, 장기:398000, 고용:800000', 12, '2023년 귀속 연말정산', 'admin'),
('2023-2302013-QUARTER-2023-10-01', '2023', '2302013', 'QUARTER', '2023-10-01', '2023-12-31', 22750000, 22150000, 600000, 2700000, 270000, 1987500, NULL, 3, '2023년 4분기', 'user_park'),
('2023-2302013-HALF-2023-01-01', '2023', '2302013', 'HALF', '2023-01-01', '2023-06-30', 45500000, 44300000, 1200000, 5400000, 540000, 3975000, NULL, 6, '2023년 상반기', 'user_lee'),
('2025-2302013-MONTH-2025-07-01', '2025', '2302013', 'MONTH', '2025-07-01', '2025-07-31', 8200000, 8000000, 200000, 980000, 98000, 710000, NULL, 1, '2025년 7월분', 'user_kim'),
('2025-2302013-MONTH-2025-08-01', '2025', '2302013', 'MONTH', '2025-08-01', '2025-08-31', 8200000, 8000000, 200000, 980000, 98000, 710000, NULL, 1, '2025년 8월분', 'user_kim'),

-- '2407031' (서재윤)
('2024-2407031-YEAR-2024-07-01', '2024', '2407031', 'YEAR', '2024-07-01', '2024-12-31', 21000000, 19800000, 1200000, 680000, 68000, 1900000, '국민:891000, 건강:697500, 장기:89000, 고용:178000', 6, '2024년 귀속 연말정산 (중도입사)', 'admin'),
('2025-2407031-MONTH-2025-08-01', '2025', '2407031', 'MONTH', '2025-08-01', '2025-08-31', 3500000, 3300000, 200000, 113000, 11300, 316000, NULL, 1, '2025년 8월 급여명세서', 'user_lee'),

-- '2305015' (황수빈)
('2024-2305015-YEAR-2024-01-01', '2024', '2305015', 'YEAR', '2024-01-01', '2024-12-31', 51000000, 48600000, 2400000, 2350000, 235000, 4610000, '국민:2187000, 건강:1710000, 장기:218000, 고용:437000', 12, '2024년 귀속 연말정산', 'admin'),
('2024-2305015-QUARTER-2024-04-01', '2024', '2305015', 'QUARTER', '2024-04-01', '2024-06-30', 12750000, 12150000, 600000, 587500, 58750, 1152500, NULL, 3, '2024년 2분기', 'user_park'),
('2024-2305015-QUARTER-2024-07-01', '2024', '2305015', 'QUARTER', '2024-07-01', '2024-09-30', 12750000, 12150000, 600000, 587500, 58750, 1152500, NULL, 3, '2024년 3분기', 'system_batch'),
('2023-2305015-YEAR-2023-01-01', '2023', '2305015', 'YEAR', '2023-01-01', '2023-12-31', 48000000, 45600000, 2400000, 2100000, 210000, 4320000, '국민:2052000, 건강:1605000, 장기:205000, 고용:400000', 12, '2023년 귀속 연말정산', 'admin'),
('2025-2305015-MONTH-2025-09-01', '2025', '2305015', 'MONTH', '2025-09-01', '2025-09-30', 4500000, 4300000, 200000, 195000, 19500, 400000, NULL, 1, '2025년 9월 급여명세서', 'system_batch');

-- 사내 회비 항목 --
CREATE TABLE ZHR_CLUB_ITEM (
	ID           BIGINT         NOT NULL AUTO_INCREMENT COMMENT '내부 관리용 ID (PK)',
    ZCLUB_CD     VARCHAR(10)    NOT NULL COMMENT '회비 코드 (Biz Key, Unique)',
    ZCLUB_NM      VARCHAR(100)    NOT NULL COMMENT '회비 명칭',
    ZAMOUNT       BIGINT          NOT NULL DEFAULT 0 COMMENT '회비 금액',
    ZUSE_YN       VARCHAR(1)      NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZNOTE         VARCHAR(500)    NULL COMMENT '비고 (금액 변경 이력 등)',
    VERSION      INT            NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락용)',
    CREATED_AT    DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY    VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT    DATETIME        NULL COMMENT '수정 일시',
    UPDATED_BY    VARCHAR(50)     NULL COMMENT '수정자',
    -- 기본 키 설정
    PRIMARY KEY (ID),
    
    --  회비 코드는 중복될 수 없으므로 UNIQUE KEY 설정
    UNIQUE KEY UK_ZCLUB_CD (ZCLUB_CD),
    
    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZCLUB_NM (ZCLUB_NM) -- 회비명으로도 검색할 수 있으므로 인덱스 추가
) COMMENT '사내 회비 항목 마스터';

-- 더미 데이터 --
INSERT INTO ZHR_CLUB_ITEM (ZCLUB_CD, ZCLUB_NM, ZAMOUNT, ZUSE_YN, ZNOTE, CREATED_BY) VALUES
-- 필수/공통 회비
('UNION001', '전사 노동조합비', 25000, 'Y', '매월 급여 공제', 'admin'),
('ASSOC001', '사우회비', 10000, 'Y', '경조사 지원 및 사내 복지 기금', 'admin'),
('MUTUAL01', '상조회비', 5000, 'Y', '본인/가족 조사 발생 시 지원', 'admin'),
('FUND001', '연말 불우이웃돕기 성금', 10000, 'Y', '매년 12월 급여에서 공제', 'user_lee'),

-- 동호회 회비 (사용 중)
('CLUB_HIKE', '한마음 산악회', 20000, 'Y', '매월 정기 산행 및 활동비', 'user_park'),
('CLUB_SOC', '위닝FC (축구 동호회)', 30000, 'Y', '유니폼, 구장 대관료 등', 'user_kim'),
('CLUB_FISH', '강태공 낚시 동호회', 25000, 'Y', '정기 출조 및 장비 구매 지원', 'user_kim'),
('CLUB_BAND', '사내 밴드부', 35000, 'Y', '합주실 대여 및 악기 관리비', 'user_park'),
('CLUB_BOOK', '지식나눔 독서모임', 15000, 'Y', '매월 도서 구매 및 모임 비용', 'user_lee'),
('CLUB_VOL', '사랑나눔 봉사활동', 5000, 'Y', '봉사활동 시 필요한 물품 구매', 'system_batch'),
('CLUB_MOV', '시네마천국 영화감상회', 20000, 'Y', '단체 영화 관람 및 활동비', 'user_lee'),
('CLUB_GAME', '보드게임 동호회', 15000, 'Y', '신규 게임 구매 및 모임 공간 대여', 'user_kim'),
('CLUB_PHOTO', '찰나의순간 사진 동호회', 30000, 'Y', '2025년부터 25,000원에서 인상 적용', 'admin'),
('CLUB_BOWL', '스트라이크 볼링 동호회', 25000, 'Y', '정기전 게임비 및 뒷풀이 지원', 'user_park'),
('CLUB_TENN', '테니스 동호회', 40000, 'Y', '코트 대관 및 레슨비 지원', 'user_kim'),
('CLUB_GOLF', '스크린골프 동호회', 50000, 'Y', '월 2회 정기 모임 비용', 'admin'),
('CLUB_BAD', '배드민턴 동호회', 20000, 'Y', '셔틀콕 구매 및 체육관 대관료', 'user_lee'),
('CLUB_CYCLE', '자전거 동호회', 15000, 'Y', '정기 라이딩 및 안전용품 지원', 'system_batch'),

-- 금액 변경 이력이 있는 항목
('ASSOC002', '개발본부 기술서적 구매펀드', 10000, 'Y', '2024년 하반기 5,000원에서 인상', 'admin'),
('UNION002', '지부 조합비', 15000, 'Y', '2023년 물가상승률 반영하여 인상됨', 'admin'),
('CLUB_SOC2', '여성 풋살 동호회', 20000, 'Y', '2025년 신규 창설. 초기 운영비 포함', 'user_kim'),

-- 사용 중지된 항목
('ASSOC_OLD', '구) 사우회비', 5000, 'N', '2022년 신규 사우회비(ASSOC001)로 통합', 'admin'),
('CLUB_GO', '프로기우 바둑 동호회', 10000, 'N', '2024년 8월부로 활동 중단', 'user_park'),
('TEMP_FUND', '2022년 창립기념일 행사비', 20000, 'N', '일회성 모금 항목. 행사 종료됨', 'system_batch'),
('CLUB_BILL', '당구 동호회', 20000, 'N', '회원 수 부족으로 2023년 해체', 'user_lee'),
('UNION_OLD', '구) 노동조합비', 20000, 'N', '2020년 조합비 개편으로 사용 중지', 'admin'),

-- 기타 항목
('DEPT_MEAL', '영업1팀 점심값 펀드', 50000, 'Y', '팀원 점심 식대 공동 관리', 'user_kim'),
('DEPT_CFE', '디자인팀 커피 구독료', 15000, 'Y', '팀 공용 커피머신 원두 구독', 'user_lee'),
('PARKING', '사내 주차비 (카풀)', 30000, 'Y', '카풀 참여 직원 대상 주차비 지원금', 'system_batch'),
('DONA_CHILD', '결식아동 후원금', 30000, 'Y', '매월 정기 후원', 'admin'),
('GYM_FEE', '사내 헬스장 이용료', 10000, 'Y', '헬스장 관리 및 기구 유지보수', 'system_batch');


-- 사원별 회비 납부 설정 --
CREATE TABLE ZHR_EMP_CLUB (
    ZHR_EMP_CLUB_ID BIGINT          NOT NULL AUTO_INCREMENT COMMENT '사원별 회비 설정 ID (PK)',
    ZEMP_NO         VARCHAR(10)     NOT NULL COMMENT '사원 번호 (FK)',
    ZCLUB_CD        VARCHAR(10)     NOT NULL COMMENT '회비 코드 (FK)',
    ZFROM_DT        DATE            NOT NULL COMMENT '적용 시작일',
    ZTO_DT          DATE            NOT NULL COMMENT '적용 종료일',
    ZPAY_YN         VARCHAR(1)      NOT NULL DEFAULT 'Y' COMMENT '납부 여부 (Y/N)',
    ZNOTE           VARCHAR(500)    NULL COMMENT '비고 (미납 사유 등)',
    
	VERSION         INT           NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락킹용)',
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NULL COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (ZHR_EMP_CLUB_ID),

    -- 비즈니스 규칙에 따른 고유 키 설정 (기간별 중복 방지)
    UNIQUE KEY UK_EMP_CLUB_PERIOD (ZEMP_NO, ZCLUB_CD, ZFROM_DT),

    -- 외래 키 설정 (회비 항목 마스터 테이블 참조)
    FOREIGN KEY (ZCLUB_CD) REFERENCES ZHR_CLUB_ITEM(ZCLUB_CD),
    FOREIGN KEY (ZEMP_NO) REFERENCES ZHR_EMP_MASTER(PERNR),

    -- 제약 조건 설정
    CHECK (ZPAY_YN IN ('Y', 'N')), -- 납부 여부는 'Y' 또는 'N'만 가능
    CHECK (ZTO_DT >= ZFROM_DT),    -- 종료일은 시작일보다 빠를 수 없음

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZEMP_NO (ZEMP_NO),    -- 사번으로 조회
    INDEX IDX_ZCLUB_CD (ZCLUB_CD)   -- 회비코드로 조회

) COMMENT '사원별 회비 납부 설정';

-- 더미데이터 --
INSERT INTO ZHR_EMP_CLUB (ZEMP_NO, ZCLUB_CD, ZFROM_DT, ZTO_DT, ZPAY_YN, ZNOTE, CREATED_BY) VALUES
-- 시나리오 1: 일반적인 사원 (필수 회비 + 동호회 2개) - 대상: '2203004' (최서연)
('2203004', 'UNION001', '2023-01-01', '9999-12-31', 'Y', '입사 시 자동 가입', 'system_batch'),
('2203004', 'ASSOC001', '2023-01-01', '9999-12-31', 'Y', '사우회 가입', 'system_batch'),
('2203004', 'CLUB_HIKE', '2024-03-01', '9999-12-31', 'Y', '산악회 신규 가입', 'user_park'),
('2203004', 'CLUB_BOOK', '2023-05-10', '9999-12-31', 'Y', '독서모임 창립 멤버', 'user_lee'),

-- 시나리오 2: 열정적인 동호회원 (필수 회비 + 동호회 3개 + 헬스장) - 대상: '2207006' (윤서아)
('2207006', 'UNION001', '2022-05-15', '9999-12-31', 'Y', '입사 시 자동 가입', 'system_batch'),
('2207006', 'ASSOC001', '2022-05-15', '9999-12-31', 'Y', '사우회 가입', 'system_batch'),
('2207006', 'CLUB_SOC', '2022-08-01', '9999-12-31', 'Y', '축구 동호회 활동', 'user_kim'),
('2207006', 'CLUB_TENN', '2025-01-01', '9999-12-31', 'Y', '테니스 동호회 가입', 'user_kim'),
('2207006', 'CLUB_PHOTO', '2023-11-20', '9999-12-31', 'Y', '사진 동호회 활동', 'admin'),
('2207006', 'GYM_FEE', '2024-01-01', '2025-12-31', 'Y', '헬스장 2년 이용권', 'system_batch'),

-- 시나리오 3: 휴직자 (필수 회비 납부 일시 중지) - 대상: '2209007' (강도윤)
('2209007', 'UNION001', '2021-09-01', '2024-12-31', 'Y', '휴직 전까지 납부', 'admin'),
('2209007', 'UNION001', '2025-01-01', '2025-12-31', 'N', '2025년 육아휴직으로 인한 납부 면제', 'admin'),
('2209007', 'ASSOC001', '2021-09-01', '9999-12-31', 'Y', '사우회비는 휴직과 관계없이 유지', 'admin'),

-- 시나리오 4: 개발본부 팀원 (기술 펀드 + 팀 펀드 납부) - 대상: '2302013' (송지아)
('2302013', 'UNION001', '2024-02-01', '9999-12-31', 'Y', '입사 시 가입', 'system_batch'),
('2302013', 'ASSOC001', '2024-02-01', '9999-12-31', 'Y', '사우회 가입', 'system_batch'),
('2302013', 'ASSOC002', '2024-02-01', '9999-12-31', 'Y', '개발본부 기술서적 구매펀드 참여', 'admin'),
('2302013', 'DEPT_CFE', '2025-01-01', '2025-12-31', 'Y', '디자인팀 소속으로 커피 구독료 납부', 'user_lee'),
('2302013', 'CLUB_GAME', '2024-07-01', '9999-12-31', 'Y', '보드게임 동호회 활동', 'user_kim'),

-- 시나리오 5: 영업팀 팀원 (팀 점심값 펀드 + 카풀 이용) - 대상: '2305015' (황수빈)
('2305015', 'UNION001', '2020-03-01', '9999-12-31', 'Y', '기존 가입자', 'admin'),
('2305015', 'ASSOC001', '2020-03-01', '9999-12-31', 'Y', '기존 가입자', 'admin'),
('2305015', 'DEPT_MEAL', '2025-01-01', '2025-06-30', 'Y', '상반기 영업1팀 점심값 펀드', 'user_kim'),
('2305015', 'PARKING', '2025-07-01', '9999-12-31', 'Y', '카풀 참여로 주차비 지원 대상', 'system_batch'),
('2305015', 'CLUB_GOLF', '2023-02-01', '9999-12-31', 'Y', '스크린골프 동호회', 'admin'),

-- 시나리오 6: 과거 동호회 활동 이력 보유자 - 대상: '2211010' (오시우)
('2211010', 'UNION001', '2019-11-01', '9999-12-31', 'Y', NULL, 'admin'),
('2211010', 'ASSOC001', '2019-11-01', '9999-12-31', 'Y', NULL, 'admin'),
('2211010', 'CLUB_GO', '2022-01-01', '2024-07-31', 'Y', '바둑 동호회 활동 중단으로 종료 처리', 'user_park'),
('2211010', 'CLUB_FISH', '2024-09-01', '9999-12-31', 'Y', '낚시 동호회로 이전 가입', 'user_kim'),

-- 시나리오 7: 정기 후원 및 일회성 기부 참여 - 대상: '2401022' (홍예준)
('2401022', 'UNION001', '2023-08-01', '9999-12-31', 'Y', NULL, 'system_batch'),
('2401022', 'ASSOC001', '2023-08-01', '9999-12-31', 'Y', NULL, 'system_batch'),
('2401022', 'FUND001', '2025-12-01', '2025-12-31', 'Y', '2025년 연말 불우이웃돕기 성금', 'user_lee'),
('2401022', 'DONA_CHILD', '2024-01-01', '9999-12-31', 'Y', '결식아동 정기 후원 신청', 'admin'),
('2401022', 'CLUB_VOL', '2023-10-01', '9999-12-31', 'Y', '봉사활동 동호회 가입', 'system_batch'),

-- 시나리오 8: 신규 여성 풋살 동호회 가입자 - 대상: '2403025' (노하린)
('2403025', 'UNION001', '2025-01-15', '9999-12-31', 'Y', NULL, 'system_batch'),
('2403025', 'ASSOC001', '2025-01-15', '9999-12-31', 'Y', NULL, 'system_batch'),
('2403025', 'CLUB_SOC2', '2025-04-01', '9999-12-31', 'Y', '여성 풋살 동호회 창립 멤버', 'user_kim'),
('2403025', 'CLUB_CYCLE', '2025-05-01', '9999-12-31', 'Y', '자전거 동호회 가입', 'system_batch');


-- 납부 내역 기록 (중심 테이블) --
CREATE TABLE ZHR_CLUB_PAY_DETAIL (
    -- 기본 키 컬럼 (PK) - Surrogate Key
    ID              BIGINT          NOT NULL AUTO_INCREMENT COMMENT '내부 관리용 ID (PK)',

    -- Business Key 컬럼 (Unique)
    ZEMP_NO         VARCHAR(10)     NOT NULL COMMENT '사번 (FK to ZHR_EMP_MASTER.PERNR)',
    ZPAY_YM         CHAR(6)         NOT NULL COMMENT '납부월 (YYYYMM)',
    ZCLUB_CD        VARCHAR(10)     NOT NULL COMMENT '회비 코드 (FK to ZHR_CLUB_ITEM.ZCLUB_CD)',

    -- 데이터 컬럼
    ZAMOUNT         BIGINT          NOT NULL DEFAULT 0 COMMENT '납부금액 (Biz Rule: > 0)',
    ZNOTE           VARCHAR(500)    NULL COMMENT '비고 (경조사, 특별 납부, 면제 후 자율 납부 등 특이사항)',

    -- 데이터 버전 관리 (낙관적 락용)
    VERSION         INT             NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락용)',

    -- 감사(Audit) 필드
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NULL COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL COMMENT '수정자',

    -- 기본 키 설정 (Surrogate Key)
    PRIMARY KEY (ID),

    -- 비즈니스 키 (Unique Key) 설정 (명세서 5번: 중복 불가 조건)
    UNIQUE KEY UK_PAY_DETAIL (ZEMP_NO, ZPAY_YM, ZCLUB_CD) COMMENT '사번+납부월+회비코드 중복 방지',

    -- 외래 키 설정 (명세서 3번 항목: 테이블 연계 구조)
    CONSTRAINT FK_PAY_DETAIL_TO_EMP 
        FOREIGN KEY (ZEMP_NO) 
        REFERENCES ZHR_EMP_MASTER (PERNR),
        
    CONSTRAINT FK_PAY_DETAIL_TO_ITEM
        FOREIGN KEY (ZCLUB_CD) 
        REFERENCES ZHR_CLUB_ITEM (ZCLUB_CD),

    -- 검색 성능 향상을 위한 인덱스 (명세서 4번 [A] 검색 조건)
    INDEX IDX_PAY_YM (ZPAY_YM),     -- 납부월 기준 조회
    INDEX IDX_CLUB_CD (ZCLUB_CD)    -- 회비 항목별 조회

) COMMENT '사내 회비 납부 실적 내역 (중심 테이블)';


-- 더미 데이터 --
/*
-- ZHR_CLUB_PAY_DETAIL (사내 회비 납부 내역) 더미 데이터
-- 기준 월: 2025년 1월, 2월, 3월
-- 생성 로직: ZHR_EMP_CLUB에 ZPAY_YN='Y'이고, ZHR_EMP_MASTER에 재직 중이며, 납부 기간(ZFROM_DT~ZTO_DT)이 유효한 건에 대해 ZHR_CLUB_ITEM의 ZAMOUNT를 기준으로 INSERT
*/
INSERT INTO ZHR_CLUB_PAY_DETAIL
(ZEMP_NO, ZPAY_YM, ZCLUB_CD, ZAMOUNT, ZNOTE, CREATED_BY)
VALUES

-- =================================================================
-- 2025년 1월 납부 내역 (202501)
-- =================================================================

-- 시나리오 1: '2203004' (최서연) - 4건
('2203004', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2203004', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2203004', '202501', 'CLUB_HIKE', 20000, '정기 납부', 'system_batch'),
('2203004', '202501', 'CLUB_BOOK', 15000, '정기 납부', 'system_batch'),

-- 시나리오 2: '2207006' (윤서아) - 6건 (CLUB_TENN 1월부터 시작)
('2207006', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2207006', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2207006', '202501', 'CLUB_SOC', 30000, '정기 납부', 'system_batch'),
('2207006', '202501', 'CLUB_TENN', 40000, '2025년 신규 가입', 'system_batch'),
('2207006', '202501', 'CLUB_PHOTO', 30000, '정기 납부 (인상분 적용)', 'system_batch'),
('2207006', '202501', 'GYM_FEE', 10000, '정기 납부', 'system_batch'),

-- 시나리오 3: '2209007' (강도윤) - 1건 (UNION001은 'N'이라 제외, ASSOC001만 납부)
('2209007', '202501', 'ASSOC001', 10000, '휴직 중 정기 납부', 'system_batch'),

-- 시나리오 4: '2302013' (송지아) - 5건 (DEPT_CFE 1월부터 시작)
('2302013', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2302013', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2302013', '202501', 'ASSOC002', 10000, '정기 납부', 'system_batch'),
('2302013', '202501', 'DEPT_CFE', 15000, '2025년 신규 납부', 'system_batch'),
('2302013', '202501', 'CLUB_GAME', 15000, '정기 납부', 'system_batch'),

-- 시나리오 5: '2305015' (황수빈) - 4건 (DEPT_MEAL 1월부터 시작, PARKING은 7월부터라 제외)
('2305015', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2305015', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2305015', '202501', 'DEPT_MEAL', 50000, '상반기 펀드 시작', 'system_batch'),
('2305015', '202501', 'CLUB_GOLF', 50000, '정기 납부', 'system_batch'),

-- 시나리오 6: '2211010' (오시우) - 3건 (CLUB_GO는 종료되어 제외)
('2211010', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2211010', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2211010', '202501', 'CLUB_FISH', 25000, '정기 납부', 'system_batch'),

-- 시나리오 7: '2401022' (홍예준) - 4건 (FUND001은 12월이라 제외)
('2401022', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2401022', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2401022', '202501', 'DONA_CHILD', 30000, '정기 후원', 'system_batch'),
('2401022', '202501', 'CLUB_VOL', 5000, '정기 납부', 'system_batch'),

-- 시나리오 8: '2403025' (노하린) - 2건 (CLUB_SOC2는 4월, CLUB_CYCLE은 5월부터라 제외)
('2403025', '202501', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2403025', '202501', 'ASSOC001', 10000, '정기 납부', 'system_batch'),


-- =================================================================
-- 2025년 2월 납부 내역 (202502)
-- =================================================================

-- 시나리오 1: '2203004' (최서연) - 4건
('2203004', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2203004', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2203004', '202502', 'CLUB_HIKE', 20000, '정기 납부', 'system_batch'),
('2203004', '202502', 'CLUB_BOOK', 15000, '정기 납부', 'system_batch'),

-- 시나리오 2: '2207006' (윤서아) - 6건
('2207006', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2207006', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2207006', '202502', 'CLUB_SOC', 30000, '정기 납부', 'system_batch'),
('2207006', '202502', 'CLUB_TENN', 40000, '정기 납부', 'system_batch'),
('2207006', '202502', 'CLUB_PHOTO', 30000, '정기 납부', 'system_batch'),
('2207006', '202502', 'GYM_FEE', 10000, '정기 납부', 'system_batch'),

-- 시나리오 3: '2209007' (강도윤) - 1건 (ASSOC001만 납부)
('2209007', '202502', 'ASSOC001', 10000, '휴직 중 정기 납부', 'system_batch'),

-- 시나리오 4: '2302013' (송지아) - 5건
('2302013', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2302013', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2302013', '202502', 'ASSOC002', 10000, '정기 납부', 'system_batch'),
('2302013', '202502', 'DEPT_CFE', 15000, '정기 납부', 'system_batch'),
('2302013', '202502', 'CLUB_GAME', 15000, '정기 납부', 'system_batch'),

-- 시나리오 5: '2305015' (황수빈) - 4건
('2305015', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2305015', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2305015', '202502', 'DEPT_MEAL', 50000, '정기 납부', 'system_batch'),
('2305015', '202502', 'CLUB_GOLF', 50000, '정기 납부', 'system_batch'),

-- 시나리오 6: '2211010' (오시우) - 3건
('2211010', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2211010', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2211010', '202502', 'CLUB_FISH', 25000, '정기 납부', 'system_batch'),

-- 시나리오 7: '2401022' (홍예준) - 4건
('2401022', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2401022', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2401022', '202502', 'DONA_CHILD', 30000, '정기 후원', 'system_batch'),
('2401022', '202502', 'CLUB_VOL', 5000, '정기 납부', 'system_batch'),

-- 시나리오 8: '2403025' (노하린) - 2건
('2403025', '202502', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2403025', '202502', 'ASSOC001', 10000, '정기 납부', 'system_batch'),


-- =================================================================
-- 2025년 3월 납부 내역 (202503)
-- [!] 비즈니스 룰 6번 (예외 케이스) 포함
-- =================================================================

-- 시나리오 1: '2203004' (최서연) - 4건
('2203004', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2203004', '202503', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2203004', '202503', 'CLUB_HIKE', 20000, '정기 납부', 'system_batch'),
('2203004', '202503', 'CLUB_BOOK', 15000, '정기 납부', 'system_batch'),

-- 시나리오 2: '2207006' (윤서아) - 6건
('2207006', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2207006', '202503', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2207006', '202503', 'CLUB_SOC', 30000, '정기 납부', 'system_batch'),
('2207006', '202503', 'CLUB_TENN', 40000, '정기 납부', 'system_batch'),
('2207006', '202503', 'CLUB_PHOTO', 30000, '정기 납부', 'system_batch'),
('2207006', '202503', 'GYM_FEE', 10000, '정기 납부', 'system_batch'),

-- 시나리오 3: '2209007' (강도윤) - 2건
-- [예외 케이스 1] '면제 후 자율 납부' (비즈니스 룰 6번)
-- ZHR_EMP_CLUB에는 UNION001이 'N'(면제)이지만, ZNOTE에 '자율 납부'를 기재하고 5000원(기준금액 25000원과 다름) 납부
('2209007', '202503', 'ASSOC001', 10000, '휴직 중 정기 납부', 'system_batch'),
('2209007', '202503', 'UNION001', 5000, '휴직 중 자율 납부 (면제 대상)', 'hr_admin'),

-- 시나리오 4: '2302013' (송지아) - 5건
('2302013', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2302013', '202503', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2302013', '202503', 'ASSOC002', 10000, '정기 납부', 'system_batch'),
('2302013', '202503', 'DEPT_CFE', 15000, '정기 납부', 'system_batch'),
('2302013', '202503', 'CLUB_GAME', 15000, '정기 납부', 'system_batch'),

-- 시나리오 5: '2305015' (황수빈) - 4건
('2305015', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2305015', '202503', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2305015', '202503', 'DEPT_MEAL', 50000, '정기 납부', 'system_batch'),
('2305015', '202503', 'CLUB_GOLF', 50000, '정기 납부', 'system_batch'),

-- 시나리오 6: '2211010' (오시우) - 3건
('2211010', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2211010', '202503', 'ASSOC001', 10000, '정기 납부', 'system_batch'),
('2211010', '202503', 'CLUB_FISH', 25000, '정기 납부', 'system_batch'),

-- 시나리오 7: '2401022' (홍예준) - 4건
-- [예외 케이스 2] '경조사비 특별 납부' (비즈니스 룰 6번)
-- ASSOC001(사우회비)의 기준금액은 10,000원이지만, 3월에 경조사비 100,000원을 추가 납부하여 총 110,000원 납부
('2401022', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2401022', '202503', 'ASSOC001', 110000, '정기 사우회비 10,000 + 본인 결혼 경조 100,000', 'hr_admin'),
('2401022', '202503', 'DONA_CHILD', 30000, '정기 후원', 'system_batch'),
('2401022', '202503', 'CLUB_VOL', 5000, '정기 납부', 'system_batch'),

-- 시나리오 8: '2403025' (노하린) - 2건 (다른 항목들은 4월, 5월 시작)
('2403025', '202503', 'UNION001', 25000, '정기 납부', 'system_batch'),
('2403025', '202503', 'ASSOC001', 10000, '정기 납부', 'system_batch');


-- 근로자별 시간외근무 실적 --
CREATE TABLE ZHR_OVERTIME_DETAIL (
    ZHR_OVERTIME_DETAIL_ID BIGINT       NOT NULL AUTO_INCREMENT COMMENT '시간외근무 실적 ID (PK)',
    ZEMP_NO                VARCHAR(10)  NOT NULL COMMENT '사원 번호 (FK, ZHR_EMP_MASTER.PERNR 참조)',
    ZDATE                  DATE         NOT NULL COMMENT '근무 일자',
    ZHOURS                 DECIMAL(5,2) NOT NULL COMMENT '근로 시간',
    ZTYPE                  VARCHAR(10)  NOT NULL COMMENT '근로 유형 (OVERTIME, NIGHT, HOLIDAY)',
    ZNOTE                  VARCHAR(500) NULL     COMMENT '비고 (사유 등)',
    CREATED_AT             DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY             VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT             DATETIME     NULL     COMMENT '수정 일시',
    UPDATED_BY             VARCHAR(50)  NULL     COMMENT '수정자',
    VERSION                INT          NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금용)', 

    -- 기본 키 설정
    PRIMARY KEY (ZHR_OVERTIME_DETAIL_ID),

    -- 비즈니스 규칙에 따른 고유 키 설정 (중복 입력 방지)
    UNIQUE KEY UK_OVERTIME_UNIQUE (ZEMP_NO, ZDATE, ZTYPE),

    -- 2. 외래 키 설정 (사원 마스터 테이블 참조)
    FOREIGN KEY (ZEMP_NO) REFERENCES ZHR_EMP_MASTER(PERNR),

    -- 제약 조건 설정
    CHECK (ZHOURS > 0), -- 근로시간은 0보다 커야 함
    CHECK (ZTYPE IN ('OVERTIME', 'NIGHT', 'HOLIDAY')), -- 정의된 근로 유형만 허용

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZEMP_NO (ZEMP_NO),   -- 사번으로 조회
    INDEX IDX_ZDATE (ZDATE)        -- 근무일자로 조회

) COMMENT '시간외근무 실적 상세';

-- 더미 데이터 --
INSERT INTO ZHR_OVERTIME_DETAIL (ZEMP_NO, ZDATE, ZHOURS, ZTYPE, ZNOTE, CREATED_BY) VALUES
-- '2201001' (김철수): 2025-09-30 퇴사. 모든 실적이 퇴사일 이전이므로 유효.
('2201001', '2024-11-28', 2.5, 'OVERTIME', '4분기 프로젝트 제안서 마감', 'user_park'),
('2201001', '2025-02-10', 3.0, 'OVERTIME', '월간 실적 보고서 작성', 'user_lee'),
('2201001', '2025-06-01', 8.0, 'HOLIDAY', '주말 시스템 업데이트 지원 근무', 'admin'),
('2201001', '2025-08-22', 2.0, 'NIGHT', '야간 긴급 서버 패치 작업', 'system_batch'),

-- '2201002' (이영희): 2025-01-31 퇴사. 퇴사일 이전 실적은 유지.
('2201002', '2024-10-15', 4.0, 'OVERTIME', '신규 서비스 기획안 최종 검토', 'user_kim'),
('2201002', '2025-01-28', 8.0, 'HOLIDAY', '설 연휴 기간 서비스 모니터링', 'admin'),
-- (수정) 2025-03-25 실적 -> 재직자 '2203004' (최서연)에게 배분
('2203004', '2025-03-25', 3.0, 'NIGHT', '해외 지사 화상회의로 인한 야간 근무', 'user_kim'),
-- (수정) 2025-07-31 실적 -> 재직자 '2207006' (윤서아)에게 배분
('2207006', '2025-07-31', 3.5, 'OVERTIME', '반기 마감 실적 취합', 'user_kim'),

-- '2203003' (박민준): 2025-10-29 퇴사. 모든 실적이 퇴사일 이전이므로 유효.
('2203003', '2024-09-10', 2.0, 'OVERTIME', '업무 인수인계 자료 작성', 'admin'),
('2203003', '2024-11-05', 3.0, 'OVERTIME', '휴직 전 최종 보고서 제출', 'admin'),
('2203003', '2024-12-20', 1.5, 'OVERTIME', '팀 비품 정리 및 인수인계', 'admin'),

-- '2203004' (최서연): 재직자.
('2203004', '2024-12-20', 4.0, 'NIGHT', '연말 정기 시스템 배포', 'system_batch'),
('2203004', '2025-01-11', 8.0, 'HOLIDAY', '주말 긴급 장애 대응', 'admin'),
('2203004', '2025-04-16', 3.0, 'NIGHT', '신규 기능 릴리즈 야간 작업', 'system_batch'),
('2203004', '2025-05-25', 4.5, 'OVERTIME', '기술 부채 해결을 위한 집중 근무', 'user_lee'),
('2203004', '2025-08-01', 2.0, 'NIGHT', 'DB 마이그레이션 모니터링', 'system_batch'),

-- '2207005' (정지훈): 2025-02-28 퇴사. 퇴사일 당일 실적은 유지.
('2207005', '2025-02-28', 3.0, 'OVERTIME', '2월 영업 실적 마감 정산', 'user_kim'),
-- (수정) 2025-05-15 실적 -> 재직자 '2209007' (강도윤)에게 배분
('2209007', '2025-05-15', 8.0, 'HOLIDAY', '고객사 주말 워크샵 기술 지원', 'user_kim'),
-- (수정) 2025-06-20 실적 -> 재직자 '2210009' (한지우)에게 배분
('2210009', '2025-06-20', 2.0, 'OVERTIME', '주요 고객사 저녁 미팅', 'admin'),
-- (수정) 2025-09-25 실적 -> 재직자 '2211010' (오시우)에게 배분
('2211010', '2025-09-25', 2.5, 'OVERTIME', '3분기 마감 대비 계약서 검토', 'user_kim'),

-- '2207006' (윤서아): 재직자.
('2207006', '2024-08-15', 8.0, 'HOLIDAY', '광복절 대체 근무', 'user_park'),
('2207006', '2025-01-02', 2.0, 'OVERTIME', '연초 업무 계획 수립', 'admin'),
('2207006', '2025-06-06', 8.0, 'HOLIDAY', '현충일 당직 근무', 'admin'),

-- '2209007' (강도윤): 재직자.
('2209007', '2024-12-24', 4.0, 'OVERTIME', '연말 봉사활동 행사 준비', 'user_lee'),
('2209007', '2025-05-05', 8.0, 'HOLIDAY', '어린이날 기념 행사 지원', 'system_batch'),
('2209007', '2025-07-10', 3.0, 'NIGHT', '해외 후원 재단과 야간 통화', 'admin'),

-- '2210008' (임하윤): 2025-03-31 퇴사. 퇴사일 이전 실적은 유지.
('2210008', '2025-03-20', 1.5, 'OVERTIME', '신규입사자 OJT 교육 참여', 'system_batch'),
-- (수정) 2025-06-18 실적 -> 재직자 '2302013' (송지아)에게 배분
('2302013', '2025-06-18', 2.0, 'OVERTIME', '상반기 성과 리뷰 준비', 'user_kim'),
-- (수정) 2025-09-01 실적 -> 재직자 '2305015' (황수빈)에게 배분
('2305015', '2025-09-01', 3.0, 'OVERTIME', '하반기 사업 전략 수립 지원', 'user_kim'),

-- '2210009' (한지우): 재직자. (회계팀)
('2210009', '2025-03-31', 4.0, 'OVERTIME', '1분기 재무제표 마감', 'admin'),
('2210009', '2025-04-01', 3.0, 'NIGHT', '감사 대응 자료 야간 준비', 'admin'),
('2210009', '2025-06-30', 4.0, 'OVERTIME', '상반기 결산 작업', 'admin'),
('2210009', '2025-07-01', 8.0, 'HOLIDAY', '결산 관련 시스템 점검', 'system_batch'),

-- '2211010' (오시우): 재직자. (인프라팀)
('2211010', '2025-02-15', 8.0, 'HOLIDAY', '데이터센터 이전 작업', 'system_batch'),
('2211010', '2025-02-16', 6.0, 'HOLIDAY', '데이터센터 이전 후 안정화 작업', 'system_batch'),
('2211010', '2025-07-12', 4.0, 'NIGHT', '네트워크 장비 교체 및 야간 모니터링', 'system_batch');

-- 간이세액표 -- 
CREATE TABLE ZHR_SIMPLIFIED_TAX_TABLE (
    -- 1. ID 및 버전 필드
    ZTAX_ID         BIGINT        NOT NULL AUTO_INCREMENT COMMENT '행 고유 ID (자동 증가)',
    ZVERSION        INT           NOT NULL DEFAULT 0 COMMENT '데이터 버전 (Optimistic Lock용)',

    -- 2. 핵심 데이터 필드 (스토리보드 기준)
    ZYEAR           CHAR(4)       NOT NULL COMMENT '기준 연도 (YYYY)',
    ZFAMILY_CNT     INT           NOT NULL COMMENT '공제 대상 가족 수 (본인 포함)',
    ZINCOME_AMT     BIGINT        NOT NULL COMMENT '월 소득 기준 금액 (소득 구간의 하한값)',
    ZTAX_PC         DECIMAL(5, 2) NULL     COMMENT '소득세율 (%)',
    ZLOCAL_PC       DECIMAL(5, 2) NULL     COMMENT '지방소득세율 (%)',
    ZTOTAL_TAX      BIGINT        NULL     COMMENT '총 세액 (세율 대신 고정 금액 적용 시)',
    ZUSE_YN         CHAR(1)       NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y: 사용, N: 미사용)',
    ZNOTE           VARCHAR(500)  NULL     COMMENT '비고 사항',

    -- 3. 감사 필드 (Audit Fields)
    CREATED_BY      VARCHAR(100)  NULL     COMMENT '생성자 ID',
    CREATED_AT      DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성일시',
    UPDATED_BY      VARCHAR(100)  NULL     COMMENT '수정자 ID',
    UPDATED_AT      DATETIME      NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '수정일시',

    -- 4. 제약 조건 (Constraints)
    -- 기본 키 (Primary Key): 자동 증가 ID 사용
    PRIMARY KEY (ZTAX_ID),

    -- 비즈니스 제약 (Unique Constraint): "동일 연도·가족 수 조합에서 ZINCOME_AMT 중복 불가"
    UNIQUE KEY UK_ZHR_TAX_BIZ_KEY (ZYEAR, ZFAMILY_CNT, ZINCOME_AMT),

    -- 검증 조건 (Check Constraints)
    
    CHECK (ZTAX_PC BETWEEN 0 AND 100),     -- 0~100 사이 값
    CHECK (ZLOCAL_PC BETWEEN 0 AND 100),   -- 0~100 사이 값
    CHECK (ZUSE_YN IN ('Y', 'N')),         -- 'Y' 또는 'N'만 허용
    CHECK (ZINCOME_AMT >= 0),              -- 소득은 0 이상
    CHECK (ZFAMILY_CNT >= 0)               -- 가족 수는 0 이상 (본인만 해당)
    
) COMMENT = '간이세액표 기준 관리 테이블';

-- 더미데이터 -- 
INSERT INTO ZHR_SIMPLIFIED_TAX_TABLE 
(ZYEAR, ZFAMILY_CNT, ZINCOME_AMT, ZTAX_PC, ZLOCAL_PC, ZTOTAL_TAX, ZNOTE, CREATED_BY) 
VALUES

-- [2024년 기준 데이터] (국세청 자료 일괄 업로드) --

-- 2024년 / 1인 가구 (본인)
('2024', 1, 0,       NULL, NULL, 0,      '비과세 구간', 'batch_upload'),
('2024', 1, 2000000, NULL, NULL, 22000,  '월 소득 200만원 이상 ~ 250만원 미만', 'batch_upload'),
('2024', 1, 2500000, NULL, NULL, 55000,  '월 소득 250만원 이상 ~ 300만원 미만', 'batch_upload'),
('2024', 1, 3000000, NULL, NULL, 98000,  '월 소득 300만원 이상 ~ 350만원 미만', 'batch_upload'),
('2024', 1, 4000000, NULL, NULL, 185000, '월 소득 400만원 이상 ~ 450만원 미만', 'batch_upload'),
('2024', 1, 5000000, NULL, NULL, 310000, '월 소득 500만원 이상 ~ 550만원 미만', 'batch_upload'),

-- 2024년 / 2인 가구 (본인 + 1)
('2024', 2, 0,       NULL, NULL, 0,      '비과세 구간', 'batch_upload'),
('2024', 2, 2000000, NULL, NULL, 10000,  '월 소득 200만원 이상 ~ 250만원 미만', 'batch_upload'),
('2024', 2, 2500000, NULL, NULL, 34000,  '월 소득 250만원 이상 ~ 300만원 미만', 'batch_upload'),
('2024', 2, 3000000, NULL, NULL, 72000,  '월 소득 300만원 이상 ~ 350만원 미만', 'batch_upload'),
('2024', 2, 4000000, NULL, NULL, 151000, '월 소득 400만원 이상 ~ 450만원 미만', 'batch_upload'),
('2024', 2, 5000000, NULL, NULL, 265000, '월 소득 500만원 이상 ~ 550만원 미만', 'batch_upload'),

-- 2024년 / 3인 가구 (본인 + 2)
('2024', 3, 0,       NULL, NULL, 0,      '비과세 구간', 'batch_upload'),
('2024', 3, 2000000, NULL, NULL, 0,      '비과세 구간', 'batch_upload'),
('2024', 3, 2500000, NULL, NULL, 15000,  '월 소득 250만원 이상 ~ 300만원 미만', 'batch_upload'),
('2024', 3, 3000000, NULL, NULL, 48000,  '월 소득 300만원 이상 ~ 350만원 미만', 'batch_upload'),
('2024', 3, 4000000, NULL, NULL, 120000, '월 소득 400만원 이상 ~ 450만원 미만', 'batch_upload'),
('2024', 3, 5000000, NULL, NULL, 225000, '월 소득 500만원 이상 ~ 550만원 미만', 'batch_upload'),


-- [2025년 기준 데이터] (국세청 자료 일괄 업로드) --

-- 2025년 / 1인 가구 (본인)
('2025', 1, 0,       NULL, NULL, 0,      '비과세 구간', 'system_admin'),
('2025', 1, 2000000, NULL, NULL, 23000,  '월 소득 200만원 이상 ~ 250만원 미만', 'system_admin'),
('2025', 1, 2500000, NULL, NULL, 57000,  '월 소득 250만원 이상 ~ 300만원 미만', 'system_admin'),
('2025', 1, 3000000, NULL, NULL, 101000, '월 소득 300만원 이상 ~ 350만원 미만', 'system_admin'),
('2025', 1, 4000000, NULL, NULL, 190000, '월 소득 400만원 이상 ~ 450만원 미만', 'system_admin'),
('2025', 1, 5000000, NULL, NULL, 318000, '월 소득 500만원 이상 ~ 550만원 미만', 'system_admin'),

-- 2025년 / 2인 가구 (본인 + 1)
('2025', 2, 0,       NULL, NULL, 0,      '비과세 구간', 'system_admin'),
('2025', 2, 2000000, NULL, NULL, 11000,  '월 소득 200만원 이상 ~ 250만원 미만', 'system_admin'),
('2025', 2, 2500000, NULL, NULL, 36000,  '월 소득 250만원 이상 ~ 300만원 미만', 'system_admin'),
('2025', 2, 3000000, NULL, NULL, 75000,  '월 소득 300만원 이상 ~ 350만원 미만', 'system_admin'),
('2025', 2, 4000000, NULL, NULL, 155000, '월 소득 400만원 이상 ~ 450만원 미만', 'system_admin'),
('2025', 2, 5000000, NULL, NULL, 270000, '월 소득 500만원 이상 ~ 550만원 미만', 'system_admin'),

-- 2025년 / 3인 가구 (본인 + 2)
('2025', 3, 0,       NULL, NULL, 0,      '비과세 구간', 'system_admin'),
('2025', 3, 2000000, NULL, NULL, 0,      '비과세 구간', 'system_admin'),
('2025', 3, 2500000, NULL, NULL, 16000,  '월 소득 250만원 이상 ~ 300만원 미만', 'system_admin'),
('2025', 3, 3000000, NULL, NULL, 50000,  '월 소득 300만원 이상 ~ 350만원 미만', 'system_admin'),
('2025', 3, 4000000, NULL, NULL, 124000, '월 소득 400만원 이상 ~ 450만원 미만', 'system_admin'),
('2025', 3, 5000000, NULL, NULL, 230000, '월 소득 500만원 이상 ~ 550만원 미만', 'system_admin'),

-- (예외 케이스) 세율(%) 기반으로 계산하는 경우 (스토리보드 5번 조건)
('2025', 1, 10000000, 24.00, 2.40, NULL, '고소득자 구간, 세율 기반 계산', 'system_admin');

-- 급여 항목 계산 우선순위 --
CREATE TABLE ZHR_CALC_ORDER (
    
    CALC_ID       BIGINT         NOT NULL AUTO_INCREMENT COMMENT '순서 관리 ID (PK)',
    
    ZITEM_CD      VARCHAR(20)    NOT NULL COMMENT '항목 코드 (FK from ZHR_PAY_ITEM, UK)',
    ZORDER        INT            NOT NULL COMMENT '계산 순서',
    ZGROUP_CD     VARCHAR(20)    NOT NULL COMMENT '계산 그룹 (TAX, INSURANCE, ALLOW 등)',
    ZDEPENDS_ON   VARCHAR(20)    NULL     COMMENT '선행(의존) 항목 코드 (Self-reference)',
    ZNOTE         VARCHAR(500)   NULL     COMMENT '설명',
    ZUSE_YN       CHAR(1)        NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    
    --  데이터 버전 관리 (낙관적 락)
    ZVERSION      INT            NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락용)',
    
    -- 감사 컬럼
    CREATED_AT    DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY    VARCHAR(50)    NOT NULL COMMENT '생성자',
    UPDATED_AT    DATETIME       NULL     COMMENT '수정 일시',
    UPDATED_BY    VARCHAR(50)    NULL     COMMENT '수정자',

    -- 기본 키 설정 
    PRIMARY KEY (CALC_ID),

    --  항목 코드의 고유성 보장 
    UNIQUE KEY UK_ZITEM_CD (ZITEM_CD),

    -- 비즈니스 규칙에 따른 고유 키 설정 (그룹 내 계산 순서 중복 방지)
    UNIQUE KEY UK_CALC_ORDER_UNIQUE (ZGROUP_CD, ZORDER),

    -- 외래 키 설정
    -- ZHR_PAY_ITEM 테이블의 항목 코드를 참조 (항목 정의의 무결성)
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),
    -- 선행 항목은 ZHR_CALC_ORDER 테이블 내 다른 항목 코드를 참조 (의존성 관계의 무결성)
    FOREIGN KEY (ZDEPENDS_ON) REFERENCES ZHR_CALC_ORDER(ZITEM_CD),

    -- 제약 조건 설정
    CHECK (ZUSE_YN IN ('Y', 'N')), -- 사용 여부는 'Y' 또는 'N'만 허용
    CHECK (ZORDER > 0),            -- 계산 순서는 0보다 커야 함

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZGROUP_CD (ZGROUP_CD), -- 계산 그룹으로 조회
    INDEX IDX_ZUSE_YN (ZUSE_YN)      -- 사용 여부로 조회

) COMMENT '급여 항목 계산 순서 정의';


-- 더미데이터 --
INSERT INTO ZHR_CALC_ORDER 
(ZITEM_CD, ZORDER, ZGROUP_CD, ZDEPENDS_ON, ZNOTE, ZUSE_YN, CREATED_BY) 
VALUES
-- 1. PAY (과세 지급 항목 그룹) - 과세 표준을 결정하는 첫 단계
('PAY001', 1,  'PAY', NULL, '가장 기본이 되는 급여 항목', 'Y', 'system_admin'),
('PAY004', 2,  'PAY', NULL, '기본급 이후 계산되는 수당', 'Y', 'system_admin'),
('PAY005', 3,  'PAY', NULL, '기본급 이후 계산되는 수당', 'Y', 'system_admin'),
('PAY006', 4,  'PAY', NULL, '기본급 이후 계산되는 수당', 'Y', 'system_admin'),
('PAY007', 5,  'PAY', 'PAY001', '통상임금 계산을 위해 기본급 선행 필요', 'Y', 'system_admin'),
('PAY002', 10, 'PAY', 'PAY001', '기본급 기반으로 계산될 수 있음', 'Y', 'system_admin'),
('PAY009', 11, 'PAY', 'PAY001', '기본급 기반으로 계산될 수 있음', 'Y', 'system_admin'),

-- 2. ALLOWANCE (비과세 지급 항목 그룹) - 과세 표준에 영향을 주지 않음
('PAY003', 1, 'ALLOWANCE', NULL, '비과세 항목', 'Y', 'system_admin'),
('PAY008', 2, 'ALLOWANCE', NULL, '비과세 항목', 'Y', 'system_admin'),
('PAY010', 3, 'ALLOWANCE', NULL, '비과세 항목', 'Y', 'system_admin'),

-- 3. INSURANCE (4대 보험 그룹) - 과세 표준(PAY 그룹)이 확정된 후 계산
('INS001', 1, 'INSURANCE', 'PAY001', '과세소득 확정 후 계산', 'Y', 'system_admin'),
('INS002', 2, 'INSURANCE', 'PAY001', '과세소득 확정 후 계산', 'Y', 'system_admin'),
('INS004', 3, 'INSURANCE', 'PAY001', '과세소득 확정 후 계산', 'Y', 'system_admin'),
('INS003', 4, 'INSURANCE', 'INS002', '건강보험료가 먼저 계산되어야 함', 'Y', 'system_admin'),
('INS005', 5, 'INSURANCE', NULL, '사용자 부담분이므로 계산 로직에서 제외', 'N', 'system_admin'),

-- 4. TAX (세금 그룹) - 과세 표준(PAY 그룹) 확정 후, 비과세(ALLOWANCE)는 제외하고 계산
('TAX001', 1, 'TAX', 'PAY001', '과세소득 확정 후 계산 (대표의존: 기본급)', 'Y', 'system_admin'),
('TAX002', 2, 'TAX', 'TAX001', '소득세가 먼저 계산되어야 함', 'Y', 'system_admin'),
('TAX003', 3, 'TAX', NULL, '독립적으로 계산되는 세금', 'Y', 'system_admin'),
('TAX004', 4, 'TAX', NULL, '현재 사용하지 않는 세금 항목', 'N', 'system_admin'),

-- 5. DEDUCT (기타 공제 그룹) - 모든 지급, 세금, 보험 계산 후 마지막 단계에서 공제
('DED002', 1, 'DEDUCT', NULL, '기타 공제 항목', 'Y', 'system_admin'),
('DED003', 2, 'DEDUCT', NULL, '기타 공제 항목', 'Y', 'system_admin'),
('DED004', 3, 'DEDUCT', NULL, '기타 공제 항목', 'Y', 'system_admin'),
('DED005', 4, 'DEDUCT', NULL, '기타 공제 항목', 'Y', 'system_admin'),
('DED006', 5, 'DEDUCT', NULL, '기타 공제 항목', 'Y', 'system_admin'),
('DED001', 6, 'DEDUCT', NULL, '현재 사용하지 않는 공제 항목', 'N', 'system_admin'),

-- [추가] ZHR_PAY_ITEM에만 있고 ZHR_CALC_ORDER에 누락된 항목들 추가
('DED101', 7, 'DEDUCT', NULL, '무급 병가 사용 시 감액', 'Y', 'system_admin'),
('DED102', 8, 'DEDUCT', NULL, '징계위원회 결과 감봉 조치', 'Y', 'system_admin'),
('DED103', 9, 'DEDUCT', NULL, '무단 결근 시 감액', 'Y', 'system_admin');

-- 상여금별 계산 주기 --
CREATE TABLE ZHR_ALLOW_CYCLE (
    ZCYCLE_ID   BIGINT          NOT NULL AUTO_INCREMENT COMMENT '지급 주기 고유 ID (PK)',
    ZITEM_CD    VARCHAR(20)     NOT NULL COMMENT '항목 코드 (UK, FK from ZHR_PAY_ITEM)',
    ZCYCLE      VARCHAR(20)     NOT NULL COMMENT '지급 주기 (MONTHLY, QUARTER, HALF, YEAR)',
    ZNOTE       VARCHAR(500)    NULL     COMMENT '설명',
    ZUSE_YN     CHAR(1)         NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZVERSION    INT             NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금용)',
    
    CREATED_AT  DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY  VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT  DATETIME        NULL     COMMENT '수정 일시',
    UPDATED_BY  VARCHAR(50)     NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (ZCYCLE_ID),

    -- 고유 키 설정 (1:1 관계 보장)
    -- ZITEM_CD는 항목별로 유일해야 함
    UNIQUE KEY UK_ZITEM_CD (ZITEM_CD),

    -- 외래 키 설정
    -- ZHR_PAY_ITEM 테이블의 항목 코드를 참조하여 데이터 무결성 보장
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),

    -- 제약 조건 설정
    -- 지급 주기는 정해진 값(MONTHLY, QUARTER, HALF, YEAR) 중 하나만 허용
    CHECK (ZCYCLE IN ('MONTHLY', 'QUARTER', 'HALF', 'YEAR')),
    -- 사용 여부는 'Y' 또는 'N'만 허용
    CHECK (ZUSE_YN IN ('Y', 'N')),

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZCYCLE (ZCYCLE),   -- 지급 주기로 조회
    INDEX IDX_ZUSE_YN (ZUSE_YN)   -- 사용 여부로 조회

) COMMENT '상여 항목 지급 주기 정의';


-- 더미데이터 --
INSERT INTO ZHR_ALLOW_CYCLE
(ZITEM_CD, ZCYCLE, ZNOTE, ZUSE_YN, CREATED_BY)
VALUES
('PAY002', 'HALF', '반기별 정기 상여금 (ZHR_PAY_ITEM: 상여금)', 'Y', 'system_admin'),
('PAY009', 'QUARTER', '분기별 성과 평가에 따른 성과급 (ZHR_PAY_ITEM: 성과급)', 'Y', 'system_admin'),
('PAY010', 'YEAR', '연 1회 지급되는 정기 휴가비 (ZHR_PAY_ITEM: 휴가비)', 'Y', 'system_admin');

-- 회계 연결 매핑 --
CREATE TABLE ZHR_GL_MAPPING_RULE (
    -- 관리용 고유 ID 컬럼 (PK)
    MAPPING_ID      BIGINT        NOT NULL AUTO_INCREMENT COMMENT '매핑 ID (PK)',

    -- 비즈니스 키 컬럼 (UNIQUE)
    ZITEM_CD        VARCHAR(20)   NOT NULL COMMENT '항목 코드 (FK from ZHR_PAY_ITEM)',
    ZBIZ_CD         VARCHAR(10)   NOT NULL COMMENT '사업장 코드',
    ZCOST_CNTR      VARCHAR(20)   NOT NULL COMMENT '코스트센터',

    -- 데이터 컬럼
    ZGL_ACCT        VARCHAR(30)   NOT NULL COMMENT '회계 계정 코드',
    ZNOTE           VARCHAR(500)  NULL     COMMENT '설명',
    ZUSE_YN         CHAR(1)       NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',

    -- 버전 관리 (낙관적 락)
    VERSION         BIGINT        NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락)',

    -- 감사(Audit) 컬럼
    CREATED_AT      DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)   NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME      NULL     COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)   NULL     COMMENT '수정자',

    -- 기본 키 설정 (새로운 ID 컬럼)
    PRIMARY KEY (MAPPING_ID),

    -- 고유 키(UNIQUE) 설정
    -- '항목코드+사업장+코스트센터' 조합의 중복을 방지하는 비즈니스 규칙은 그대로 유지
    UNIQUE KEY UK_ZHR_GL_MAPPING_RULE (ZITEM_CD, ZBIZ_CD, ZCOST_CNTR),

    -- 외래 키 설정
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD),

    -- 제약 조건 설정
    CHECK (ZUSE_YN IN ('Y', 'N')),

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ZUSE_YN (ZUSE_YN)

) COMMENT '급여 항목별 회계 계정 매핑 규칙';

-- 더미데이터 -- 
INSERT INTO ZHR_GL_MAPPING_RULE
(ZITEM_CD, ZBIZ_CD, ZCOST_CNTR, ZGL_ACCT, ZNOTE, ZUSE_YN, CREATED_BY)
VALUES
-- 1. 전사 공통 계정 매핑 (급여/수당)
('PAY001', '*', '*', '51101000', '전사 공통 기본급 계정', 'Y', 'system_loader'),
('PAY002', '*', '*', '51102000', '전사 공통 상여금 계정', 'Y', 'system_loader'),
('PAY003', '*', '*', '81105000', '전사 공통 식대(복리후생비)', 'Y', 'system_loader'),
('PAY004', '*', '*', '51101001', '전사 공통 직책수당 계정', 'Y', 'system_loader'),
('PAY005', '*', '*', '51101002', '전사 공통 자격수당 계정', 'Y', 'system_loader'),
('PAY006', '*', '*', '81105001', '전사 공통 가족수당(복리후생비)', 'Y', 'system_loader'),
('PAY007', '*', '*', '51101003', '전사 공통 연장근로수당 계정', 'Y', 'system_loader'),
('PAY008', '*', '*', '81106000', '전사 공통 차량유지비 계정', 'Y', 'system_loader'),
('PAY009', '*', '*', '51102001', '전사 공통 성과급 계정', 'Y', 'system_loader'),
('PAY010', '*', '*', '81105002', '전사 공통 휴가비(복리후생비)', 'Y', 'system_loader'),

-- 2. 전사 공통 계정 매핑 (세금/보험/공제)
('TAX001', '*', '*', '21501000', '예수금 - 소득세', 'Y', 'system_loader'),
('TAX002', '*', '*', '21501001', '예수금 - 지방소득세', 'Y', 'system_loader'),
('TAX003', '*', '*', '21501003', '예수금 - 주민세', 'Y', 'system_loader'), -- [추가] PAY_ITEM 기준 누락분
('INS001', '*', '*', '21502001', '예수금 - 국민연금', 'Y', 'system_loader'),
('INS002', '*', '*', '21502002', '예수금 - 건강보험', 'Y', 'system_loader'),
('INS003', '*', '*', '21502003', '예수금 - 장기요양보험', 'Y', 'system_loader'),
('INS004', '*', '*', '21502004', '예수금 - 고용보험', 'Y', 'system_loader'),
-- (참고: INS005 산재보험은 PAY_ITEM에 '사용자 부담 관리용'으로 명시되어, 직원 급여 공제 예수금이 아니므로 여기서 매핑 제외)
('DED002', '*', '*', '21503001', '예수금 - 노조비', 'Y', 'system_loader'),
('DED003', '*', '*', '21503002', '예수금 - 사내대출상환', 'Y', 'system_loader'),
('DED004', '*', '*', '21503003', '예수금 - 기숙사비', 'Y', 'system_loader'),
('DED005', '*', '*', '21503004', '예수금 - 복지기금', 'Y', 'system_loader'),
('DED006', '*', '*', '21503005', '예수금 - 개인연금 대납 후 공제 계정', 'Y', 'system_loader'),

-- 3. 특정 사업장/코스트센터별 계정 매핑 (우선 적용)
('PAY001', '2000', '*', '52101000', '생산본부(2000) 소속 직원의 기본급은 제조원가로 처리', 'Y', 'system_loader'),
('PAY007', '2000', '*', '52101003', '생산본부(2000) 소속 직원의 연장근로수당은 제조원가로 처리', 'Y', 'system_loader'),
('PAY001', '3000', '*', '61101000', '연구소(3000) 소속 직원의 기본급은 연구개발비로 처리', 'Y', 'system_loader'),
('PAY005', '3000', '*', '61101002', '연구소(3000) 소속 직원의 자격수당은 연구개발비로 처리', 'Y', 'system_loader'),
('PAY001', '1000', 'CC_SALES', '81101000', '영업부(CC_SALES) 직원의 기본급은 판매관리비로 처리', 'Y', 'system_loader'),
('PAY009', '1000', 'CC_SALES', '81102001', '영업부(CC_SALES) 직원의 성과급은 판매관리비로 처리', 'Y', 'system_loader'),
('PAY008', '1000', 'CC_SALES', '81107000', '영업부(CC_SALES) 직원의 차량유지비는 여비교통비로 처리', 'Y', 'system_loader'),

-- 4. 미사용(N) 또는 특수 계정 매핑
('DED001', '*', '*', '21503000', '학자금 상환 의무 공제 (현재 미사용)', 'N', 'system_loader'),
('TAX004', '*', '*', '21501002', '농어촌특별세 (특정 대상자만 적용, 현재 미사용)', 'N', 'system_loader'),

-- 5. 전사 공통 계정 매핑 (감액 항목) [추가]
('DED101', '*', '*', '51101000', '병가 감액(기본급 계정에서 차감)', 'Y', 'system_loader'),
('DED102', '*', '*', '51101000', '징계 감액(기본급 계정에서 차감)', 'Y', 'system_loader'),
('DED103', '*', '*', '51101000', '결근 감액(기본급 계정에서 차감)', 'Y', 'system_loader');


-- 4대보험 요율 관리 --
CREATE TABLE ZHR_INS_RATE (
    -- 관리용 고유 ID 컬럼 (PK)
    RATE_ID         BIGINT          NOT NULL AUTO_INCREMENT COMMENT '보험 요율 ID (PK)',

    -- 비즈니스 키 컬럼
    ZINS_TYPE       VARCHAR(10)     NOT NULL COMMENT '보험 종류 (NPS: 국민연금, HLT: 건강보험, LTC: 장기요양, EMP: 고용보험)',
    ZFROM_DT        DATE            NOT NULL COMMENT '적용 시작일',
    ZTO_DT          DATE            NOT NULL COMMENT '적용 종료일',

    -- 데이터 컬럼
    ZPC_EMP         DECIMAL(8, 5)   NOT NULL COMMENT '근로자 부담율 (%)',
    ZPC_CMP         DECIMAL(8, 5)   NOT NULL COMMENT '사업주 부담율 (%)',
    ZNOTE           VARCHAR(500)    NULL     COMMENT '개정 사유 또는 비고',
    ZUSE_YN         CHAR(1)         NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',

	VERSION         INT             NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금용)',
    -- 감사(Audit) 컬럼
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NULL     COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (RATE_ID),

    -- 고유 키(UNIQUE) 설정
    -- '보험 종류 + 적용 시작일' 조합의 중복을 방지하여 이력 데이터의 무결성 확보
    UNIQUE KEY UK_ZHR_INS_RATE (ZINS_TYPE, ZFROM_DT),

    -- 제약 조건 설정
    CHECK (ZUSE_YN IN ('Y', 'N')),
    CHECK (ZINS_TYPE IN ('NPS', 'HLT', 'LTC', 'EMP')),
    CHECK (ZPC_EMP >= 0 AND ZPC_EMP <= 100), -- 0 ~ 100% 범위 검증 추가
    CHECK (ZPC_CMP >= 0 AND ZPC_CMP <= 100), -- 0 ~ 100% 범위 검증 추가

    -- 검색 성능 향상을 위한 인덱스
    -- 급여 계산 시 특정 시점의 유효한 요율을 빠르게 조회하기 위함
    INDEX IDX_INS_RATE_PERIOD (ZINS_TYPE, ZFROM_DT, ZTO_DT)

) COMMENT '4대보험 요율 이력 관리 테이블';


-- 더미데이터 --
INSERT INTO ZHR_INS_RATE 
(ZINS_TYPE, ZFROM_DT, ZTO_DT, ZPC_EMP, ZPC_CMP, ZNOTE, ZUSE_YN, CREATED_BY, VERSION)
VALUES
-- 1. 국민연금 (NPS) - National Pension Service
-- 1999년 요율을 2025-12-31에 종료하고, 2026년 테스트 데이터가 이어지도록 수정
('NPS', '1999-01-01', '2025-12-31', 4.50000, 4.50000, '국민연금 보험료율 9% (2025년까지)', 'Y', 'system_loader', 0),
('NPS', '1995-07-01', '1998-12-31', 3.00000, 3.00000, '국민연금 보험료율 6% 시기', 'N', 'system_loader', 0),
('NPS', '1988-01-01', '1995-06-30', 1.50000, 1.50000, '국민연금 제도 도입 초기 요율', 'N', 'system_loader', 0),
('NPS', '2026-01-01', '9999-12-31', 5.00000, 5.00000, '국민연금 요율 인상안 (예시)', 'N', 'system_loader', 0),

-- 2. 건강보험 (HLT) - Health Insurance
-- 2025년 요율('Y')을 2025-12-31에 종료, 2024년 요율은 'N'으로 변경
('HLT', '2025-01-01', '2025-12-31', 3.54500, 3.54500, '2025년 건강보험요율', 'Y', 'system_loader', 0),
('HLT', '2024-01-01', '2024-12-31', 3.54500, 3.54500, '2024년 건강보험요율 7.09% 적용', 'N', 'system_loader', 0),
('HLT', '2023-01-01', '2023-12-31', 3.54500, 3.54500, '2023년 건강보험요율 7.09% 적용 (동결)', 'N', 'system_loader', 0),
('HLT', '2022-01-01', '2022-12-31', 3.49500, 3.49500, '2022년 건강보험요율 6.99% 적용', 'N', 'system_loader', 0),
('HLT', '2021-01-01', '2021-12-31', 3.43000, 3.43000, '2021년 건강보험요율 6.86% 적용', 'N', 'system_loader', 0),
('HLT', '2020-01-01', '2020-12-31', 3.33500, 3.33500, '2020년 건강보험요율 6.67% 적용', 'N', 'system_loader', 0),
('HLT', '2019-01-01', '2019-12-31', 3.23000, 3.23000, '2019년 건강보험요율 6.46% 적용', 'N', 'system_loader', 0),
('HLT', '2018-01-01', '2018-12-31', 3.12000, 3.12000, '2018년 건강보험요율 6.24% 적용', 'N', 'system_loader', 0),
('HLT', '2017-01-01', '2017-12-31', 3.06000, 3.06000, '2017년 건강보험요율 6.12% 적용', 'N', 'system_loader', 0),
('HLT', '2026-01-01', '9999-12-31', 3.60000, 3.60000, '2026년 건강보험료 인상 계획 (미확정)', 'N', 'system_loader', 0),

-- 3. 장기요양보험 (LTC) - Long Term Care Insurance
-- 2025년 요율('Y')을 2025-12-31에 종료, 2024년 요율은 'N'으로 변경
('LTC', '2025-01-01', '2025-12-31', 0.45410, 0.45410, '2025년 장기요양보험료율', 'Y', 'system_loader', 0),
('LTC', '2024-01-01', '2024-12-31', 0.45410, 0.45410, '2024년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2023-01-01', '2023-12-31', 0.45410, 0.45410, '2023년 장기요양보험료율 (동결)', 'N', 'system_loader', 0),
('LTC', '2022-01-01', '2022-12-31', 0.42855, 0.42855, '2022년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2021-01-01', '2021-12-31', 0.39415, 0.39415, '2021년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2020-01-01', '2020-12-31', 0.33855, 0.33855, '2020년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2019-01-01', '2019-12-31', 0.27695, 0.27695, '2019년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2018-01-01', '2018-12-31', 0.23100, 0.23100, '2018년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2017-01-01', '2017-12-31', 0.20043, 0.20043, '2017년 장기요양보험료율', 'N', 'system_loader', 0),
('LTC', '2026-01-01', '9999-12-31', 0.50000, 0.50000, '2026년 장기요양보험료 인상 계획 (미확정)', 'N', 'system_loader', 0),

-- 4. 고용보험 (EMP) - Employment Insurance (실업급여 요율 기준)
-- 원본 데이터가 기간 중복 없이 양호하여 VERSION 필드만 추가
('EMP', '2022-07-01', '9999-12-31', 0.90000, 0.90000, '실업급여 요율 1.8%로 인상 (근로자/사업주 각 0.9%)', 'Y', 'system_loader', 0),
('EMP', '2019-10-01', '2022-06-30', 0.80000, 0.80000, '실업급여 요율 1.6%로 인상', 'N', 'system_loader', 0),
('EMP', '2017-07-01', '2019-09-30', 0.65000, 0.65000, '실업급여 요율 1.3% 시기', 'N', 'system_loader', 0),
('EMP', '2013-01-01', '2017-06-30', 0.65000, 0.65000, '실업급여 요율 1.3% 유지', 'N', 'system_loader', 0),
('EMP', '2011-01-01', '2012-12-31', 0.55000, 0.55000, '실업급여 요율 1.1% 시기', 'N', 'system_loader', 0),
('EMP', '2009-01-01', '2010-12-31', 0.45000, 0.45000, '실업급여 요율 0.9% 시기', 'N', 'system_loader', 0);


-- 급여 항목별 계산 이력 --
CREATE TABLE ZHR_LOG_PAY_CALC (
    -- 1. 기본 키 컬럼 (PK) - 대리 키
    LOG_ID      BIGINT         NOT NULL AUTO_INCREMENT COMMENT '로그 고유ID (PK)',

    -- 2. 비즈니스 키 컬럼 (UNIQUE)
    ZPAY_YM     CHAR(6)        NOT NULL COMMENT '지급월 (FK to ZHR_PAY_DETAIL.ZPAY_YM)',
    ZSEQ_NO     SMALLINT       NOT NULL COMMENT '차수 (FK to ZHR_PAY_DETAIL.ZSEQ_NO)',
    ZEMP_NO     VARCHAR(10)    NOT NULL COMMENT '사번 (FK to ZHR_EMP_MASTER.PERNR)',
    ZITEM_CD    VARCHAR(20)    NOT NULL COMMENT '항목 코드 (FK to ZHR_PAY_ITEM.ZITEM_CD)',
    ZSTEP_NO    SMALLINT       NOT NULL COMMENT '계산 단계 (항목별 1부터 순차 증가)',

    -- 3. 계산 과정 데이터 필드 (UI 구성안 참고)
    ZSTEP_DESC  VARCHAR(255)   NULL     COMMENT '단계 설명',
    ZBASE_VAL   DECIMAL(20, 4) NULL     COMMENT '계산 기준값',
    ZFORMULA    VARCHAR(1000)  NULL     COMMENT '적용된 수식 또는 참조 정보',
    ZRESULT_VAL DECIMAL(20, 4) NOT NULL COMMENT '계산 결과 (절사 전 원시값)',
    ZROUND_VAL  DECIMAL(18, 2) NULL     COMMENT '절사 후 값 (최종 단계 또는 필요시)',
    ZROUND_TY   VARCHAR(20)    NULL     COMMENT '절사 방식 (ROUND, TRUNC, ...)',
    ZCALC_SRC   VARCHAR(20)    NULL     COMMENT '계산 출처 (FORMULA, FIXED, SQL, TABLE)',
    ZNOTE       VARCHAR(500)   NULL     COMMENT '비고',

    -- 4. 감사(Audit) 필드 (로그 생성 시점)
    CREATED_AT  DATETIME       NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '로그 생성 일시',
    CREATED_BY  VARCHAR(50)    NOT NULL COMMENT '로그 생성자 (배치 ID 또는 사용자)',

    -- 5. 기본 키 설정
    PRIMARY KEY (LOG_ID),

    -- 6. 고유 키(UNIQUE) 설정 (중복 체크용)
    UNIQUE KEY UK_ZHR_LOG_PAY_CALC_01 (ZPAY_YM, ZSEQ_NO, ZEMP_NO, ZITEM_CD, ZSTEP_NO),

    -- 7. 외래 키 (FK) 설정 (마스터 데이터 참조)
    FOREIGN KEY (ZEMP_NO) REFERENCES ZHR_EMP_MASTER(PERNR),
    FOREIGN KEY (ZITEM_CD) REFERENCES ZHR_PAY_ITEM(ZITEM_CD)

) COMMENT '급여 항목별 계산 단계별 이력 로그';


-- 인사 --
-- 사업장 관리 --
CREATE TABLE ZHR_BIZPLACE (
    -- === 대리 키(Surrogate Key) 컬럼 (PK) ===
    ZID             BIGINT          NOT NULL AUTO_INCREMENT COMMENT '대리키 (PK)',

    -- === 비즈니스 키 컬럼 (UNIQUE) ===
    ZBIZ_CD         VARCHAR(10)     NOT NULL COMMENT '사업장 코드 (Business Key)',

    -- 데이터 컬럼
    ZBIZ_NM         VARCHAR(100)    NOT NULL COMMENT '사업장 명칭',
	
    -- === 주소 컬럼 재설계===
    ZPOSTCODE       VARCHAR(5)      NULL     COMMENT '우편번호 (Kakao API)',
    ZSIDO           VARCHAR(50)     NULL     COMMENT '시/도 (Kakao API, 검색용)',
    ZSIGUNGU        VARCHAR(50)     NULL     COMMENT '시/군/구 (Kakao API, 검색용)',
    ZADDR_MAIN      VARCHAR(150)    NOT NULL COMMENT '기본 주소 (Kakao API)',
    ZADDR_DETAIL    VARCHAR(100)    NULL     COMMENT '상세 주소 (사용자 입력)',

    ZREG_NO         VARCHAR(20)     NULL     COMMENT '사업자등록번호',
    ZTEL            VARCHAR(20)     NULL     COMMENT '전화번호',
    ZEMAIL          VARCHAR(50)     NULL     COMMENT '이메일',
    ZWORK_HOUR      VARCHAR(20)     NULL     COMMENT '근무시간',
    ZWORK_DAYS      VARCHAR(10)     NULL     COMMENT '주간근무제',
    ZTYPE           VARCHAR(20)     NULL     COMMENT '사업장 유형 (사무소/공장 등)',
    ZMANAGER_ID     VARCHAR(10)     NULL     COMMENT '담당자 ID (FK to ZHR_EMP_MASTER)',
    ZUSE_YN         CHAR(1)         NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZREMARK         VARCHAR(200)    NULL     COMMENT '비고',

    -- === 버전 관리 컬럼 (낙관적 잠금용) ===
    ZVERSION        INT             NOT NULL DEFAULT 1 COMMENT '데이터 버전 (낙관적 잠금용)',

    -- 감사(Audit) 컬럼
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NULL     COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL     COMMENT '수정자',

    -- === 기본 키 설정 ===
    PRIMARY KEY (ZID),

    -- === 고유 키 설정===
    -- ZBIZ_CD는 비즈니스적으로 고유해야 하므로 UNIQUE 인덱스 추가
    UNIQUE KEY UK_BIZPLACE_CD (ZBIZ_CD),

    -- 제약 조건 설정
    CHECK (ZUSE_YN IN ('Y', 'N')),

    -- === 외래 키(Foreign Key) 설정 추가 ===
    CONSTRAINT FK_BIZPLACE_MANAGER
        FOREIGN KEY (ZMANAGER_ID) 
        REFERENCES ZHR_EMP_MASTER(PERNR) 
        ON DELETE SET NULL  -- 담당자가 삭제(퇴사)되면, 이 컬럼을 NULL로 설정
        ON UPDATE CASCADE,  -- 담당자의 사번이 변경되면, 이 컬럼도 같이 변경

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_BIZPLACE_NM (ZBIZ_NM)
    -- ZMANAGER_ID는 FK에 의해 인덱스가 생성될 수 있으나, 명시적 추가도 가능
    -- INDEX IDX_BIZPLACE_MANAGER (ZMANAGER_ID)

) COMMENT '사업장 마스터 테이블';


-- 더미 데이터 --
INSERT INTO ZHR_BIZPLACE 
(
    ZBIZ_CD, ZBIZ_NM, 
    ZPOSTCODE, ZSIDO, ZSIGUNGU, ZADDR_MAIN, ZADDR_DETAIL, -- (신규 주소 컬럼)
    ZREG_NO, ZTEL, ZEMAIL, ZWORK_HOUR, ZWORK_DAYS, ZTYPE, 
    ZMANAGER_ID, ZUSE_YN, ZREMARK, CREATED_BY
)
VALUES
-- 1. 본사 / 연구소
('H0001', '서울 본사', 
 NULL, '서울특별시', '강남구', '서울특별시 강남구 테헤란로 123', '20층', -- (주소 분리)
 '123-81-00001', '02-1234-5678', 'seoul_hq@company.com', '09:00~18:00', '주 5일', '본사', '2203004', 'Y', '본사 및 수도권 영업 총괄', 'system_loader'),
('R0001', '판교 R&D 센터', 
 NULL, '경기도', '성남시', '경기도 성남시 분당구 판교역로 235', NULL, -- (주소 분리: '성남시 분당구' -> '성남시')
 '123-81-00001', '031-123-4567', 'rnd@company.com', '09:30~18:30', '주 5일', '연구소', '2207006', 'Y', '핵심 기술 연구 개발', 'system_loader'),
('D0001', '춘천 데이터센터', 
 NULL, '강원도', '춘천시', '강원도 춘천시 남산면 버들1길 130', NULL, -- (주소 분리)
 '222-81-00011', '033-111-2222', 'datacenter@company.com', '24시간 3교대', '4조 3교대', '데이터센터', '2209007', 'Y', 'IDC 운영', 'system_loader'),

-- 2. 공장
('F0101', '수원 1공장 (전자)', 
 NULL, '경기도', '수원시', '경기도 수원시 영통구 삼성로 129', NULL, -- (주소 분리: '수원시 영통구' -> '수원시')
 '321-82-00002', '031-222-3333', 'suwon_f1@company.com', '08:00~17:00', '주 5일', '공장', '2210009', 'Y', '모바일 부품 생산', 'system_loader'),
('F0102', '수원 2공장 (반도체)', 
 NULL, '경기도', '수원시', '경기도 수원시 영통구 중부대로 448번길', NULL, -- (주소 분리)
 '321-82-00002', '031-222-4444', 'suwon_f2@company.com', '24시간 4조 3교대', '4조 3교대', '공장', NULL, 'N', '2024년 평택으로 라인 이전', 'system_loader'),
('F0201', '구미 1공장 (디스플레이)', 
 NULL, '경상북도', '구미시', '경상북도 구미시 3공단3로 331', NULL, -- (주소 분리)
 '456-83-00003', '054-444-5555', 'gumi_f1@company.com', '08:30~17:30', '주 5일', '공장', '2211010', 'Y', 'OLED 패널 생산', 'system_loader'),
('F0301', '평택 반도체 캠퍼스', 
 NULL, '경기도', '평택시', '경기도 평택시 고덕면 삼성로 1', NULL, -- (주소 분리)
 '321-82-00002', '031-8096-1114', 'pyeongtaek_f1@company.com', '24시간 4조 3교대', '4조 3교대', '공장', '2302013', 'Y', '차세대 반도체 생산 라인', 'system_loader'),
('F0401', '울산 석유화학 공장', 
 NULL, '울산광역시', '남구', '울산광역시 남구 신항로 123', NULL, -- (주소 분리)
 '555-84-00004', '052-555-6666', 'ulsan_f1@company.com', '07:30~16:30', '주 5일', '공장', '2305015', 'Y', '기초 유화 제품 생산', 'system_loader'),
('F0501', '창원 정밀기계 공장', 
 NULL, '경상남도', '창원시', '경상남도 창원시 성산구 완암로 50', NULL, -- (주소 분리: '창원시 성산구' -> '창원시')
 '654-85-00005', '055-777-8888', 'changwon_f1@company.com', '08:00~17:00', '주 5일', '공장', '2305016', 'Y', '산업용 로봇 생산', 'system_loader'),

-- 3. 물류센터
('L0101', '인천 물류센터', 
 NULL, '인천광역시', '서구', '인천광역시 서구 오류동 1543-5', NULL, -- (주소 분리)
 '789-86-00006', '032-987-6543', 'incheon_logis@company.com', '09:00~18:00', '주 6일', '물류센터', '2309018', 'Y', '수도권 통합 물류 허브', 'system_loader'),
('L0201', '부산 신항 물류센터', 
 NULL, '부산광역시', '강서구', '부산광역시 강서구 신항남로 33', NULL, -- (주소 분리)
 '888-87-00007', '051-888-9999', 'busan_logis@company.com', '09:00~18:00', '주 5일', '물류센터', '2310019', 'Y', '수출입 물류 담당', 'system_loader'),
('L0301', '용인 허브 터미널', 
 NULL, '경기도', '용인시', '경기도 용인시 처인구 양지면 중부대로 2374', NULL, -- (주소 분리: '용인시 처인구' -> '용인시')
 '789-86-00006', '031-777-6666', 'yongin_hub@company.com', '24시간 운영', '스케줄 근무', '물류센터', '2312020', 'Y', '전국 택배 분류', 'system_loader'),
('L0401', '대구 내륙물류기지', 
 NULL, '대구광역시', '북구', '대구광역시 북구 검단동 1234-1', NULL, -- (주소 분리)
 '789-86-00006', '053-654-3210', 'daegu_logis@company.com', '09:00~18:00', '주 5일', '물류센터', '2401022', 'Y', '영남권 물류 담당', 'system_loader'),
('L0501', '광주 물류센터', 
 NULL, '광주광역시', '광산구', '광주광역시 광산구 평동산단로 182', NULL, -- (주소 분리)
 '789-86-00006', '062-111-2222', 'gwangju_logis@company.com', '09:00~18:00', '주 5일', '물류센터', NULL, 'N', '2025년 신규 센터로 이전 예정', 'system_loader'),

-- 4. 지사 / 영업소
('B0101', '부산 지사', 
 NULL, '부산광역시', '연제구', '부산광역시 연제구 중앙대로 1000', NULL, -- (주소 분리)
 '888-87-00007', '051-777-1234', 'busan_branch@company.com', '09:00~18:00', '주 5일', '지사', '2402023', 'Y', '동남권 총괄 지사', 'system_loader'),
('B0201', '대전 지사', 
 NULL, '대전광역시', '서구', '대전광역시 서구 둔산로 100', NULL, -- (주소 분리)
 '999-88-00008', '042-666-5555', 'daejeon_branch@company.com', '09:00~18:00', '주 5일', '지사', '2402024', 'Y', '중부권 총괄 지사', 'system_loader'),
('B0301', '광주 지사', 
 NULL, '광주광역시', '서구', '광주광역시 서구 상무중앙로 7', NULL, -- (주소 분리)
 '111-89-00009', '062-444-3333', 'gwangju_branch@company.com', '09:00~18:00', '주 5일', '지사', '2403025', 'Y', '호남권 총괄 지사', 'system_loader'),
('B0401', '대구 지사', 
 NULL, '대구광역시', '동구', '대구광역시 동구 동대구로 489', NULL, -- (주소 분리)
 '222-90-00010', '053-222-1111', 'daegu_branch@company.com', '09:00~18:00', '주 5일', '지사', '2404026', 'Y', '경북권 총괄 지사', 'system_loader'),
('B0501', '제주 지사', 
 NULL, '제주특별자치도', '제주시', '제주특별자치도 제주시 노형로 407', NULL, -- (주소 분리)
 '333-91-00012', '064-999-8888', 'jeju_branch@company.com', '09:00~18:00', '주 5일', '지사', '2404027', 'Y', '제주 지역 담당', 'system_loader'),
('S0101', '강남 영업소', 
 NULL, '서울특별시', '서초구', '서울특별시 서초구 강남대로 373', NULL, -- (주소 분리)
 '123-81-00001', '02-345-6789', 'gangnam_sales@company.com', '09:00~18:00', '주 5일', '영업소', '2405028', 'Y', NULL, 'system_loader'),
('S0102', '여의도 영업소', 
 NULL, '서울특별시', '영등포구', '서울특별시 영등포구 의사당대로 97', NULL, -- (주소 분리)
 '123-81-00001', '02-789-1234', 'yeouido_sales@company.com', '09:00~18:00', '주 5일', '영업소', '2405029', 'Y', '금융기관 담당', 'system_loader'),
('S0201', '세종 영업소', 
 NULL, '세종특별자치시', '', '세종특별자치시 한누리대로 411', NULL, -- (주소 분리: '세종' -> ZSIGUNGU는 '')
 '999-88-00008', '044-888-7777', 'sejong_sales@company.com', '09:00~18:00', '주 5일', '영업소', '2406030', 'Y', '정부부처 담당', 'system_loader'),

-- 5. 해외 지사
('B9101', '미국 법인 (USA)', 
 NULL, NULL, NULL, '1209 Orange Street, Wilmington, Delaware', NULL, -- (주소 분리: 해외)
 NULL, '+1-302-123-4567', 'usa_office@company.com', '09:00~17:00', 'Mon-Fri', '해외법인', '2407031', 'Y', '북미 총괄 법인', 'system_loader'),
('B9201', '베트남 호치민 지사', 
 NULL, NULL, NULL, '1 Le Duan Street, District 1, Ho Chi Minh City', NULL, -- (주소 분리: 해외)
 NULL, '+84-28-1234-5678', 'hcm_office@company.com', '08:00~17:00', 'Mon-Fri', '해외지사', '2407032', 'Y', '동남아 생산기지 관리', 'system_loader'),
('B9301', '중국 상하이 지사', 
 NULL, NULL, NULL, '100 Century Avenue, Pudong, Shanghai, China', NULL, -- (주소 분리: 해외)
 NULL, '+86-21-9876-5432', 'sh_office@company.com', '09:00~18:00', 'Mon-Fri', '해외지사', '2408033', 'Y', '중화권 영업 담당', 'system_loader'),

-- 6. 기타 특수 사업장
('T0001', '인재개발원', 
 NULL, '경기도', '용인시', '경기도 용인시 처인구 포곡읍 에버랜드로 199', NULL, -- (주소 분리: '용인시 처인구' -> '용인시')
 '123-81-00001', '031-320-5000', 'hrd_center@company.com', '09:00~18:00', '주 5일', '연수원', '2409034', 'Y', '그룹 임직원 교육 담당', 'system_loader'),
('T0002', '송도 R&D 캠퍼스', 
 NULL, '인천광역시', '연수구', '인천광역시 연수구 송도과학로 55', NULL, -- (주소 분리)
 '321-82-00002', '032-888-1234', 'songdo_rnd@company.com', '09:00~18:00', '주 5일', '연구소', '2409035', 'Y', '바이오 연구', 'system_loader'),
('F0601', '아산 디스플레이 공장', 
 NULL, '충청남도', '아산시', '충청남도 아산시 탕정면 삼성로 177', NULL, -- (주소 분리)
 '456-83-00003', '041-540-1114', 'asan_f1@company.com', '08:30~17:30', '주 5일', '공장', '2410036', 'Y', NULL, 'system_loader'),
('S0301', '인천공항 사무소', 
 NULL, '인천광역시', '중구', '인천광역시 중구 공항로 272', NULL, -- (주소 분리)
 '123-81-00001', '032-741-1000', 'airport_office@company.com', '09:00~18:00', '주 5일', '사무소', '2411037', 'Y', '항공물류 지원', 'system_loader'),
('B0601', '원주 지사', 
 NULL, '강원도', '원주시', '강원도 원주시 시청로 1', NULL, -- (주소 분리)
 '222-81-00011', '033-737-2114', 'wonju_branch@company.com', '09:00~18:00', '주 5일', '지사', '2411038', 'Y', '강원권 총괄 지사', 'system_loader'),
('F0202', '구미 2공장 (모바일)', 
 NULL, '경상북도', '구미시', '경상북도 구미시 1공단로 222', NULL, -- (주소 분리)
 '456-83-00003', '054-444-6666', 'gumi_f2@company.com', '08:30~17:30', '주 5일', '공장', '2412039', 'Y', '스마트폰 완제품 조립', 'system_loader');
 
-- 조직 관리 --
CREATE TABLE ZHR_ORG_UNIT (
    -- 1. 대리키(Surrogate Key) 추가
    ID              BIGINT AUTO_INCREMENT NOT NULL COMMENT '시스템 ID (PK, 대리키)',

    -- 2. 비즈니스 키 컬럼 (Business Key) - PK에서 UNIQUE로 변경
    ZORG_CD         VARCHAR(10)           NOT NULL COMMENT '조직 코드 (Business Key)',

    -- 데이터 컬럼
    ZORG_NM         VARCHAR(100)          NOT NULL COMMENT '조직명',
    PARENT_ORG_CD   VARCHAR(10)           NULL     COMMENT '상위 조직 코드 (ZORG_CD 참조)',
    ZORG_TYPE       VARCHAR(10)           NOT NULL COMMENT '조직 유형 (팀, 본부 등)',
    ZBIZ_CD         VARCHAR(10)           NOT NULL COMMENT '소속 사업장 코드',
    ZVALID_FROM     DATE                  NOT NULL COMMENT '조직 유효 시작일',
    ZVALID_TO       DATE                  NULL     COMMENT '조직 유효 종료일',
    ZMAIN_POS       VARCHAR(20)           NULL     COMMENT '대표 직책',
    ZMANAGER_ID     VARCHAR(10)           NULL     COMMENT '조직 담당자 ID',
    ZUSE_YN         CHAR(1)               NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    ZREMARK         VARCHAR(200)          NULL     COMMENT '비고',

    -- 3. Version 필드 추가 (Optimistic Locking 용)
    VERSION         INT                   NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 락)',

    -- 감사(Audit) 컬럼
    CREATED_AT      DATETIME              NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)           NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME              NULL     COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)           NULL     COMMENT '수정자',

    -- 기본 키 설정 (대리키로 변경)
    PRIMARY KEY (ID),

    -- 유니크 제약 조건 (비즈니스 키)
    UNIQUE KEY UK_ZORG_CD (ZORG_CD),

    -- 외래 키 설정 (다른 테이블과의 관계 정의)
    
    -- 1. 사업장 테이블(ZHR_BIZPLACE) 연계
    FOREIGN KEY (ZBIZ_CD) REFERENCES ZHR_BIZPLACE(ZBIZ_CD),
    
    -- 2. 상위 조직 연계 (자기 자신 테이블의 비즈니스 키 참조)
    -- PARENT_ORG_CD가 ZORG_CD를 참조하도록 유지합니다.
    FOREIGN KEY (PARENT_ORG_CD) REFERENCES ZHR_ORG_UNIT(ZORG_CD),

	-- 3. 조직 담당자 연계 (직원 마스터 테이블)
    FOREIGN KEY (ZMANAGER_ID) REFERENCES ZHR_EMP_MASTER(PERNR),
    
    -- 제약 조건 설정
    CHECK (ZUSE_YN IN ('Y', 'N')),
    CHECK (ZORG_CD <> PARENT_ORG_CD), -- 상위 조직이 자기 자신이 되는 것을 방지

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_ORG_UNIT_NM (ZORG_NM), -- 조직명 검색
    INDEX IDX_ORG_UNIT_BIZ_CD (ZBIZ_CD) -- 사업장별 조회

) COMMENT '조직 마스터 테이블' ;


-- ZHR_ORG_UNIT 테이블 더미 데이터 (수정본) --
-- (ZMANAGER_ID를 ZHR_EMP_MASTER의 PERNR 기준으로 수정)
INSERT INTO ZHR_ORG_UNIT
(ZORG_CD, ZORG_NM, PARENT_ORG_CD, ZORG_TYPE, ZBIZ_CD, ZVALID_FROM, ZVALID_TO, ZMAIN_POS, ZMANAGER_ID, ZUSE_YN, ZREMARK, CREATED_BY)
VALUES
-- 1. 서울 본사 (H0001) 조직도
-- (H0001 사업장 담당자: '2203004' 최서연)
('H0001CEO', '최고경영진', NULL, 'CEO', 'H0001', '2020-01-01', NULL, 'CEO', '2203004', 'Y', 'CEO 및 주요 임원 그룹', 'system_loader'),
('H0001CSO', '전략기획본부', 'H0001CEO', '본부', 'H0001', '2020-01-01', NULL, '본부장', '2402023', 'Y', '전사 전략 및 기획 총괄', 'system_loader'),
('H01CSOT1', '전략기획팀', 'H0001CSO', '팀', 'H0001', '2020-01-01', NULL, '팀장', '2402024', 'Y', '중장기 사업 전략 수립', 'system_loader'),
('H01CSOT2', '인사총무팀', 'H0001CSO', '팀', 'H0001', '2021-03-01', NULL, '팀장', '2403025', 'Y', '인사, 급여, 복리후생, 총무 업무', 'system_loader'),
('H0001CFO', '경영지원본부', 'H0001CEO', '본부', 'H0001', '2020-01-01', NULL, '본부장', '2404026', 'Y', '재무, 회계, 법무 총괄', 'system_loader'),
('H01CFOT1', '재무팀', 'H0001CFO', '팀', 'H0001', '2020-01-01', NULL, '팀장', '2404027', 'Y', '자금, 회계, 세무 담당', 'system_loader'),
('H01CFOT2', 'IR팀', 'H0001CFO', '팀', 'H0001', '2022-05-01', NULL, '팀장', '2405028', 'Y', '투자자 정보 관리', 'system_loader'),
('H0001SALES', '국내영업본부', 'H0001CEO', '본부', 'H0001', '2020-01-01', NULL, '본부장', '2405029', 'Y', '국내 영업 총괄', 'system_loader'),
('H01SALEST1', '수도권영업팀', 'H0001SALES', '팀', 'H0001', '2020-01-01', NULL, '팀장', '2406030', 'Y', '서울, 경기, 인천 지역 담당', 'system_loader'),

-- 2. 판교 R&D 센터 (R0001) 조직도
-- (R0001 사업장 담당자: '2207006' 윤서아)
('R0001CTO', '연구소', NULL, '연구소', 'R0001', '2021-01-01', NULL, '연구소장', '2207006', 'Y', '기술 연구개발 총괄', 'system_loader'),
('R0001AI', 'AI연구실', 'R0001CTO', '실', 'R0001', '2021-01-01', NULL, '실장', '2407031', 'Y', '인공지능 기술 개발', 'system_loader'),
('R01AIT1', '자연어처리팀', 'R0001AI', '팀', 'R0001', '2021-01-01', NULL, '팀장', '2407032', 'Y', 'NLP 모델 개발', 'system_loader'),
('R01AIT2', '컴퓨터비전팀', 'R0001AI', '팀', 'R0001', '2022-07-01', '2025-12-31', '팀장', '2408033', 'N', '프로젝트 종료로 25년 말 해체 예정', 'system_loader'),
('R0001PLAT', '플랫폼개발실', 'R0001CTO', '실', 'R0001', '2021-01-01', NULL, '실장', '2409034', 'Y', '서비스 플랫폼 개발', 'system_loader'),
('R01PLATT1', '서버개발팀', 'R0001PLAT', '팀', 'R0001', '2021-01-01', NULL, '팀장', '2409035', 'Y', '백엔드 시스템 개발 및 운영', 'system_loader'),
('R01PLATT2', 'UX/UI디자인팀', 'R0001PLAT', '팀', 'R0001', '2023-02-01', NULL, '팀장', '2410036', 'Y', NULL, 'system_loader'),

-- 3. 수원 1공장 (F0101) 조직도
-- (F0101 사업장 담당자: '2210009' 한지우)
('F0101FM', '공장운영총괄', NULL, '공장장', 'F0101', '2019-05-01', NULL, '공장장', '2210009', 'Y', '수원 1공장 운영 총괄', 'system_loader'),
('F0101PROD', '생산본부', 'F0101FM', '본부', 'F0101', '2019-05-01', NULL, '본부장', '2411037', 'Y', NULL, 'system_loader'),
('F01PRODT1', '생산1팀', 'F0101PROD', '팀', 'F0101', '2019-05-01', NULL, '팀장', '2411038', 'Y', '모바일 부품 A라인 담당', 'system_loader'),
('F01PRT1P1', 'A라인 주간조', 'F01PRODT1', '파트', 'F0101', '2019-05-01', NULL, '파트장', '2412039', 'Y', NULL, 'system_loader'),
('F01PRT1P2', 'A라인 야간조', 'F01PRODT1', '파트', 'F0101', '2019-05-01', NULL, '파트장', '2412040', 'Y', NULL, 'system_loader'),
('F0101QC', '품질관리팀', 'F0101FM', '팀', 'F0101', '2019-05-01', NULL, '팀장', '2501041', 'Y', '생산품 품질 검수', 'system_loader'),
('F0101MA', '설비보전팀', 'F0101FM', '팀', 'F0101', '2020-08-01', NULL, '팀장', '2501042', 'Y', '공장 설비 유지보수', 'system_loader'),

-- 4. 인천 물류센터 (L0101) 조직도
-- (L0101 사업장 담당자: '2309018' 고은별)
('L0101CM', '센터운영', NULL, '센터장', 'L0101', '2022-01-01', NULL, '센터장', '2309018', 'Y', '인천 물류센터 총괄', 'system_loader'),
('L0101OPS', '운영팀', 'L0101CM', '팀', 'L0101', '2022-01-01', NULL, '팀장', '2502043', 'Y', '입출고 및 재고관리', 'system_loader'),
('L01OPSP1', '입고파트', 'L0101OPS', '파트', 'L0101', '2022-01-01', NULL, '파트장', '2503044', 'Y', NULL, 'system_loader'),
('L01OPSP2', '출고파트', 'L0101OPS', '파트', 'L0101', '2022-01-01', NULL, '파트장', '2503045', 'Y', NULL, 'system_loader'),

-- 5. 평택 반도체 캠퍼스 (F0301) 조직도
-- (F0301 사업장 담당자: '2302013' 송지아)
('F0301FM', '캠퍼스총괄', NULL, '총괄', 'F0301', '2023-01-01', NULL, '부사장', '2302013', 'Y', '평택 캠퍼스 총괄', 'system_loader'),
('F0301FAB1', 'FAB1 운영팀', 'F0301FM', '팀', 'F0301', '2023-01-01', NULL, '팀장', '2504046', 'Y', '1번 FAB 라인 운영', 'system_loader'),
('F0301FAB2', 'FAB2 운영팀', 'F0301FM', '팀', 'F0301', '2024-01-01', NULL, '팀장', '2505047', 'Y', '2번 FAB 라인 운영', 'system_loader'),
('F0301TECH', '공정기술팀', 'F0301FM', '팀', 'F0301', '2023-01-01', NULL, '팀장', '2506048', 'Y', '반도체 공정 기술 개발', 'system_loader'),
('F0301ENV', '환경안전팀', 'F0301FM', '팀', 'F0301', '2023-01-01', NULL, '팀장', '2507049', 'Y', '사업장 안전 및 환경 관리', 'system_loader');



-- 개인정보 --
CREATE TABLE ZHR_EMP_PRIV (
    -- [PK & FK] 사번 (마스터 테이블과 1:1)
    PERNR           VARCHAR(10)   NOT NULL COMMENT '사번 (PK, FK)',

    -- [민감 개인정보]
    SSN             VARCHAR(255)  NOT NULL COMMENT '주민등록번호 (암호화)',
    GENDER          CHAR(1)       NOT NULL COMMENT '성별 (M/F)',
    BIRTHDATE       DATE          NOT NULL COMMENT '생년월일',
    
    -- [국적 - 공통코드 HR_NATION]
    NATION_CD       VARCHAR(20)   NOT NULL DEFAULT 'KR' COMMENT '국적 (HR_NATION)',
    
    -- [연락처 정보]
    PHONE_NO        VARCHAR(20)   NOT NULL COMMENT '휴대전화',
    HOME_TEL        VARCHAR(20)   NULL     COMMENT '자택전화',
    EMAIL           VARCHAR(100)  NULL     COMMENT '개인 이메일',
    
    -- [거주지 정보]
    ZPOSTCODE       VARCHAR(5)      NULL     COMMENT '우편번호 (Kakao API)',
    ZSIDO           VARCHAR(50)     NULL     COMMENT '시/도 (Kakao API, 검색용)',
    ZSIGUNGU        VARCHAR(50)     NULL     COMMENT '시/군/구 (Kakao API, 검색용)',
    ZADDR_MAIN      VARCHAR(150)    NOT NULL COMMENT '기본 주소 (Kakao API)',
    ZADDR_DETAIL    VARCHAR(100)    NULL     COMMENT '상세 주소 (사용자 입력)',
    
    -- [신상 정보 - 공통코드 적용]
    MARITAL_CD      VARCHAR(20)   NULL DEFAULT '10' COMMENT '결혼상태 (HR_MARITAL: 10미혼, 20기혼...)',
    MILITARY_CD     VARCHAR(20)   NULL DEFAULT '00' COMMENT '병역구분 (HR_MILITARY: 00비대상, 10만기...)',
    DISABILITY_YN   CHAR(1)       NULL DEFAULT 'N'  COMMENT '장애여부 (Y/N)',
    
    -- [비상 연락망]
    EMERGENCY_NAME  VARCHAR(50)   NULL     COMMENT '비상연락인 이름',
    EMERGENCY_REL   VARCHAR(20)   NULL     COMMENT '비상연락인 관계',
    EMERGENCY_PHONE VARCHAR(20)   NULL     COMMENT '비상연락인 연락처',

    -- [Audit]
    CREATED_AT      DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY      VARCHAR(50)   NOT NULL,
    UPDATED_AT      DATETIME      NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY      VARCHAR(50)   NULL,

    PRIMARY KEY (PERNR),
    CONSTRAINT FK_EMP_PRIV_MASTER FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER (PERNR) ON DELETE CASCADE
) COMMENT '사원 개인정보 (민감정보)';

INSERT INTO ZHR_EMP_PRIV 
(PERNR, SSN, GENDER, BIRTHDATE, NATION_CD, PHONE_NO, EMAIL, ZADDR_MAIN, ZSIDO, ZSIGUNGU, MARITAL_CD, MILITARY_CD, CREATED_BY) 
VALUES 
-- [0] 관리자
('2018001', '850101-1234567', 'M', '1985-01-01', 'KR', '010-1111-2222', 'admin@clsoft.com',   '서울특별시 강남구 테헤란로 123', '서울특별시', '강남구', '20', '10', 'system'),

-- [1] 2022년 입사자
('2201001', '900505-1234567', 'M', '1990-05-05', 'KR', '010-3333-4444', 'chulsoo@naver.com',  '경기도 성남시 분당구 판교로 1', '경기도', '성남시', '20', '10', 'system'),
('2201002', '920303-2345678', 'F', '1992-03-03', 'KR', '010-5555-6666', 'younghee@daum.net',  '서울특별시 송파구 올림픽로 300', '서울특별시', '송파구', '10', '00', 'system'),
('2203003', '881212-1234567', 'M', '1988-12-12', 'KR', '010-7777-8888', 'minjun@gmail.com',   '서울특별시 서초구 반포대로 55', '서울특별시', '서초구', '20', '10', 'system'),
('2203004', '950707-2345678', 'F', '1995-07-07', 'KR', '010-9999-0000', 'seoyeon@naver.com',  '서울특별시 마포구 마포대로 10', '서울특별시', '마포구', '10', '00', 'system'),
('2207005', '930909-1234567', 'M', '1993-09-09', 'KR', '010-1212-3434', 'jihoon@kakao.com',   '경기도 용인시 수지구 포은대로 100', '경기도', '용인시', '10', '10', 'system'),
('2207006', '960404-2345678', 'F', '1996-04-04', 'US', '010-5656-7878', 'seoa_us@gmail.com',  '서울특별시 용산구 이태원로 200', '서울특별시', '용산구', '10', '00', 'system'),
('2209007', '911111-1234567', 'M', '1991-11-11', 'KR', '010-9090-8080', 'doyoon@naver.com',   '서울특별시 강동구 천호대로 99', '서울특별시', '강동구', '20', '10', 'system'),
('2210008', '940202-2345678', 'F', '1994-02-02', 'KR', '010-3434-5656', 'hayoon@daum.net',    '인천광역시 연수구 컨벤시아대로 50', '인천광역시', '연수구', '10', '00', 'system'),
('2210009', '970808-1234567', 'M', '1997-08-08', 'KR', '010-7878-9090', 'jiwoo@gmail.com',    '경기도 수원시 영통구 광교로 88', '경기도', '수원시', '10', '10', 'system'),
('2211010', '981010-1234567', 'M', '1998-10-10', 'KR', '010-2323-4545', 'siwoo@naver.com',    '서울특별시 관악구 관악로 1', '서울특별시', '관악구', '10', '30', 'system'),

-- [2] 2023년 입사자
('2301011', '990101-2345678', 'F', '1999-01-01', 'KR', '010-1357-2468', 'yuna@gmail.com',     '서울특별시 동작구 상도로 77', '서울특별시', '동작구', '10', '00', 'system'),
('2301012', '980505-1234567', 'M', '1998-05-05', 'KR', '010-2468-1357', 'eunwoo@naver.com',   '경기도 안양시 동안구 시민대로 200', '경기도', '안양시', '10', '10', 'system'),
('2302013', '000202-4567890', 'F', '2000-02-02', 'KR', '010-9876-5432', 'jia@daum.net',       '서울특별시 영등포구 여의대로 10', '서울특별시', '영등포구', '10', '00', 'system'),
('2304014', '950606-1234567', 'M', '1995-06-06', 'KR', '010-5432-9876', 'hyukjun@kakao.com',  '서울특별시 구로구 디지털로 300', '서울특별시', '구로구', '20', '10', 'system'),
('2305015', '010303-4567890', 'F', '2001-03-03', 'CN', '010-1122-3344', 'subin_cn@gmail.com', '서울특별시 광진구 능동로 120', '서울특별시', '광진구', '10', '00', 'system'),
('2305016', '940404-1234567', 'M', '1994-04-04', 'KR', '010-2233-4455', 'taehyun@naver.com',  '서울특별시 중구 세종대로 110', '서울특별시', '중구', '10', '10', 'system'),
('2308017', '960808-2345678', 'F', '1996-08-08', 'KR', '010-3344-5566', 'chaewon@daum.net',   '서울특별시 성북구 성북로 10', '서울특별시', '성북구', '10', '00', 'system'),
('2309018', '970909-2345678', 'F', '1997-09-09', 'KR', '010-4455-6677', 'eunbyul@gmail.com',  '서울특별시 강북구 삼양로 50', '서울특별시', '강북구', '10', '00', 'system'),
('2310019', '931010-1234567', 'M', '1993-10-10', 'KR', '010-5566-7788', 'junho@kakao.com',    '경기도 고양시 일산동구 중앙로 1', '경기도', '고양시', '20', '10', 'system'),
('2312020', '991212-2345678', 'F', '1999-12-12', 'KR', '010-6677-8899', 'minseo@naver.com',   '서울특별시 은평구 통일로 200', '서울특별시', '은평구', '10', '00', 'system'),

-- [3] 2024년 입사자
('2401021', '000101-4567890', 'F', '2000-01-01', 'KR', '010-7788-9900', 'jungmin@daum.net',   '서울특별시 서대문구 연세로 50', '서울특별시', '서대문구', '10', '00', 'system'),
('2401022', '980101-1234567', 'M', '1998-01-01', 'KR', '010-8899-0011', 'yejun@gmail.com',    '서울특별시 종로구 종로 1', '서울특별시', '종로구', '10', '30', 'system'),
('2402023', '010202-4567890', 'F', '2001-02-02', 'KR', '010-9900-1122', 'soyul@kakao.com',    '서울특별시 성동구 왕십리로 222', '서울특별시', '성동구', '10', '00', 'system'),
('2402024', '950202-1234567', 'M', '1995-02-02', 'KR', '010-0011-2233', 'siwon@naver.com',    '경기도 부천시 길주로 100', '경기도', '부천시', '20', '10', 'system'),
('2403025', '020303-4567890', 'F', '2002-03-03', 'KR', '010-1122-3344', 'harin@daum.net',     '서울특별시 양천구 목동동로 200', '서울특별시', '양천구', '10', '00', 'system'),
('2404026', '990404-2345678', 'F', '1999-04-04', 'KR', '010-2233-4455', 'yujin@gmail.com',    '서울특별시 강서구 공항대로 300', '서울특별시', '강서구', '10', '00', 'system'),
('2404027', '940404-1234567', 'M', '1994-04-04', 'KR', '010-3344-5566', 'jisung@kakao.com',   '인천광역시 남동구 예술로 150', '인천광역시', '남동구', '10', '10', 'system'),
('2405028', '960505-1234567', 'M', '1996-05-05', 'KR', '010-4455-6677', 'taeyoung@naver.com', '경기도 광명시 철산로 20', '경기도', '광명시', '10', '10', 'system'),
('2405029', '970505-1234567', 'M', '1997-05-05', 'KR', '010-5566-7788', 'woojin@daum.net',    '경기도 시흥시 시청로 1', '경기도', '시흥시', '10', '10', 'system'),
('2406030', '000606-4567890', 'F', '2000-06-06', 'KR', '010-6677-8899', 'jihyun@gmail.com',   '서울특별시 금천구 벚꽃로 100', '서울특별시', '금천구', '10', '00', 'system'),
('2407031', '980707-1234567', 'M', '1998-07-07', 'KR', '010-7788-9900', 'jaeyoon@kakao.com',  '서울특별시 노원구 노해로 400', '서울특별시', '노원구', '10', '30', 'system'),
('2407032', '930707-1234567', 'M', '1993-07-07', 'KR', '010-8899-0011', 'minho@naver.com',    '서울특별시 도봉구 마들로 600', '서울특별시', '도봉구', '20', '10', 'system'),
('2408033', '950808-1234567', 'M', '1995-08-08', 'KR', '010-9900-1122', 'jihuu@daum.net',     '경기도 의정부시 시민로 1', '경기도', '의정부시', '10', '10', 'system'),
('2409034', '990909-2345678', 'F', '1999-09-09', 'KR', '010-0011-2233', 'juwon@gmail.com',    '경기도 파주시 시민회관길 20', '경기도', '파주시', '10', '00', 'system'),
('2409035', '960909-1234567', 'M', '1996-09-09', 'KR', '010-1122-3344', 'haneul@kakao.com',   '경기도 김포시 사우중로 30', '경기도', '김포시', '10', '10', 'system'),
('2410036', '011010-4567890', 'F', '2001-10-10', 'KR', '010-2233-4455', 'jian@naver.com',     '인천광역시 부평구 부평대로 50', '인천광역시', '부평구', '10', '00', 'system'),
('2411037', '021111-4567890', 'F', '2002-11-11', 'KR', '010-3344-5566', 'yeseo@daum.net',     '인천광역시 서구 서곶로 300', '인천광역시', '서구', '10', '00', 'system'),
('2411038', '941111-1234567', 'M', '1994-11-11', 'KR', '010-4455-6677', 'yoonjae@gmail.com',  '경기도 화성시 시청로 100', '경기도', '화성시', '20', '10', 'system'),
('2412039', '031212-4567890', 'F', '2003-12-12', 'KR', '010-5566-7788', 'suhyun@kakao.com',   '경기도 오산시 성호대로 50', '경기도', '오산시', '10', '00', 'system'),
('2412040', '921212-1234567', 'M', '1992-12-12', 'KR', '010-6677-8899', 'dongkyun@naver.com', '경기도 평택시 중앙로 200', '경기도', '평택시', '10', '10', 'system'),

-- [4] 2025년 입사자
('2501041', '030101-4567890', 'F', '2003-01-01', 'KR', '010-7788-9900', 'seah@daum.net',      '충청남도 천안시 서북구 번영로 100', '충청남도', '천안시', '10', '00', 'system'),
('2501042', '980101-1234567', 'M', '1998-01-01', 'KR', '010-8899-0011', 'taejun@gmail.com',   '충청남도 아산시 시민로 30', '충청남도', '아산시', '10', '30', 'system'),
('2502043', '040202-4567890', 'F', '2004-02-02', 'KR', '010-9900-1122', 'heeseon@kakao.com',  '대전광역시 서구 둔산로 100', '대전광역시', '서구', '10', '00', 'system'),
('2503044', '970303-1234567', 'M', '1997-03-03', 'KR', '010-0011-2233', 'kangmin@naver.com',  '대전광역시 유성구 대학로 99', '대전광역시', '유성구', '10', '10', 'system'),
('2503045', '000303-4567890', 'F', '2000-03-03', 'KR', '010-1122-3344', 'daeun@daum.net',     '세종특별자치시 한누리대로 200', '세종특별자치시', NULL, '10', '00', 'system'),
('2504046', '990404-1234567', 'M', '1999-04-04', 'KR', '010-2233-4455', 'suho@gmail.com',     '충청북도 청주시 상당구 상당로 50', '충청북도', '청주시', '10', '10', 'system'),
('2505047', '950505-1234567', 'M', '1995-05-05', 'KR', '010-3344-5566', 'junseo@kakao.com',   '강원특별자치도 춘천시 시청길 10', '강원특별자치도', '춘천시', '10', '10', 'system'),
('2506048', '940606-1234567', 'M', '1994-06-06', 'KR', '010-4455-6677', 'dongwook@naver.com', '강원특별자치도 원주시 시청로 1', '강원특별자치도', '원주시', '20', '10', 'system'),
('2507049', '020707-4567890', 'F', '2002-07-07', 'KR', '010-5566-7788', 'jia@daum.net',       '경상북도 포항시 남구 시청로 1', '경상북도', '포항시', '10', '00', 'system'),
('2508050', '010808-4567890', 'F', '2001-08-08', 'KR', '010-6677-8899', 'yuju@gmail.com',     '경상남도 창원시 의창구 중앙대로 100', '경상남도', '창원시', '10', '00', 'system');

-- Emp_Priv 로그 --
CREATE TABLE ZHR_EMP_PRIV_LOG (
    -- 기본 키 컬럼 (PK)
    LOG_ID          BIGINT          NOT NULL AUTO_INCREMENT COMMENT '로그 ID (PK)',

    -- 변경 추적 컬럼
    PERNR           VARCHAR(10)     NOT NULL COMMENT '대상 사번 (FK)',
    FIELD_NAME      VARCHAR(50)     NOT NULL COMMENT '변경된 필드명',
    OLD_VALUE       VARCHAR(500)    NULL     COMMENT '변경 전 값',
    NEW_VALUE       VARCHAR(500)    NULL     COMMENT '변경 후 값',
    CHANGE_TYPE     VARCHAR(10)     NOT NULL COMMENT '변경 유형 (INSERT, UPDATE)',
    
    -- 감사(Audit) 컬럼 (이름 수정됨)
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '로그 생성자 (수정 행위자)',
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '로그 생성 일시',

    -- 기본 키 설정
    PRIMARY KEY (LOG_ID),

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_LOG_PERNR (PERNR),
    INDEX IDX_LOG_CREATED_AT (CREATED_AT)

) COMMENT '사원 개인정보 변경 이력 로그 테이블';


-- 발령 규칙 -- 
CREATE TABLE ZHR_APPOINT_RULE (
    -- [식별자]
    ZRULE_ID     VARCHAR(10)  NOT NULL COMMENT '발령 기준 ID (PK)',
    
    -- [기본 정보]
    ZRULE_NM     VARCHAR(100) NOT NULL COMMENT '발령 기준명',
    ZRULE_TYPE   VARCHAR(20)  NOT NULL COMMENT '발령 유형 (공통코드 HR_APPTYPE 참조)',
    ZCOND_DESC   VARCHAR(200) NULL     COMMENT '기준 설명',
    
    -- [제어 정보]
    ZUSE_YN      CHAR(1)      NOT NULL DEFAULT 'Y' COMMENT '사용 여부 (Y/N)',
    
    -- [동시성 제어]
    OBJ_VERSION  INT          NOT NULL DEFAULT 1   COMMENT '데이터 버전',
    
    -- [Audit]
    CREATED_AT   DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY   VARCHAR(50)  NOT NULL,
    UPDATED_AT   DATETIME     NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY   VARCHAR(50)  NULL,
    
    PRIMARY KEY (ZRULE_ID)
) COMMENT '인사 발령 기준 관리 (Rule)';

-- 더미 데이터 --
INSERT INTO ZHR_APPOINT_RULE 
(ZRULE_ID, ZRULE_NM, ZRULE_TYPE, ZCOND_DESC, CREATED_BY) 
VALUES 
-- ========================================================
-- 1. [채용] Type: 10 (ID: H1xx)
-- ========================================================
('H101', '신규 채용',      '10', '공채 및 수시 신입 사원 채용', 'SYSTEM'),
('H102', '경력 채용',      '10', '경력직 사원 채용 및 처우 산정', 'SYSTEM'),
('H103', '계약직 채용',    '10', '프로젝트 및 기간제 근로자 채용', 'SYSTEM'),
('H104', '인턴 채용',      '10', '채용 연계형 및 체험형 인턴', 'SYSTEM'),

-- ========================================================
-- 2. [승진] Type: 20 (ID: P2xx)
-- ========================================================
('P201', '정기 승진',      '20', '정기 인사평가 결과에 따른 직급 상승', 'SYSTEM'),
('P202', '특별 승진',      '20', '우수 성과자 및 발탁 승진', 'SYSTEM'),
('P203', '직급 재산정',    '20', '오류 수정 및 경력 재인정에 따른 직급 조정', 'SYSTEM'),

-- ========================================================
-- 3. [전보] Type: 30 (ID: M3xx)
-- ========================================================
('M301', '부서 이동',      '30', '조직 개편 및 순환 근무에 따른 소속 변경', 'SYSTEM'),
('M302', '보직 변경',      '30', '팀장, 파트장 등 직책의 임명 및 해임', 'SYSTEM'),
('M303', '계열사 전출',    '30', '타 계열사로 이동 (전출)', 'SYSTEM'),
('M304', '계열사 전입',    '30', '타 계열사에서 이동 (전입)', 'SYSTEM'),

-- ========================================================
-- 4. [파견] Type: 40 (ID: D4xx)
-- ========================================================
('D401', '국내 파견',      '40', '계열사 및 협력사 국내 파견 근무', 'SYSTEM'),
('D402', '해외 파견',      '40', '해외 법인 및 지사 주재원 파견', 'SYSTEM'),
('D403', '파견 복귀',      '40', '파견 기간 종료에 따른 원소속 복귀', 'SYSTEM'),

-- ========================================================
-- 5. [휴직] Type: 50 (ID: L5xx)
-- ========================================================
('L501', '육아 휴직',      '50', '만 8세 이하 자녀 양육을 위한 휴직', 'SYSTEM'),
('L502', '질병 휴직',      '50', '개인 질병 및 부상 치료를 위한 휴직', 'SYSTEM'),
('L503', '가사 휴직',      '50', '가족 돌봄 및 가사 사정으로 인한 휴직', 'SYSTEM'),
('L504', '출산 휴가',      '50', '출산 전후 법정 휴가', 'SYSTEM'),

-- ========================================================
-- 6. [복직] Type: 60 (ID: R6xx)
-- ========================================================
('R601', '만기 복직',      '60', '휴직 기간 만료에 따른 정상 복직', 'SYSTEM'),
('R602', '조기 복직',      '60', '휴직 사유 소멸로 인한 조기 복귀', 'SYSTEM'),

-- ========================================================
-- 7. [퇴직] Type: 90 (ID: E9xx)
-- ========================================================
('E901', '의원 면직',      '90', '개인 사유(이직 등)에 의한 자발적 퇴직', 'SYSTEM'),
('E902', '정년 퇴직',      '90', '사규에 정해진 정년 도래에 따른 자동 퇴직', 'SYSTEM'),
('E903', '계약 만료',      '90', '근로 계약 기간 종료에 따른 퇴직', 'SYSTEM'),
('E904', '권고 사직',      '90', '회사 사정에 의한 퇴직 권고', 'SYSTEM'),
('E905', '징계 해고',      '90', '징계 위원회 결의에 따른 해고', 'SYSTEM');

-- 발령 항목 정의 --
CREATE TABLE ZHR_APPOINT_FIELDDEF (
    -- [PK: 대리키]
    FIELDDEF_ID  BIGINT       NOT NULL AUTO_INCREMENT COMMENT '항목 정의 ID (PK)',

    -- [비즈니스 키 (UK)]
    ZRULE_TYPE   VARCHAR(20)  NOT NULL COMMENT '발령 유형 (공통코드 HR_APPTYPE 참조)',
    ZFIELD_CD    VARCHAR(20)  NOT NULL COMMENT '항목 코드 (TO_DEPT, TO_RANK 등)',

    -- [표시 정보]
    ZFIELD_NM    VARCHAR(100) NOT NULL COMMENT '항목 명칭 (화면 라벨)',
    ZDATA_TYPE   VARCHAR(20)  NOT NULL DEFAULT 'STRING' COMMENT '데이터 타입 (STRING, NUMBER, DATE, CODE)',
    ZREQUIRED    CHAR(1)      NOT NULL DEFAULT 'N' COMMENT '필수 입력 여부 (Y/N)',
    ZORDER       INT          NOT NULL DEFAULT 0   COMMENT '화면 출력 순서',

    -- [동시성 제어]
    OBJ_VERSION  INT          NOT NULL DEFAULT 1   COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_AT   DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY   VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT   DATETIME     NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY   VARCHAR(50)  NULL     COMMENT '수정자',

    PRIMARY KEY (FIELDDEF_ID),
    -- [중복 방지 제약조건]
    UNIQUE KEY UQ_APPOINT_FIELDDEF (ZRULE_TYPE, ZFIELD_CD)
) COMMENT '인사 발령 항목 정의 (Field Definition)';

-- 더미데이터 -- 
INSERT INTO ZHR_APPOINT_FIELDDEF 
(ZRULE_TYPE, ZFIELD_CD, ZFIELD_NM, ZDATA_TYPE, ZREQUIRED, ZORDER, CREATED_BY) 
VALUES 

-- ========================================================
-- [10] 채용 (Hiring)
-- ========================================================
('10', 'TO_DEPT',    '배치 부서',   'CODE',   'Y', 10, 'SYSTEM'),
('10', 'TO_RANK',    '부여 직급',   'CODE',   'Y', 20, 'SYSTEM'),
('10', 'TO_DUTY',    '부여 직무',   'CODE',   'Y', 30, 'SYSTEM'),
('10', 'TO_SALARY',  '계약 연봉',   'NUMBER', 'Y', 40, 'SYSTEM'),
('10', 'PROB_END',   '수습 종료일', 'DATE',   'N', 50, 'SYSTEM'),

-- ========================================================
-- [20] 승진 (Promotion)
-- ========================================================
('20', 'TO_RANK',    '승진 직급',   'CODE',   'Y', 10, 'SYSTEM'),
('20', 'TO_SALARY',  '조정 연봉',   'NUMBER', 'N', 20, 'SYSTEM'),
('20', 'NOTE',       '평가 코멘트', 'STRING', 'N', 30, 'SYSTEM'),

-- ========================================================
-- [30] 전보 (Transfer)
-- ========================================================
('30', 'TO_DEPT',    '이동 부서',   'CODE',   'Y', 10, 'SYSTEM'),
('30', 'TO_DUTY',    '변경 직무',   'CODE',   'N', 20, 'SYSTEM'),
('30', 'TO_LOC',     '근무지',     'STRING', 'N', 30, 'SYSTEM'),

-- ========================================================
-- [40] 파견 (Dispatch)
-- ========================================================
('40', 'DISP_LOC',   '파견 기관',   'STRING', 'Y', 10, 'SYSTEM'),
('40', 'START_DATE', '파견 시작일', 'DATE',   'Y', 20, 'SYSTEM'),
('40', 'END_DATE',   '파견 종료일', 'DATE',   'Y', 30, 'SYSTEM'),

-- ========================================================
-- [50] 휴직 (Leave)
-- ========================================================
('50', 'LEAVE_RSN',  '휴직 사유',   'STRING', 'Y', 10, 'SYSTEM'),
('50', 'START_DATE', '휴직 시작일', 'DATE',   'Y', 20, 'SYSTEM'),
('50', 'END_DATE',   '휴직 종료일', 'DATE',   'Y', 30, 'SYSTEM'),

-- ========================================================
-- [60] 복직 (Reinstatement)
-- ========================================================
('60', 'TO_DEPT',    '복직 부서',   'CODE',   'Y', 10, 'SYSTEM'),
('60', 'TO_RANK',    '복직 직급',   'CODE',   'Y', 20, 'SYSTEM'),

-- ========================================================
-- [90] 퇴직 (Retirement)
-- ========================================================
('90', 'RET_TYPE',   '퇴직 구분',   'CODE',   'Y', 10, 'SYSTEM'),
('90', 'RET_RSN',    '퇴직 사유',   'STRING', 'Y', 20, 'SYSTEM'),
('90', 'LAST_DATE',  '마지막 근무일', 'DATE', 'Y', 30, 'SYSTEM');


-- 발령 품의 -- 
CREATE TABLE ZHR_APPOINT_REQ (
    -- [식별자]
    ZREQ_ID      VARCHAR(20)  NOT NULL COMMENT '발령 품의 ID (PK) - 예: REQ2025030101',

    -- [기본 정보]
    ZTITLE       VARCHAR(100) NOT NULL COMMENT '품의 제목 - 예: 2025년 상반기 정기 인사',
    ZDESC        VARCHAR(500) NULL     COMMENT '품의 내용 및 사유',
    
    -- [운영 정보]
    ZREQ_DATE    DATE         NOT NULL COMMENT '기안 일자',
    ZREQ_BY      VARCHAR(20)  NOT NULL COMMENT '기안자 사번',
    ZSTATUS      VARCHAR(10)  NOT NULL DEFAULT '10' COMMENT '진행 상태 (공통코드 HR_APPR_STAT 참조)',
    
    -- [동시성 제어]
    OBJ_VERSION  INT          NOT NULL DEFAULT 1   COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_AT   DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY   VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT   DATETIME     NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY   VARCHAR(50)  NULL     COMMENT '수정자',

    PRIMARY KEY (ZREQ_ID)
) COMMENT '인사 발령 품의서 (Header)';

INSERT INTO ZHR_APPOINT_REQ 
(ZREQ_ID, ZTITLE, ZDESC, ZREQ_DATE, ZREQ_BY, ZSTATUS, CREATED_BY) 
VALUES 
-- ==========================================================
-- 1. [작성 중] (Status: 10 - 임시저장)
-- 상황: 인사 담당자가 3월 정기 승진 명단을 작성하고 있는 상태. 아직 결재 안 올림.
-- ==========================================================
('REQ20250301001', '2025년 3월 정기 승진 품의 (작성중)', 
 '2024년 고과 우수자에 대한 정기 승진 건입니다. (현재 대상자 취합 중)', 
 '2025-03-01', '2018001', '10', '2018001'),

-- ==========================================================
-- 2. [결재 중] (Status: 20 - 상신)
-- 상황: 부서 이동 건을 작성해서 결재를 올림. (수정/삭제 불가능해야 함)
-- ==========================================================
('REQ20250228001', '2월 수시 인사 이동', 
 '조직 개편에 따른 개발팀 인원 재배치 건 (결재 진행 중)', 
 '2025-02-28', '2018001', '20', '2018001'),

-- ==========================================================
-- 3. [승인 완료] (Status: 30 - 확정)
-- 상황: 이미 처리가 끝난 1월 신입사원 채용 건. (발령 이력이 확정됨)
-- ==========================================================
('REQ20250101001', '2025년 제15기 신입사원 채용 발령', 
 '2025년 상반기 공개 채용 합격자 20명 배치 완료', 
 '2025-01-01', '2018001', '30', 'SYSTEM'),

-- ==========================================================
-- 4. [반려] (Status: 40 - 거절)
-- 상황: 특별 승진을 올렸으나, 임원 결재 단계에서 거절됨. (사유 수정 후 재상신 필요)
-- ==========================================================
('REQ20250215001', '개발 1팀 특별 승진 품의', 
 '프로젝트 성공에 따른 특별 승진 요청 -> [반려사유] TO 부족으로 인한 반려', 
 '2025-02-15', '2018001', '40', '2018001'),

-- ==========================================================
-- 5. [취소] (Status: 99 - 회수)
-- 상황: 기안자가 올렸다가 내용 오류를 발견하고 스스로 회수한 문서.
-- ==========================================================
('REQ20250210001', '총무팀 파견 근무 요청', 
 '본사 총무팀 지원 파견 요청 건 (기안자 회수)', 
 '2025-02-10', '2018001', '99', '2018001'),
 
 ('REQ20180301001', '2018년 상반기 신입 공채 발령', '제10기 신입사원 채용 건', '2018-03-01', 'SYSTEM', '30', 'SYSTEM'),
('REQ20200301001', '2020년 정기 승진 인사', '2019년 고과 반영 정기 승진', '2020-03-01', 'SYSTEM', '30', 'SYSTEM'),
('REQ20220301001', '2022년 정기 승진 인사', '2021년 고과 반영 정기 승진', '2022-03-01', 'SYSTEM', '30', 'SYSTEM'),
('REQ20230101001', '2023년 기술연구소 조직개편', '연구소 통합에 따른 인원 재배치', '2023-01-01', 'SYSTEM', '30', 'SYSTEM'),
('REQ20240301001', '2024년 핵심인재 특별 승진', '성과 우수자 발탁 승진', '2024-03-01', 'SYSTEM', '30', 'SYSTEM');


-- 발령 이력 --
CREATE TABLE ZHR_APPOINT_HIST (
    -- [식별자]
    ZHIST_ID     VARCHAR(20)  NOT NULL COMMENT '발령 이력 ID (PK) - 예: HIS20250301001',

    -- [참조 정보 (논리적 연결)]
    ZREQ_ID      VARCHAR(20)  NOT NULL COMMENT '발령 품의 ID (Header 참조)',
    PERNR        VARCHAR(20)  NOT NULL COMMENT '대상자 사번 (ZHR_EMP_MASTER 참조)',
    ZRULE_ID     VARCHAR(10)  NOT NULL COMMENT '적용된 발령 기준 ID (ZHR_APPOINT_RULE 참조)',

    -- [발령 정보]
    ZEFF_DATE    DATE         NOT NULL COMMENT '발령 시행일 (Effective Date)',
    ZREMARK      VARCHAR(300) NULL     COMMENT '비고 (개인별 특이사항)',
    
    -- [상태 제어]
    IS_CANCELED  CHAR(1)      NOT NULL DEFAULT 'N' COMMENT '발령 철회 여부 (Y:철회, N:정상)',
    
    -- [동시성 제어 (추가됨)]
    OBJ_VERSION  INT          NOT NULL DEFAULT 1   COMMENT '데이터 버전 (낙관적 락)',
    
    -- [Audit]
    CREATED_AT   DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY   VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT   DATETIME     NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY   VARCHAR(50)  NULL     COMMENT '수정자',

    PRIMARY KEY (ZHIST_ID),
    
    -- [성능 향상 인덱스]
    INDEX IDX_APPOINT_HIST_REQ (ZREQ_ID),    -- 품의서별 조회용
    INDEX IDX_APPOINT_HIST_PERNR (PERNR),    -- 개인별 이력 조회용
    INDEX IDX_APPOINT_HIST_DATE (ZEFF_DATE)  -- 날짜별 발령 조회용
) COMMENT '인사 발령 이력 상세 (Line Item)';

-- 더미 데이터 --
INSERT INTO ZHR_APPOINT_HIST 
(ZHIST_ID, ZREQ_ID, PERNR, ZRULE_ID, ZEFF_DATE, ZREMARK, IS_CANCELED, OBJ_VERSION, CREATED_BY) 
VALUES 

-- ==================================================================================
-- 1. [승인 완료] 2025년 1월 신입 채용 (REQ20250101001)
-- Rule: H101 (신규 채용)
-- 대상: 2501041(진세아), 2501042(원태준) - 실제 마스터의 입사일과 일치시킴
-- ==================================================================================
('HIS20250101001', 'REQ20250101001', '2501041', 'H101', '2025-01-01', '2025년 공채 15기 웹개발', 'N', 1, 'SYSTEM'),
('HIS20250101002', 'REQ20250101001', '2501042', 'H101', '2025-01-01', '2025년 공채 15기 기획',   'N', 1, 'SYSTEM'),

-- ==================================================================================
-- 2. [결재 중] 2월 수시 인사 이동 (REQ20250228001)
-- Rule: M301 (부서 이동)
-- 대상: 2207006(윤서아), 2209007(강도윤) - 기존 부서에서 이동
-- ==================================================================================
('HIS20250228001', 'REQ20250228001', '2207006', 'M301', '2025-02-28', '웹개발팀 -> 모바일앱팀 지원', 'N', 1, '2018001'),
('HIS20250228002', 'REQ20250228001', '2209007', 'M301', '2025-02-28', '서버팀 -> AI데이터팀 이동',   'N', 1, '2018001'),

-- ==================================================================================
-- 3. [작성 중] 2025년 3월 정기 승진 (REQ20250301001)
-- Rule: P201 (정기 승진)
-- 대상: 2210009(한지우), 2211010(오시우) - 대리 승진 대상
-- 특이사항: 2305015(황수빈)은 명단에 넣었다가 '취소(Y)' 처리함 (발령 제외)
-- ==================================================================================
('HIS20250301001', 'REQ20250301001', '2210009', 'P201', '2025-03-01', '2024년 고과 우수 (사원->대리)', 'N', 1, '2018001'),
('HIS20250301002', 'REQ20250301001', '2211010', 'P201', '2025-03-01', '2024년 고과 우수 (사원->대리)', 'N', 1, '2018001'),
-- [철회 예시] 작성 중 제외된 인원
('HIS20250301003', 'REQ20250301001', '2305015', 'P201', '2025-03-01', '승진 연한 미달로 인한 제외',    'Y', 1, '2018001'),

-- ==================================================================================
-- 4. [반려됨] 개발 1팀 특별 승진 (REQ20250215001)
-- Rule: P202 (특별 승진)
-- 대상: 2302013(송지아) - 우수 성과자 추천했으나 반려됨
-- ==================================================================================
('HIS20250215001', 'REQ20250215001', '2302013', 'P202', '2025-02-15', '신규 서비스 런칭 공로 추천', 'N', 1, '2018001'),

-- ==================================================================================
-- 5. [취소됨] 총무팀 파견 근무 요청 (REQ20250210001)
-- Rule: D401 (국내 파견)
-- 대상: 2405028(기태영) - 기안자가 품의 자체를 회수함
-- ==================================================================================
('HIS20250210001', 'REQ20250210001', '2405028', 'D401', '2025-02-10', '본사 지원 파견', 'N', 1, '2018001'),

-- 입사
('HIS20180301001', 'REQ20180301001', '2018001', 'H101', '2018-03-01', '신입 입사', 'N', 1, 'SYSTEM'),
-- 대리 승진
('HIS20200301001', 'REQ20200301001', '2018001', 'P201', '2020-03-01', '정기 승진', 'N', 1, 'SYSTEM'),
-- 과장 승진
('HIS20220301001', 'REQ20220301001', '2018001', 'P201', '2022-03-01', '정기 승진', 'N', 1, 'SYSTEM'),
-- 부서 이동
('HIS20230101001', 'REQ20230101001', '2018001', 'M301', '2023-01-01', '조직 개편', 'N', 1, 'SYSTEM'),
-- 부장 특진
('HIS20240301001', 'REQ20240301001', '2018001', 'P202', '2024-03-01', '특별 승진', 'N', 1, 'SYSTEM');


-- 발령 상세 --
CREATE TABLE ZHR_APPOINT_DETAIL (
    -- [PK: 대리키]
    DETAIL_ID    BIGINT       NOT NULL AUTO_INCREMENT COMMENT '발령 상세 ID (PK)',

    -- [비즈니스 키 (UK 구성용)]
    ZHIST_ID     VARCHAR(20)  NOT NULL COMMENT '발령 이력 ID (ZHR_APPOINT_HIST 참조)',
    ZFIELD_CD    VARCHAR(20)  NOT NULL COMMENT '항목 코드 (ZHR_APPOINT_FIELDDEF 참조)',

    -- [변경 값]
    ZVALUE_OLD   VARCHAR(255) NULL     COMMENT '변경 전 값 (Before)',
    ZVALUE       VARCHAR(255) NULL     COMMENT '변경 후 값 (After)',

    -- [동시성 제어 (추가됨)]
    OBJ_VERSION  INT          NOT NULL DEFAULT 1   COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_AT   DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY   VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT   DATETIME     NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY   VARCHAR(50)  NULL     COMMENT '수정자',

    PRIMARY KEY (DETAIL_ID),

    -- [중복 방지 & 성능] 이력 하나에 동일 항목 중복 불가
    UNIQUE KEY UQ_APPOINT_DETAIL (ZHIST_ID, ZFIELD_CD)
) COMMENT '인사 발령 상세 항목 값 (Vertical Data)';

-- 더미 데이터 --
INSERT INTO ZHR_APPOINT_DETAIL 
(ZHIST_ID, ZFIELD_CD, ZVALUE_OLD, ZVALUE, CREATED_BY) 
VALUES 

-- ==================================================================================
-- 1. [승인 완료] 2025년 1월 신입 채용 (REQ20250101001)
-- Rule Type: 10 (채용) -> Fields: TO_DEPT, TO_RANK, TO_DUTY, TO_SALARY, PROB_END
-- ==================================================================================

-- 1-1. 진세아 (HIS20250101001) : 웹개발팀 / 사원 / 프론트엔드
('HIS20250101001', 'TO_DEPT',   NULL, 'DEV_WEB', 'SYSTEM'),
('HIS20250101001', 'TO_RANK',   NULL, '001',     'SYSTEM'),
('HIS20250101001', 'TO_DUTY',   NULL, 'SW_FE',   'SYSTEM'),
('HIS20250101001', 'TO_SALARY', NULL, '4000',    'SYSTEM'),
('HIS20250101001', 'PROB_END',  NULL, '2025-03-31', 'SYSTEM'), -- 수습 3개월

-- 1-2. 원태준 (HIS20250101002) : 사업본부 / 사원 / 기획
('HIS20250101002', 'TO_DEPT',   NULL, 'BIZ',     'SYSTEM'),
('HIS20250101002', 'TO_RANK',   NULL, '001',     'SYSTEM'),
('HIS20250101002', 'TO_DUTY',   NULL, 'PO',      'SYSTEM'),
('HIS20250101002', 'TO_SALARY', NULL, '4200',    'SYSTEM'),
('HIS20250101002', 'PROB_END',  NULL, '2025-03-31', 'SYSTEM'),


-- ==================================================================================
-- 2. [결재 중] 2월 수시 인사 이동 (REQ20250228001)
-- Rule Type: 30 (전보) -> Fields: TO_DEPT, TO_DUTY, TO_LOC
-- ==================================================================================

-- 2-1. 윤서아 (HIS20250228001) : 웹개발팀(DEV_WEB) -> 기술연구소(DEV) / 모바일앱 개발로 직무 변경
('HIS20250228001', 'TO_DEPT', 'DEV_WEB', 'DEV',    '2018001'),
('HIS20250228001', 'TO_DUTY', 'SW_FE',   'SW_APP', '2018001'),

-- 2-2. 강도윤 (HIS20250228002) : 서버개발팀(DEV_SVR) -> AI데이터팀(DEV_AI) / 직무 유지
('HIS20250228002', 'TO_DEPT', 'DEV_SVR', 'DEV_AI', '2018001'),
('HIS20250228002', 'TO_DUTY', 'SW_BE',   'SW_BE',  '2018001'), -- 직무는 같지만 명시적 기록


-- ==================================================================================
-- 3. [작성 중] 2025년 3월 정기 승진 (REQ20250301001)
-- Rule Type: 20 (승진) -> Fields: TO_RANK, TO_SALARY, NOTE
-- ==================================================================================

-- 3-1. 한지우 (HIS20250301001) : 대리(002) -> 과장(003) 승진
('HIS20250301001', 'TO_RANK',   '002',  '003',  '2018001'),
('HIS20250301001', 'TO_SALARY', '5500', '6300', '2018001'),
('HIS20250301001', 'NOTE',      NULL,   '성과 평가 S등급 달성', '2018001'),

-- 3-2. 오시우 (HIS20250301002) : 대리(002) -> 과장(003) 승진
('HIS20250301002', 'TO_RANK',   '002',  '003',  '2018001'),
('HIS20250301002', 'TO_SALARY', '5400', '6200', '2018001'),

-- 3-3. [취소된 건] 황수빈 (HIS20250301003) : 사원(001) -> 대리(002) 시도했으나 취소됨
-- * 취소되었더라도 작성 당시의 데이터는 남아있음 (이력 관리 목적)
('HIS20250301003', 'TO_RANK',   '001',  '002',  '2018001'),
('HIS20250301003', 'TO_SALARY', '4000', '4800', '2018001'),
('HIS20250301003', 'NOTE',      NULL,   '승진 연한 부족으로 대상 제외', '2018001'),


-- ==================================================================================
-- 4. [반려됨] 특별 승진 (REQ20250215001)
-- Rule Type: 20 (승진)
-- ==================================================================================

-- 4-1. 송지아 (HIS20250215001) : 사원(001) -> 대리(002) 특진 시도
('HIS20250215001', 'TO_RANK',   '001',  '002',  '2018001'),
('HIS20250215001', 'TO_SALARY', '3800', '4500', '2018001'),
('HIS20250215001', 'NOTE',      NULL,   '신규 프로젝트 런칭 공로', '2018001'),


-- ==================================================================================
-- 5. [취소됨] 파견 근무 (REQ20250210001)
-- Rule Type: 40 (파견) -> Fields: DISP_LOC, START_DATE, END_DATE
-- ==================================================================================

-- 5-1. 기태영 (HIS20250210001) : 파견 기안 올렸다가 회수함
('HIS20250210001', 'DISP_LOC',   NULL, '판교 테크노밸리 협력사', '2018001'),
('HIS20250210001', 'START_DATE', NULL, '2025-03-01',          '2018001'),
('HIS20250210001', 'END_DATE',   NULL, '2025-08-31',          '2018001'),

-- [1] 입사: 서버개발팀(DEV_SVR), 사원(001), 백엔드(SW_BE)
('HIS20180301001', 'TO_DEPT',   NULL, 'DEV_SVR', 'SYSTEM'),
('HIS20180301001', 'TO_RANK',   NULL, '001',     'SYSTEM'),
('HIS20180301001', 'TO_DUTY',   NULL, 'SW_BE',   'SYSTEM'),
('HIS20180301001', 'TO_SALARY', NULL, '3800',    'SYSTEM'),

-- [2] 대리 승진: 사원(001) -> 대리(002)
('HIS20200301001', 'TO_RANK',   '001', '002',    'SYSTEM'),
('HIS20200301001', 'TO_SALARY', '4000', '4800',  'SYSTEM'),

-- [3] 과장 승진: 대리(002) -> 과장(003)
('HIS20220301001', 'TO_RANK',   '002', '003',    'SYSTEM'),
('HIS20220301001', 'TO_SALARY', '5000', '6000',  'SYSTEM'),

-- [4] 부서 이동: 서버개발팀(DEV_SVR) -> 기술연구소(DEV)
('HIS20230101001', 'TO_DEPT',   'DEV_SVR', 'DEV', 'SYSTEM'),
('HIS20230101001', 'TO_LOC',    NULL, '판교 본사', 'SYSTEM'),

-- [5] 부장 승진: 과장(003) -> 부장(005) (차장 건너뛰고 특진 가정)
('HIS20240301001', 'TO_RANK',   '003', '005',    'SYSTEM'),
('HIS20240301001', 'TO_SALARY', '6500', '8000',  'SYSTEM'),
('HIS20240301001', 'NOTE',      NULL, 'AI 프로젝트 성공 공로 인정', 'SYSTEM');

-- 사원 인사 정보 --
CREATE TABLE ZHR_EMP_INFO (
    -- 기본 키 컬럼 (PK)
    PERNR           VARCHAR(10)     NOT NULL COMMENT '사번 (PK)',

    -- 인사정보 상세
    ZHIRE_DATE      DATE            NOT NULL COMMENT '입사일',
    ZEMP_TYPE       VARCHAR(10)     NOT NULL COMMENT '고용형태 (코드)',
    ZWORK_TYPE      VARCHAR(10)     NOT NULL COMMENT '근무형태 (코드)',
    ZBIZ_CD         VARCHAR(10)     NOT NULL COMMENT '소속사업장 (코드)',
    ZDEPT_CD        VARCHAR(10)     NOT NULL COMMENT '소속부서 (코드)',
    ZPOS_CD         VARCHAR(10)     NOT NULL COMMENT '직책 (코드)',
    ZGRADE_CD       VARCHAR(10)     NOT NULL COMMENT '직급 (코드)',
    ZDEPT_JOIN      DATE            NOT NULL COMMENT '현 부서 입사일',
    ZEMP_STATUS     VARCHAR(2)      NOT NULL COMMENT '근무상태 (코드: W, L, R 등)',
    ZLAST_APPT_DATE DATE            NOT NULL COMMENT '최종 발령일자',

    -- 감사(Audit) 필드
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL COMMENT '수정자',
    
    -- 기본 키 설정
    PRIMARY KEY (PERNR),

    -- 검색 성능 향상을 위한 인덱스
    INDEX IDX_EMP_DEPT_CD (ZDEPT_CD),
    INDEX IDX_EMP_STATUS (ZEMP_STATUS)

) COMMENT '사원 인사정보 마스터 테이블';



INSERT INTO ZHR_EMP_INFO 
(PERNR, ZHIRE_DATE, ZEMP_TYPE, ZWORK_TYPE, ZBIZ_CD, ZDEPT_CD, ZPOS_CD, ZGRADE_CD, ZDEPT_JOIN, ZEMP_STATUS, ZLAST_APPT_DATE, CREATED_BY, UPDATED_BY) 
VALUES
('2010001', '2010-03-15', 'REG', 'FULL', 'HQ01', 'MGMNT', 'TM_LEAD', 'GRD5', '2019-01-10', 'W', '2024-03-01', 'system', NULL),
('2012011', '2012-01-10', 'REG', 'FULL', 'HQ01', 'FIN', 'PT_LEAD', 'GRD4', '2020-02-01', 'W', '2025-01-15', 'system', NULL),
('2015022', '2015-02-01', 'REG', 'FULL', 'HQ01', 'MKTG', 'STAFF', 'GRD3', '2021-03-15', 'W', '2024-03-01', 'system', NULL),
('2018013', '2018-01-08', 'REG', 'FULL', 'RND01', 'RND_A', 'STAFF', 'GRD3', '2018-01-08', 'W', '2023-03-01', 'system', NULL),
('2019101', '2019-07-01', 'REG', 'FULL', 'HQ01', 'SALE_B', 'STAFF', 'GRD3', '2022-04-01', 'W', '2025-03-01', 'system', NULL),
('2019112', '2019-11-04', 'REG', 'FULL', 'FC01', 'PROD_A', 'STAFF', 'GRD2', '2019-11-04', 'W', '2024-09-01', 'system', NULL),
('2019113', '2019-11-04', 'REG', 'FULL', 'HQ01', 'HR', 'STAFF', 'GRD2', '2023-01-01', 'W', '2023-01-01', 'system', NULL),
('2020023', '2020-03-02', 'REG', 'FULL', 'HQ01', 'MKTG', 'STAFF', 'GRD2', '2020-03-02', 'W', '2025-03-01', 'system', NULL),
('2020121', '2020-12-01', 'CON', 'FULL', 'HQ01', 'DSGN', 'STAFF', 'GRD2', '2020-12-01', 'W', '2024-12-01', 'system', NULL),
('2021002', '2021-01-04', 'REG', 'FULL', 'RND01', 'RND_B', 'PT_LEAD', 'GRD4', '2021-01-04', 'W', '2025-03-01', 'system', NULL),
('2021032', '2021-03-02', 'REG', 'FULL', 'HQ01', 'SALE_A', 'STAFF', 'GRD2', '2021-03-02', 'W', '2024-03-01', 'system', NULL),
('2021041', '2021-04-05', 'REG', 'FULL', 'HQ01', 'FIN', 'STAFF', 'GRD2', '2024-06-01', 'W', '2024-06-01', 'system', NULL),
('2021042', '2021-04-05', 'REG', 'FULL', 'FC01', 'QC', 'STAFF', 'GRD1', '2021-04-05', 'W', '2025-09-01', 'system', NULL),
('2021114', '2021-11-01', 'REG', 'PART', 'HQ01', 'CS', 'STAFF', 'GRD1', '2021-11-01', 'W', '2025-04-01', 'system', NULL),
('2022043', '2022-04-04', 'REG', 'FULL', 'HQ01', 'HR', 'STAFF', 'GRD1', '2022-04-04', 'L', '2024-08-01', 'system', NULL),
('2022052', '2022-05-02', 'REG', 'FULL', 'FC01', 'PROD_B', 'STAFF', 'GRD1', '2022-05-02', 'W', '2025-03-01', 'system', NULL),
('2022055', '2022-05-09', 'REG', 'FULL', 'HQ01', 'SALE_B', 'STAFF', 'GRD1', '2025-01-01', 'W', '2025-01-01', 'system', NULL),
('2022201', '2022-10-04', 'REG', 'FULL', 'HQ01', 'CS', 'STAFF', 'GRD1', '2022-10-04', 'W', '2024-10-01', 'system', NULL),
('2022211', '2022-10-17', 'REG', 'FULL', 'RND01', 'RND_A', 'STAFF', 'GRD1', '2022-10-17', 'W', '2025-03-01', 'system', NULL),
('2023053', '2023-05-01', 'REG', 'FULL', 'HQ01', 'MKTG', 'STAFF', 'GRD1', '2023-05-01', 'W', '2025-03-01', 'system', NULL),
('2023101', '2023-10-02', 'CON', 'FULL', 'RND01', 'RND_C', 'STAFF', 'GRD1', '2023-10-02', 'W', '2024-10-01', 'system', NULL),
('2023131', '2023-10-04', 'REG', 'FULL', 'FC01', 'PROD_A', 'STAFF', 'GRD1', '2023-10-04', 'W', '2025-09-01', 'system', NULL),
('2023133', '2023-10-16', 'REG', 'FULL', 'HQ01', 'FIN', 'STAFF', 'GRD1', '2023-10-16', 'W', '2025-01-15', 'system', NULL),
('2023212', '2023-11-06', 'REG', 'FULL', 'HQ01', 'HR', 'STAFF', 'GRD1', '2023-11-06', 'W', '2025-03-01', 'system', NULL),
('2023213', '2023-11-13', 'REG', 'FULL', 'HQ01', 'SALE_A', 'STAFF', 'GRD1', '2023-11-13', 'W', '2024-12-01', 'system', NULL),
('2024132', '2024-01-02', 'REG', 'FULL', 'RND01', 'RND_B', 'STAFF', 'GRD1', '2024-01-02', 'W', '2025-03-01', 'system', NULL),
('2024134', '2024-01-02', 'REG', 'FULL', 'HQ01', 'MKTG', 'STAFF', 'GRD1', '2024-01-02', 'W', '2025-03-01', 'system', NULL),
('2025001', '2025-01-06', 'REG', 'FULL', 'HQ01', 'SALE_A', 'STAFF', 'GRD1', '2025-01-06', 'W', '2025-01-06', 'system', NULL),
('2025002', '2025-01-06', 'REG', 'FULL', 'HQ01', 'DSGN', 'STAFF', 'GRD1', '2025-01-06', 'W', '2025-01-06', 'system', NULL),
('2025003', '2025-03-03', 'REG', 'FULL', 'FC01', 'QC', 'STAFF', 'GRD1', '2025-03-03', 'W', '2025-03-03', 'system', NULL),
('2025004', '2025-03-03', 'REG', 'FULL', 'HQ01', 'CS', 'STAFF', 'GRD1', '2025-03-03', 'W', '2025-03-03', 'system', NULL);


-- 사원 자격증 정보 --
CREATE TABLE ZHR_EMP_CERT (
    CERT_ID            BIGINT          NOT NULL AUTO_INCREMENT COMMENT '자격증 ID (PK)',
    PERNR              VARCHAR(10)     NOT NULL COMMENT '사원번호 (FK)',
    ZSEQ               INT             NOT NULL COMMENT '자격증 순번',

    --  자격증 코드화 (통계/검색용)
    ZCERT_CD           VARCHAR(20)     NULL     COMMENT '자격증 코드 (Common Code: HR_CERT_CD)',
    ZCERT_NAME         VARCHAR(100)    NOT NULL COMMENT '자격증명 (코드에 없으면 직접 입력)',
    
    --  등급 및 점수 (승진 가점용)
    ZCERT_RANK         VARCHAR(20)     NULL     COMMENT '자격 등급 (Common Code: HR_CERT_RANK - 기사/산업기사/1급/2급 등)',
    ZCERT_SCORE        DECIMAL(5,2)    NULL     COMMENT '취득 점수/등급 (토익 900, OPIC AL 등)',

    ZCERT_ORG          VARCHAR(100)    NOT NULL COMMENT '발급기관',
    ZCERT_NO           VARCHAR(50)     NULL     COMMENT '자격증 번호',
    
    ZGET_DATE          DATE            NOT NULL COMMENT '취득일자',
    ZEXP_DATE          DATE            NULL     COMMENT '유효기간 (없으면 9999-12-31)',
    
    --  HR 운영 컬럼
    ZJOB_REL           CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '직무 연관성 (Y/N)',
    ZALLOW_YN          CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '자격수당 지급 대상 여부 (Y/N)',
    ZCONFIRM_YN        CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '담당자 확인(원본대조) 여부 (Y/N)',
    
    ZREMARK            VARCHAR(200)    NULL     COMMENT '비고',
    ZATTACH_ID         VARCHAR(100)    NULL     COMMENT '증빙파일 ID',

    -- 감사(Audit)
    CREATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY         VARCHAR(50)     NOT NULL,
    UPDATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY         VARCHAR(50)     NULL,

    PRIMARY KEY (CERT_ID),
    UNIQUE KEY UK_ZHR_EMP_CERT_01 (PERNR, ZSEQ),
    
    CONSTRAINT FK_ZHR_EMP_CERT_MASTER 
        FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER(PERNR) ON DELETE CASCADE
) COMMENT '사원 자격증 및 어학 정보';



-- 더미데이터 --
INSERT INTO ZHR_EMP_CERT 
(PERNR, ZSEQ, ZCERT_CD, ZCERT_NAME, ZCERT_RANK, ZCERT_SCORE, ZCERT_ORG, ZCERT_NO, ZGET_DATE, ZEXP_DATE, ZALLOW_YN, ZCONFIRM_YN, ZREMARK, CREATED_BY) 
VALUES 
-- 양한재: 정보처리기사, AWS SAA, PMP
('2018001', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '10-12345678', '2010-06-01', '9999-12-31', 'Y', 'Y', '특급 기술자', 'system'),
('2018001', 2, 'IT004', 'AWS SAA', '90', NULL, 'AWS', 'AWS-SAA-1234', '2023-05-15', '2026-05-14', 'Y', 'Y', '프로젝트 리더', 'system'),
('2018001', 3, 'ETC99', 'PMP', '10', NULL, 'PMI', 'PMP-8888', '2019-01-01', '2025-12-31', 'N', 'Y', NULL, 'system'),

-- 김철수 (퇴직): 정보처리기사, SQLD
('2201001', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '08-111111', '2008-05-01', '9999-12-31', 'N', 'Y', NULL, 'system'),
('2201001', 2, 'IT003', 'SQLD', '90', 70.00, '한국데이터산업진흥원', 'SQL-15-001', '2015-09-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 이영희 (마케팅): GTQ 1급, 검색광고마케터 1급
('2201002', 1, 'ETC99', 'GTQ 1급', '50', NULL, 'KPC', 'GTQ-15-001', '2020-05-01', '9999-12-31', 'N', 'Y', '디자인', 'system'),
('2201002', 2, 'ETC99', '검색광고마케터 1급', '50', NULL, 'KAIT', 'SA-21-001', '2021-03-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 박민준 (사업): PMP, 정보처리기사
('2203003', 1, 'ETC99', 'PMP', '10', NULL, 'PMI', '2021-06-01', '2024-06-01', '2024-06-01', 'N', 'Y', '갱신 필요', 'system'),
('2203003', 2, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '15-888888', '2015-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 정지훈 (재무): CPA
('2207005', 1, 'FN001', 'CPA(공인회계사)', '10', NULL, '금융감독원', 'CPA-22-001', '2021-09-01', '9999-12-31', 'Y', 'Y', '전문직 수당', 'system'),

-- 최서연 (인사): 노무사
('2203004', 1, 'ETC99', '공인노무사', '10', NULL, '한국산업인력공단', 'HR-15-777', '2015-11-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 윤서아 (개발): 정보처리기사, SQLD
('2207006', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '18-222222', '2018-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),
('2207006', 2, 'IT003', 'SQLD', '90', 84.00, '한국데이터산업진흥원', 'SQL-21-999', '2021-05-05', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 강도윤 (보안): 정보보안기사
('2209007', 1, 'IT002', '정보보안기사', '20', 75.00, 'KISA', 'SEC-20-111', '2020-11-01', '9999-12-31', 'Y', 'Y', '보안파트', 'system'),

-- 임하윤 (사업): 유통관리사 2급
('2210008', 1, 'ETC99', '유통관리사 2급', '51', NULL, '대한상공회의소', 'DIST-19-01', '2019-05-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 한지우 (마케팅): 사회조사분석사 2급
('2210009', 1, 'ETC99', '사회조사분석사 2급', '51', NULL, '한국산업인력공단', 'SR-20-001', '2020-08-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 오시우 (경영): 전산세무/회계
('2211010', 1, 'FN002', '전산세무1급', '50', NULL, '한국세무사회', 'TAX-19-55', '2019-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),
('2211010', 2, 'ETC99', '재경관리사', '90', NULL, '삼일회계법인', 'FIN-20-88', '2020-12-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 신유나 (인사): HRM전문가, ERP정보관리사
('2301011', 1, 'ETC99', 'HRM전문가', '90', NULL, '한국공인노무사회', 'HRM-21-01', '2021-05-01', '9999-12-31', 'Y', 'N', '자격증 사본 미제출', 'system'),
('2301011', 2, 'ETC99', 'ERP정보관리사(인사)', '50', NULL, 'KPC', 'ERP-22-01', '2022-02-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 장은우 (AI): 빅데이터, ADsP
('2301012', 1, 'ETC99', '빅데이터분석기사', '20', NULL, '한국데이터산업진흥원', 'BD-22-001', '2022-06-01', '9999-12-31', 'N', 'Y', NULL, 'system'),
('2301012', 2, 'ETC99', 'ADsP', '90', NULL, '한국데이터산업진흥원', 'ADSP-21-55', '2021-03-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 송지아 (사업): 무역영어 1급
('2302013', 1, 'ETC99', '무역영어 1급', '50', NULL, '대한상공회의소', 'TR-21-001', '2021-09-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 황수빈 (마케팅): 컴퓨터그래픽스운용기능사
('2305015', 1, 'ETC99', '컴퓨터그래픽스운용기능사', '40', NULL, '한국산업인력공단', 'CG-20-001', '2020-06-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 안태현 (경영): 전산회계 1급
('2305016', 1, 'FN002', '전산회계1급', '50', NULL, '한국세무사회', 'ACC-21-33', '2021-05-01', '9999-12-31', 'Y', 'N', NULL, 'system'),

-- 문채원 (인사): 직업상담사 2급
('2308017', 1, 'ETC99', '직업상담사 2급', '51', NULL, '한국산업인력공단', 'JC-19-001', '2019-11-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 고은별 (웹): 정보처리산업기사
('2309018', 1, 'IT001', '정보처리산업기사', '30', NULL, '한국산업인력공단', '19-444444', '2019-05-01', '9999-12-31', 'Y', 'N', '기사 자격 취득 예정', 'system'),

-- 배준호 (서버): AWS SAA
('2310019', 1, 'IT004', 'AWS SAA', '90', NULL, 'AWS', 'AWS-22-099', '2022-10-01', '2025-09-30', 'Y', 'Y', '만료일 확인 필요', 'system'),

-- 조민서 (영업): 운전면허
('2312020', 2, 'ETC99', '1종보통운전면허', '90', NULL, '경찰청', 'DL-11-222', '2018-01-01', '2028-01-01', 'N', 'Y', '영업용', 'system'),

-- 유정민 (재무): 전산회계 1급
('2401021', 1, 'FN002', '전산회계1급', '50', NULL, '한국세무사회', 'ACC-23-01', '2023-02-01', '9999-12-31', 'Y', 'N', '1급 준비중', 'system'),

-- 홍예준 (웹): 정보처리기사
('2401022', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '23-555111', '2023-11-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 나소율 (마케팅): 브랜드관리사 2급
('2402023', 1, 'ETC99', '브랜드관리사 2급', '51', NULL, '브랜드협회', 'BM-23-01', '2023-07-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 백시원 (신입): 전산세무
('2402024', 3, 'FN002', '전산세무1급', '50', NULL, '한국세무사회', 'TAX-22-11', '2022-05-01', '9999-12-31', 'N', 'Y', '인사팀이지만 보유', 'system'),

-- 노하린 (AI): SQLD
('2403025', 1, 'IT003', 'SQLD', '90', 92.00, '데이터산업진흥원', 'SQL-23-888', '2023-09-01', '9999-12-31', 'Y', 'N', '우수 합격', 'system'),

-- 차유진 (사업): 물류관리사
('2404026', 1, 'ETC99', '물류관리사', '10', NULL, '한국산업인력공단', 'LOG-22-01', '2022-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 표지성 (서버): 정보처리기사, 정보기기운용기능사
('2404027', 1, 'ETC99', '정보기기운용기능사', '40', NULL, '한국산업인력공단', 'TECH-12-33', '2012-01-01', '9999-12-31', 'N', 'N', '고교시절 취득', 'system'),
('2404027', 2, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '20-555555', '2020-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 선우진 (앱): 정보처리기사
('2405029', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '22-111111', '2022-11-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 왕지현 (마케팅): Google Analytics
('2406030', 1, 'ETC99', 'Google Analytics (GA4)', '99', NULL, 'Google', 'GA-24-001', '2024-01-01', '2025-01-01', 'Y', 'Y', '갱신 필요', 'system'),

-- 서재윤 (인사): 공인노무사 1차
('2407031', 1, 'ETC99', '공인노무사 1차', '99', NULL, '한국산업인력공단', 'HR1-23-01', '2023-06-01', '9999-12-31', 'N', 'Y', '1차 합격', 'system'),

-- 방민호 (영업): 유통관리사 2급
('2407032', 1, 'ETC99', '유통관리사 2급', '51', NULL, '대한상공회의소', 'DIST-23-01', '2023-05-01', '9999-12-31', 'Y', 'N', NULL, 'system'),

-- 편지후 (웹): 정보처리산업기사
('2408033', 1, 'IT001', '정보처리산업기사', '30', NULL, '한국산업인력공단', '21-888888', '2021-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 성주원 (재무): 재경관리사
('2409034', 1, 'ETC99', '재경관리사', '90', NULL, '삼일회계법인', 'FIN-23-01', '2023-12-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 위하늘 (AI): ADsP
('2409035', 1, 'ETC99', 'ADsP', '90', NULL, '데이터산업진흥원', 'ADSP-23-01', '2023-03-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 명지안 (서버): 정보보안기사
('2410036', 1, 'IT002', '정보보안기사', '20', NULL, 'KISA', 'SEC-23-01', '2023-11-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 금예서 (마케팅): 검색광고마케터 1급
('2411037', 1, 'ETC99', '검색광고마케터 1급', '50', NULL, 'KAIT', 'SA-24-01', '2024-03-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 도윤재 (사업): 국제무역사 1급
('2411038', 1, 'ETC99', '국제무역사 1급', '50', NULL, '한국무역협회', 'TR-22-01', '2022-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 채수현 (인사): ERP정보관리사(인사)
('2412039', 1, 'ETC99', 'ERP정보관리사(인사)', '50', NULL, 'KPC', 'ERP-23-05', '2023-05-01', '9999-12-31', 'N', 'Y', NULL, 'system'),

-- 하동균 (앱): 정보처리기사
('2412040', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '19-123456', '2019-08-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 진세아 (웹): 정보처리기사
('2501041', 1, 'IT001', '정보처리기사', '20', NULL, '한국산업인력공단', '24-000123', '2024-11-01', '9999-12-31', 'Y', 'Y', '자격증 사본 미제출', 'system'),

-- 원태준 (사업): 유통관리사 2급
('2501042', 1, 'ETC99', '유통관리사 2급', '51', NULL, '대한상공회의소', 'DIST-24-01', '2024-05-01', '9999-12-31', 'Y', 'N', NULL, 'system'),

-- 라희선 (마케팅): GTQ 1급
('2502043', 1, 'ETC99', 'GTQ 1급', '50', NULL, 'KPC', 'GTQ-23-01', '2023-10-01', '9999-12-31', 'N', 'Y', '디자인', 'system'),

-- 설강민 (인사): 사회조사분석사 2급
('2503044', 1, 'ETC99', '사회조사분석사 2급', '51', NULL, '한국산업인력공단', 'SR-24-01', '2024-08-01', '9999-12-31', 'N', 'N', NULL, 'system'),

-- 경수호 (AI): SQLP
('2504046', 1, 'IT003', 'SQLP', '90', 70.00, '데이터산업진흥원', 'SQLP-24-01', '2024-12-01', '9999-12-31', 'Y', 'Y', '전문가 자격', 'system'),

-- 봉준서 (서버): AWS SOA
('2505047', 1, 'IT004', 'AWS SOA', '90', NULL, 'AWS', 'AWS-SO-01', '2025-01-01', '2028-01-01', 'Y', 'Y', NULL, 'system'),

-- 엄지아 (마케팅): 웹디자인기능사
('2507049', 1, 'ETC99', '웹디자인기능사', '40', NULL, '한국산업인력공단', 'WEB-23-01', '2023-12-01', '9999-12-31', 'Y', 'Y', NULL, 'system'),

-- 함유주 (앱): AWS SAA
('2508050', 1, 'IT004', 'AWS SAA', '90', NULL, 'AWS', 'AWS-25-001', '2025-07-01', '2028-06-30', 'Y', 'Y', '신규 취득 승인 대기', 'system');

-- 어학 --
CREATE TABLE ZHR_EMP_LANG (
    LANG_ID            BIGINT          NOT NULL AUTO_INCREMENT COMMENT '어학 ID (PK)',
    PERNR              VARCHAR(10)     NOT NULL COMMENT '사번 (FK)',
    ZSEQ               INT             NOT NULL COMMENT '순번',

    -- [핵심] 언어 및 시험 코드화
    ZLANG_CD           VARCHAR(20)     NOT NULL COMMENT '언어 코드 (Common Code: HR_LANG - EN, JP, CN 등)',
    ZTEST_CD           VARCHAR(20)     NULL     COMMENT '시험 코드 (Common Code: HR_LANG_TEST - TOEIC, OPIC, ETC)',
    ZTEST_NAME         VARCHAR(50)     NULL     COMMENT '시험명 (기타 입력 시 사용)',

    -- [성적] 점수와 등급
    ZSCORE             VARCHAR(20)     NULL     COMMENT '점수/등급 (예: 950, AL, IH)',
    
    -- [일자]
    ZGET_DATE          DATE            NOT NULL COMMENT '취득일자',
    ZEXP_DATE          DATE            NULL     COMMENT '만료일자 (공인어학성적용)',

    -- [수준] 회화/독해 수준 (자체 평가용)
    ZSPEAK_LVL         VARCHAR(10)     NULL     COMMENT '회화 수준 (Common Code: HR_LANG_LVL)',
    ZREAD_LVL          VARCHAR(10)     NULL     COMMENT '독해 수준 (Common Code: HR_LANG_LVL)',

    ZATTACH_ID         VARCHAR(100)    NULL     COMMENT '첨부파일 ID',
    ZREMARK            VARCHAR(200)    NULL     COMMENT '비고',
    
    -- [동시성 제어]
    VERSION            INT             NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금)',

    -- [Audit]
    CREATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY         VARCHAR(50)     NOT NULL,
    UPDATED_AT         DATETIME        NULL     ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY         VARCHAR(50)     NULL,

    PRIMARY KEY (LANG_ID),
    UNIQUE KEY UK_EMP_LANG_01 (PERNR, ZSEQ),

    CONSTRAINT FK_ZHR_EMP_LANG_MASTER 
        FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER(PERNR) ON DELETE CASCADE

) COMMENT '사원 어학 능력 정보';

-- 더미 데이터 --
INSERT INTO ZHR_EMP_LANG 
(PERNR, ZSEQ, ZLANG_CD, ZTEST_CD, ZTEST_NAME, ZSCORE, ZGET_DATE, ZEXP_DATE, ZSPEAK_LVL, ZREAD_LVL, ZREMARK, CREATED_BY) 
VALUES 

-- ============================================================
-- [1. 필수] 2018001 양한재 (기술연구소 부장) - 영어 능통, 일본어 가능
-- ============================================================
('2018001', 1, 'EN', 'TE03', 'OPIc', 'AL', '2023-05-10', '2025-05-09', '20', '20', '해외 컨퍼런스 발표 가능', 'system_admin'),
('2018001', 2, 'JP', 'JP02', 'JLPT', 'N2', '2015-12-01', NULL, '40', '30', '기술 문서 독해 가능', 'system_admin'),

-- ============================================================
-- [2. 필수] 2201001 김철수 (퇴직자) - 만료된 성적
-- ============================================================
('2201001', 1, 'EN', 'TE01', 'TOEIC', '850', '2019-03-01', '2021-02-28', '40', '30', '만료됨', 'system_admin'),

-- ============================================================
-- [3] 해외영업/마케팅 (BIZ, BIZ_SAL, BIZ_MKT) - 제2외국어 및 고득점
-- ============================================================
-- 2312020 조민서 (영업) - 영어, 중국어
('2312020', 1, 'EN', 'TE02', 'TOEIC Speaking', '180', '2024-01-15', '2026-01-14', '20', '20', 'Level 7 (AM)', 'system_admin'),
('2312020', 2, 'CN', 'CN02', 'TSC', 'Level 4', '2023-08-20', '2025-08-19', '40', '40', '일상 회화', 'system_admin'),

-- 2305015 황수빈 (마케팅) - 중국어 특기자
('2305015', 1, 'CN', 'CN01', 'HSK', '6급 240', '2023-11-05', '2025-11-04', '20', '10', '중국 유학 경험', 'system_admin'),
('2305015', 2, 'EN', 'TE01', 'TOEIC', '780', '2023-02-01', '2025-01-31', '40', '30', NULL, 'system_admin'),

-- 2210009 한지우 (마케팅) - 영어, 스페인어
('2210009', 1, 'EN', 'TE03', 'OPIc', 'IH', '2022-12-10', '2024-12-09', '30', '20', NULL, 'system_admin'),
('2210009', 2, 'ES', 'ES01', 'DELE', 'B2', '2021-05-01', NULL, '40', '30', '스페인어권 담당', 'system_admin'),

-- 2407032 방민호 (영업) - 영어
('2407032', 1, 'EN', 'TE01', 'TOEIC', '920', '2024-03-01', '2026-02-28', '30', '20', '고득점', 'system_admin'),
('2407032', 2, 'EN', 'TE02', 'TOEIC Speaking', '150', '2024-04-01', '2026-03-31', '30', '30', 'Level 6 (IM3)', 'system_admin'),

-- 2506048 마동욱 (영업) - 영어, 베트남어
('2506048', 1, 'EN', 'TE03', 'OPIc', 'IM2', '2025-01-10', '2027-01-09', '40', '30', NULL, 'system_admin'),
('2506048', 2, 'VN', 'ETC', 'OPIc Vietnamese', 'IM1', '2025-02-01', '2027-01-31', '40', '50', '베트남어 기초', 'system_admin'),

-- 2507049 엄지아 (마케팅) - 프랑스어
('2507049', 1, 'FR', 'FR01', 'DELF/DALF', 'B1', '2024-11-01', NULL, '40', '40', '프랑스 교환학생', 'system_admin'),

-- ============================================================
-- [4] 인사/경영지원 (HR, MGT) - 어학 능력 우수자 다수
-- ============================================================
-- 2203004 최서연 (인사 과장)
('2203004', 1, 'EN', 'TE01', 'TOEIC', '950', '2023-06-01', '2025-05-31', '20', '10', '업무 활용도 높음', 'system_admin'),
('2203004', 2, 'JP', 'JP01', 'JPT', '800', '2022-09-01', '2024-08-31', '30', '30', NULL, 'system_admin'),

-- 2402024 백시원 (인사 신입) - Super Rookie
('2402024', 1, 'EN', 'TE01', 'TOEIC', '985', '2023-12-15', '2025-12-14', '20', '10', '거의 만점', 'system_admin'),
('2402024', 2, 'EN', 'TE03', 'OPIc', 'AL', '2024-01-05', '2026-01-04', '10', '10', '원어민 수준', 'system_admin'),
('2402024', 3, 'DE', 'DE01', 'Goethe-Zertifikat', 'B1', '2023-08-01', NULL, '40', '40', '독일어 가능', 'system_admin'),

-- 2301011 신유나 (인사)
('2301011', 1, 'EN', 'TE02', 'TOEIC Speaking', '160', '2023-02-20', '2025-02-19', '30', '30', 'Level 6', 'system_admin'),

-- 2211010 오시우 (경영)
('2211010', 1, 'EN', 'TE01', 'TOEIC', '700', '2022-10-01', '2024-09-30', '40', '40', '승진 요건 충족', 'system_admin'),

-- 2305016 안태현 (경영)
('2305016', 1, 'JP', 'JP02', 'JLPT', 'N1', '2021-07-01', NULL, '20', '10', '일본어 능통', 'system_admin'),

-- ============================================================
-- [5] 개발 직군 (DEV) - 독해 위주, 점수는 다양함
-- ============================================================
-- 2207006 윤서아 (웹개발)
('2207006', 1, 'EN', 'TE03', 'OPIc', 'IM1', '2022-05-01', '2024-04-30', '40', '30', NULL, 'system_admin'),

-- 2209007 강도윤 (서버개발)
('2209007', 1, 'EN', 'TE01', 'TOEIC', '820', '2022-11-11', '2024-11-10', '40', '30', NULL, 'system_admin'),

-- 2301012 장은우 (AI개발) - 논문 독해 능력
('2301012', 1, 'EN', 'TE04', 'TOEFL', '105', '2023-02-01', '2025-01-31', '30', '20', '원서 독해 우수', 'system_admin'),
('2301012', 2, 'EN', 'TE05', 'TEPS', '450', '2023-01-01', '2025-01-01', '30', '20', NULL, 'system_admin'),

-- 2304014 권혁준 (앱개발)
('2304014', 1, 'EN', 'TE03', 'OPIc', 'IL', '2023-03-15', '2025-03-14', '50', '40', '회화는 약함', 'system_admin'),

-- 2309018 고은별 (웹개발)
('2309018', 1, 'JP', 'JP02', 'JLPT', 'N3', '2020-12-01', NULL, '40', '40', '취미 일본어', 'system_admin'),

-- 2310019 배준호 (서버개발)
('2310019', 1, 'EN', 'TE06', 'G-TELP', 'Level 2 65', '2023-09-01', '2025-08-31', '40', '30', NULL, 'system_admin'),

-- 2401022 홍예준 (웹개발)
('2401022', 1, 'EN', 'TE01', 'TOEIC', '880', '2023-12-01', '2025-11-30', '30', '30', '입사 성적', 'system_admin'),

-- 2403025 노하린 (AI개발)
('2403025', 1, 'EN', 'TE07', 'IELTS', '7.0', '2024-01-20', '2026-01-19', '20', '20', '유학 준비 경험', 'system_admin'),

-- 2404027 표지성 (서버개발)
('2404027', 1, 'EN', 'TE01', 'TOEIC', '650', '2023-05-01', '2025-04-30', '50', '40', NULL, 'system_admin'),

-- 2501041 진세아 (웹개발)
('2501041', 1, 'EN', 'TE03', 'OPIc', 'IH', '2024-11-15', '2026-11-14', '30', '30', NULL, 'system_admin'),

-- 2504046 경수호 (AI개발)
('2504046', 1, 'EN', 'TE01', 'TOEIC', '910', '2024-12-01', '2026-11-30', '30', '20', NULL, 'system_admin'),

-- 2505047 봉준서 (서버개발)
('2505047', 1, 'EN', 'ETC', 'IT English', 'Pass', '2025-03-01', NULL, '40', '30', '사내 어학 과정 이수', 'system_admin'),

-- 2508050 함유주 (앱개발)
('2508050', 1, 'JP', 'JP03', 'SJPT', 'Level 3', '2025-06-01', '2027-05-31', '40', '40', NULL, 'system_admin'),

-- ============================================================
-- [6] 재무/회계 (FIN) - 꼼꼼한 성격, 점수 관리
-- ============================================================
-- 2207005 정지훈 (재무 - 22년 입사)
('2207005', 1, 'EN', 'TE01', 'TOEIC', '890', '2022-05-01', '2024-04-30', '40', '20', NULL, 'system_admin'),

-- 2401021 유정민 (재무)
('2401021', 1, 'EN', 'TE02', 'TOEIC Speaking', '140', '2023-11-01', '2025-10-31', '40', '40', 'Level 5 (IM2)', 'system_admin'),

-- 2409034 성주원 (재무)
('2409034', 1, 'CN', 'CN03', 'BCT', 'Level 2', '2024-07-01', '2026-06-30', '50', '40', '비즈니스 중국어 기초', 'system_admin'),

-- 2503045 옥다은 (재무)
('2503045', 1, 'EN', 'TE01', 'TOEIC', '935', '2025-01-01', '2027-01-01', '30', '20', NULL, 'system_admin'),

-- ============================================================
-- [7] 기타 사원들 (다양한 언어 및 기타 시험)
-- ============================================================
-- 2402023 나소율 (마케팅)
('2402023', 1, 'RU', 'ETC', 'TORFL', '1급', '2023-05-01', NULL, '40', '30', '러시아어 전공', 'system_admin'),

-- 2406030 왕지현 (마케팅)
('2406030', 1, 'EN', 'TE03', 'OPIc', 'AL', '2024-04-01', '2026-03-31', '20', '20', '영어 능통', 'system_admin'),
('2406030', 2, 'FR', 'FR01', 'DELF/DALF', 'A2', '2023-01-01', NULL, '50', '50', '기초 프랑스어', 'system_admin'),

-- 2411037 금예서 (마케팅)
('2411037', 1, 'EN', 'TE01', 'TOEIC', '800', '2024-09-01', '2026-08-31', '40', '30', NULL, 'system_admin'),

-- 2411038 도윤재 (사업)
('2411038', 1, 'EN', 'TE02', 'TOEIC Speaking', '170', '2024-10-01', '2026-09-30', '30', '30', 'Level 6 (IH)', 'system_admin'),

-- 2501042 원태준 (사업)
('2501042', 1, 'JP', 'JP01', 'JPT', '650', '2024-12-01', '2026-11-30', '40', '40', NULL, 'system_admin'),

-- 2502043 라희선 (마케팅)
('2502043', 1, 'EN', 'TE03', 'OPIc', 'IM3', '2025-01-01', '2027-01-01', '40', '30', NULL, 'system_admin'),

-- 2503044 설강민 (인사)
('2503044', 1, 'EN', 'TE01', 'TOEIC', '870', '2024-12-15', '2026-12-14', '40', '30', NULL, 'system_admin'),

-- 2209007 강도윤 (서버 - 추가)
('2209007', 2, 'EN', 'ETC', 'IT Technical Writing', 'Pass', '2023-01-01', NULL, '50', '30', '기술 문서 작성 과정', 'system_admin');


CREATE TABLE ZHR_EMP_CAREER (
    CAREER_ID          BIGINT          NOT NULL AUTO_INCREMENT COMMENT '경력 ID (PK)',
    PERNR              VARCHAR(10)     NOT NULL COMMENT '사번 (FK)',
    ZSEQ               INT             NOT NULL COMMENT '경력 순번',

    -- [핵심] 경력 구분 및 회사 정보
    ZCAREER_TYPE       VARCHAR(20)     NOT NULL COMMENT '근무 형태 (Common Code: HR_CAREER_TYPE - 정규직, 계약직, 인턴, 프리랜서)',
    ZCOMP_NAME         VARCHAR(100)    NOT NULL COMMENT '회사명',
    ZDEPT_NAME         VARCHAR(100)    NULL     COMMENT '근무 부서명',
    
    -- [직무 정보]
    ZJOB_RANK          VARCHAR(50)     NULL     COMMENT '최종 직위/직급 (과장, 대리 등)',
    ZJOB_DUTY          VARCHAR(100)    NULL     COMMENT '담당 직무 (예: 서버 개발, 회계 결산)',
    ZJOB_DESC          VARCHAR(500)    NULL     COMMENT '업무 상세 내용 (프로젝트 등)',

    -- [기간]
    ZSTART_DATE        DATE            NOT NULL COMMENT '입사일',
    ZEND_DATE          DATE            NOT NULL COMMENT '퇴사일',
    -- ZPERIOD_MONTH는 제거함 (DTO에서 계산)

    -- [HR 산정용]
    ZLAST_SALARY       BIGINT          NULL     COMMENT '최종 연봉 (단위: 원)',
    ZRESIGN_REASON     VARCHAR(200)    NULL     COMMENT '퇴사 사유',
    
    -- [경력 인정]
    ZRECOG_RATIO       INT             DEFAULT 100 COMMENT '경력 인정 비율 (0~100%)',
    
    ZATTACH_ID         VARCHAR(100)    NULL     COMMENT '경력증명서 파일 ID',
    ZREMARK            VARCHAR(200)    NULL     COMMENT '비고',

	-- [동시성 제어]
    VERSION            INT             NOT NULL DEFAULT 0 COMMENT '데이터 버전 (낙관적 잠금)',
    -- [Audit]
    CREATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY         VARCHAR(50)     NOT NULL,
    UPDATED_AT         DATETIME        NULL     ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY         VARCHAR(50)     NULL,

    PRIMARY KEY (CAREER_ID),
    UNIQUE KEY UK_EMP_CAREER_01 (PERNR, ZSEQ),

    CONSTRAINT FK_ZHR_EMP_CAREER_MASTER 
        FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER(PERNR) ON DELETE CASCADE

) COMMENT '사원 입사 전 경력 정보';

-- 더미 데이터 --
INSERT INTO ZHR_EMP_CAREER 
(PERNR, ZSEQ, ZCAREER_TYPE, ZCOMP_NAME, ZDEPT_NAME, ZJOB_RANK, ZJOB_DUTY, ZJOB_DESC, ZSTART_DATE, ZEND_DATE, ZLAST_SALARY, ZRESIGN_REASON, ZRECOG_RATIO, ZATTACH_ID, ZREMARK, CREATED_BY) 
VALUES 

-- ============================================================
-- [1] 2018001 양한재 (기술연구소 부장) - 2018-03 입사
-- ============================================================
('2018001', 1, '10', '삼성SDS', '공공SI사업부', '대리', 'Java 개발', '공공기관 차세대 프로젝트 PL 수행', '2005-03-01', '2010-02-28', 55000000, '이직', 100, NULL, '우수사원 표창', 'system_admin'),
('2018001', 2, '10', 'NAVER', '검색서비스팀', '과장', '백엔드 개발', '대용량 트래픽 처리 및 검색 엔진 최적화', '2010-03-15', '2015-03-14', 72000000, '개인 역량 강화', 100, NULL, NULL, 'system_admin'),
('2018001', 3, '10', '우아한형제들', '주문시스템팀', '팀장', '아키텍트', 'MSA 전환 프로젝트 총괄', '2015-04-01', '2018-01-31', 85000000, '스카우트 제의', 100, NULL, '성과급 포함', 'system_admin'),

-- ============================================================
-- [2] 2201001 김철수 (개발 - 퇴직자) - 2022-01 입사
-- ============================================================
('2201001', 1, '10', 'LG CNS', '금융사업부', '사원', 'Web 개발', '은행 인터넷 뱅킹 유지보수', '2015-01-01', '2018-12-31', 45000000, '업무 변경 희망', 100, NULL, NULL, 'system_admin'),
('2201001', 2, '10', '카카오뱅크', '여신개발팀', '대리', '서버 개발', '대출 심사 프로세스 개발', '2019-01-15', '2021-11-30', 60000000, '이직', 100, NULL, NULL, 'system_admin'),

-- ============================================================
-- [3] 2207005 정지훈 (재무회계) - 2022-07 입사
-- ============================================================
('2207005', 1, '10', '삼일회계법인', '감사본부', 'Associate', '회계감사', '제조업/유통업 외부감사 수행', '2018-09-01', '2020-08-31', 58000000, '인더스트리 전환', 100, NULL, 'CPA 자격 보유', 'system_admin'),
('2207005', 2, '10', '현대자동차', '재경본부', '대리', '원가회계', '차종별 원가 분석 및 결산', '2020-09-20', '2022-06-15', 65000000, '연봉 협상', 100, NULL, NULL, 'system_admin'),

-- ============================================================
-- [4] 2203004 최서연 (인사) - 2022-03 입사
-- ============================================================
('2203004', 1, '10', '사람인HR', '헤드헌팅사업부', '컨설턴트', '인재 추천', 'IT 개발 직군 전문 채용', '2016-01-01', '2018-12-31', 42000000, '인사팀 전직', 100, NULL, NULL, 'system_admin'),
('2203004', 2, '10', '쿠팡', 'Recruiting팀', '과장', 'Tech Recruiter', '개발자 대규모 채용 리딩', '2019-01-01', '2022-02-15', 68000000, '이직', 100, NULL, NULL, 'system_admin'),

-- ============================================================
-- [5] 개발팀 경력직 (DEV, DEV_SVR, DEV_WEB, DEV_AI)
-- ============================================================
-- 2207006 윤서아 (웹)
('2207006', 1, '10', '카페24', '솔루션개발팀', '주임', 'PHP/React', '쇼핑몰 프론트엔드 기능 개선', '2019-03-01', '2022-06-30', 40000000, '기술 스택 변경', 100, NULL, NULL, 'system_admin'),

-- 2209007 강도윤 (서버)
('2209007', 1, '10', 'NHN', '게임서버팀', '전임', 'C++', '실시간 게임 서버 로직 구현', '2017-01-01', '2020-12-31', 50000000, '도메인 변경', 100, NULL, NULL, 'system_admin'),
('2209007', 2, '10', '라인플러스', '메시징서버팀', '대리', 'Java/Netty', '대용량 메시지 큐 처리', '2021-01-15', '2022-08-15', 65000000, '이직', 100, NULL, NULL, 'system_admin'),

-- 2301012 장은우 (AI)
('2301012', 1, '40', '솔트룩스', 'AI연구소', '인턴', '데이터 라벨링', '자연어 처리 학습 데이터 구축', '2021-07-01', '2021-12-31', 24000000, '계약 만료', 80, NULL, '인턴 수료', 'system_admin'),
('2301012', 2, '10', '마인즈랩', '음성인식팀', '연구원', 'Python', 'STT 모델 튜닝', '2022-01-01', '2022-12-31', 42000000, '처우 개선', 100, NULL, NULL, 'system_admin'),

-- 2310019 배준호 (서버)
('2310019', 1, '20', 'SK C&C', '반도체사업팀', '계약직', 'SM', '공장 자동화 시스템 운영', '2020-01-01', '2021-12-31', 38000000, '계약 만료', 100, NULL, NULL, 'system_admin'),
('2310019', 2, '10', '메가존클라우드', 'MSP팀', '매니저', 'Cloud Eng', 'AWS 인프라 구축 및 마이그레이션', '2022-01-15', '2023-09-15', 52000000, '개발 직무 희망', 100, NULL, NULL, 'system_admin'),

-- 2403025 노하린 (AI - 중고신입)
('2403025', 1, '50', '크몽', 'IT개발', '프리랜서', '데이터 크롤링', '웹 데이터 수집 및 전처리 외주', '2023-01-01', '2023-12-31', 30000000, '정규직 취업', 50, NULL, '프리랜서 경력', 'system_admin'),

-- 2404027 표지성 (서버)
('2404027', 1, '10', '가비아', '호스팅팀', '사원', 'Linux Admin', '리눅스 서버 보안 설정 및 모니터링', '2021-01-01', '2024-03-01', 38000000, '백엔드 개발 전환', 100, NULL, NULL, 'system_admin'),

-- 2504046 경수호 (AI - 석사 후 입사)
('2504046', 1, '40', 'Naver CLOVA', 'Vision AI', 'Research Intern', 'OCR 연구', '문서 인식 알고리즘 리서치', '2024-07-01', '2024-12-31', 30000000, '계약 만료', 80, NULL, '논문 참여', 'system_admin'),

-- 2505047 봉준서 (서버)
('2505047', 1, '60', '멋쟁이사자처럼', '교육팀', '멘토', '교육 보조', '백엔드 부트캠프 멘토링', '2024-06-01', '2024-12-31', 0, '학업 복귀', 0, NULL, '교육 봉사', 'system_admin'),


-- ============================================================
-- [6] 영업/마케팅 (BIZ)
-- ============================================================
-- 2201002 이영희 (마케팅 - 퇴직)
('2201002', 1, '10', '제일기획', '디지털캠페인팀', 'AE', '광고 기획', 'SNS 마케팅 전략 수립', '2016-01-01', '2019-12-31', 48000000, '이직', 100, NULL, NULL, 'system_admin'),
('2201002', 2, '10', '에코마케팅', '퍼포먼스팀', '대리', '퍼포먼스 마케팅', 'ROAS 최적화', '2020-01-01', '2021-12-31', 55000000, '이직', 100, NULL, NULL, 'system_admin'),

-- 2210009 한지우 (마케팅)
('2210009', 1, '20', '티몬', '컨텐츠제작팀', '계약직', '에디터', '상품 상세페이지 기획 및 제작', '2020-03-01', '2022-02-28', 32000000, '계약 만료', 100, NULL, NULL, 'system_admin'),

-- 2312020 조민서 (영업)
('2312020', 1, '10', '한샘', 'B2C영업', 'SC', '가구 영업', '대리점 고객 응대 및 판매', '2022-01-01', '2023-10-31', 40000000, '직무 변경', 80, NULL, '영업관리 희망', 'system_admin'),

-- 2407032 방민호 (영업)
('2407032', 1, '10', '롯데칠성음료', '주류영업팀', '사원', '루트 세일즈', '거래처 관리 및 수금', '2022-01-01', '2024-05-31', 42000000, 'IT업계 전향', 100, NULL, NULL, 'system_admin'),

-- 2501042 원태준 (사업)
('2501042', 1, '40', 'KOTRA', '해외무역관', '인턴', '시장조사', '일본 시장 동향 조사 보고서 작성', '2024-01-01', '2024-06-30', 22000000, '인턴 종료', 80, NULL, '오사카 무역관', 'system_admin'),

-- 2502043 라희선 (마케팅)
('2502043', 1, '40', '대학내일', '트렌드연구소', '인턴', '자료조사', 'MZ세대 트렌드 리서치', '2024-07-01', '2024-12-31', 22000000, '인턴 종료', 80, NULL, NULL, 'system_admin'),


-- ============================================================
-- [7] 경영지원/인사 (MGT, HR)
-- ============================================================
-- 2211010 오시우 (경영)
('2211010', 1, '30', '삼성물산', '총무팀', '파견직', '총무 보조', '비품 관리 및 행사 지원', '2020-01-01', '2021-12-31', 30000000, '계약 종료', 80, NULL, NULL, 'system_admin'),

-- 2301011 신유나 (인사)
('2301011', 1, '20', '노무법인유앤', '급여팀', '계약직', '급여 아웃소싱', '4대보험 취득상실 신고', '2021-03-01', '2022-12-31', 32000000, '정규직 희망', 100, NULL, NULL, 'system_admin'),

-- 2401021 유정민 (재무)
('2401021', 1, '10', '중소기업', '경리팀', '사원', '더존 입력', '세금계산서 발행 및 비용 처리', '2022-06-01', '2023-12-31', 30000000, '규모 있는 회사 희망', 100, NULL, NULL, 'system_admin'),

-- 2503044 설강민 (인사)
('2503044', 1, '40', '한국전력공사', '인사처', '체험형인턴', '서류 정리', '채용 서류 검토 보조', '2024-09-01', '2024-12-31', 21000000, '계약 만료', 50, NULL, '공기업 인턴', 'system_admin'),


-- ============================================================
-- [8] 기타 사원 및 신입 (인턴 경험 등)
-- ============================================================
-- 2210008 임하윤 (사업)
('2210008', 1, '10', '이랜드월드', '패션사업부', '주임', 'MD', '상품 기획 및 발주 관리', '2018-01-01', '2022-08-31', 42000000, 'IT업계 이직', 100, NULL, NULL, 'system_admin'),

-- 2302013 송지아 (사업)
('2302013', 1, '40', '무신사', 'MD팀', '인턴', '보조', '입점 브랜드 관리 보조', '2022-07-01', '2022-12-31', 24000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2304014 권혁준 (앱)
('2304014', 1, '50', '숨고', '개발팀', '프리랜서', '앱 개발', '안드로이드 UI 수정 외주', '2022-01-01', '2023-02-28', 0, '프로젝트 종료', 50, NULL, '건당 계약', 'system_admin'),

-- 2305015 황수빈 (마케팅)
('2305015', 1, '60', '스타벅스', '마케팅팀', '아르바이트', '이벤트 보조', '프로모션 물품 관리', '2022-06-01', '2023-02-28', 0, '취업', 0, NULL, NULL, 'system_admin'),

-- 2305016 안태현 (경영)
('2305016', 1, '20', 'LG전자', '구매팀', '계약직', '구매 보조', 'PO 발행 및 납기 관리', '2020-01-01', '2022-12-31', 35000000, '계약 만료', 100, NULL, NULL, 'system_admin'),

-- 2308017 문채원 (인사)
('2308017', 1, '40', '원티드', '운영팀', '인턴', 'CS', '기업 고객 응대', '2022-08-01', '2023-02-28', 25000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2309018 고은별 (웹)
('2309018', 1, '10', 'SI업체', '개발1팀', '사원', 'JSP', '공공기관 유지보수', '2021-01-01', '2023-07-31', 32000000, '자체 서비스 희망', 100, NULL, NULL, 'system_admin'),

-- 2401022 홍예준 (웹)
('2401022', 1, '40', '당근마켓', '플랫폼팀', '인턴', 'QA', '테스트 케이스 작성 및 수행', '2023-07-01', '2023-12-31', 26000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2402024 백시원 (인사)
('2402024', 1, '40', 'SK하이닉스', 'HR팀', '인턴', '교육 운영', '신입사원 연수 지원', '2023-01-01', '2023-02-28', 24000000, '계약 만료', 80, NULL, '동계 인턴', 'system_admin'),

-- 2405028 기태영 (경영)
('2405028', 1, '20', '한국타이어', '회계팀', '계약직', '전표 처리', '비용 정산 및 부가세 신고 보조', '2022-01-01', '2024-03-31', 34000000, '계약 만료', 100, NULL, NULL, 'system_admin'),

-- 2405029 선우진 (앱)
('2405029', 1, '10', '게임스타트업', '클라이언트팀', '사원', 'Unity', '모바일 캐주얼 게임 개발', '2022-01-01', '2024-03-31', 36000000, '폐업', 100, NULL, NULL, 'system_admin'),

-- 2406030 왕지현 (마케팅)
('2406030', 1, '10', '광고대행사', '기획팀', '사원', 'SNS운영', '카드뉴스 제작 및 업로드', '2022-06-01', '2024-04-30', 30000000, '인하우스 희망', 100, NULL, NULL, 'system_admin'),

-- 2407031 서재윤 (인사)
('2407031', 1, '40', '롯데백화점', '인사팀', '인턴', '채용 보조', '면접 안내 및 진행', '2023-09-01', '2024-02-28', 23000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2408033 편지후 (웹)
('2408033', 1, '50', '개인', '개발', '프리랜서', '홈페이지', '워드프레스 홈페이지 제작', '2023-01-01', '2024-06-30', 0, '취업', 50, NULL, NULL, 'system_admin'),

-- 2409034 성주원 (재무)
('2409034', 1, '20', '신한은행', '지점', '텔러', '창구 수납', '공과금 수납 및 예금 상담', '2022-01-01', '2024-06-30', 35000000, '본사 근무 희망', 80, NULL, '계약직', 'system_admin'),

-- 2409035 위하늘 (AI)
('2409035', 1, '40', '뤼이드', 'AI팀', '인턴', 'Research', '논문 구현 및 실험', '2024-01-01', '2024-06-30', 28000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2410036 명지안 (서버)
('2410036', 1, '10', '보안관제센터', '관제팀', '사원', 'OP', '서버 모니터링 및 로그 분석', '2022-01-01', '2024-08-31', 32000000, '개발 전향', 80, NULL, '3교대 근무', 'system_admin'),

-- 2411037 금예서 (마케팅)
('2411037', 1, '40', '아모레퍼시픽', '브랜드팀', '인턴', '보조', '신제품 런칭 지원', '2024-03-01', '2024-08-31', 24000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2411038 도윤재 (사업)
('2411038', 1, '10', '물류회사', '운영팀', '사원', '물류 관리', '입출고 관리 및 배차', '2020-01-01', '2024-09-30', 38000000, '사업기획 희망', 80, NULL, NULL, 'system_admin'),

-- 2412039 채수현 (인사)
('2412039', 1, '60', '관공서', '행정팀', '아르바이트', '사무 보조', '문서 스캔 및 정리', '2024-01-01', '2024-10-31', 0, '취업', 0, NULL, NULL, 'system_admin'),

-- 2412040 하동균 (앱)
('2412040', 1, '10', '에이전시', '모바일팀', '사원', 'iOS', '쇼핑몰 앱 유지보수', '2020-01-01', '2024-10-31', 36000000, '자체 서비스 희망', 100, NULL, NULL, 'system_admin'),

-- 2501041 진세아 (웹)
('2501041', 1, '40', '토스', 'Frontend', '인턴', 'UI 개발', '어드민 페이지 개발', '2024-07-01', '2024-12-31', 28000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2503045 옥다은 (재무)
('2503045', 1, '20', '국민연금공단', '재무팀', '인턴', '사무', '지출 증빙 정리', '2024-07-01', '2024-12-31', 22000000, '계약 만료', 80, NULL, NULL, 'system_admin'),

-- 2507049 엄지아 (마케팅)
('2507049', 1, '60', '영화관', '매점', '아르바이트', '서비스', '고객 응대', '2023-01-01', '2024-12-31', 0, '취업', 0, NULL, NULL, 'system_admin'),

-- 2508050 함유주 (앱)
('2508050', 1, '40', '넥슨', '모바일사업부', '인턴', 'QA', '게임 테스트', '2024-07-01', '2024-12-31', 24000000, '계약 만료', 80, NULL, NULL, 'system_admin');


-- 포상 관리 --
CREATE TABLE ZHR_EMP_REWARD (
    REWARD_ID          BIGINT          NOT NULL AUTO_INCREMENT COMMENT '포상 ID (PK)',
    PERNR              VARCHAR(10)     NOT NULL COMMENT '사번 (FK)',
    ZSEQ               INT             NOT NULL COMMENT '포상 순번',

    --  포상 구분 (공통코드: HR_REWARD_TYPE)
    ZREWARD_TYPE       VARCHAR(20)     NOT NULL COMMENT '포상 구분 (장기근속, 우수사원, 대외수상 등)',
    
    -- [내용]
    ZREWARD_NAME       VARCHAR(100)    NOT NULL COMMENT '포상명',
    ZREWARD_ORG        VARCHAR(100)    NOT NULL COMMENT '수여기관 (사내는 회사명)',
    ZREWARD_DATE       DATE            NOT NULL COMMENT '수여일자',
    
    ZREASON            VARCHAR(200)    NULL     COMMENT '포상사유',
    
    -- 포상 금액/부상 (급여 과세 처리용)
    -- 금액이 없는 경우 NULL 대신 0으로 저장하여 연산 오류 방지 (NOT NULL 추가)
    ZREWARD_AMT        BIGINT          NOT NULL DEFAULT 0 COMMENT '포상 금액(원)',
    ZCONTENT           VARCHAR(100)    NULL      COMMENT '기타 부상 내역 (금일봉, 상품권, 트로피 등)',

    ZATTACH_ID         VARCHAR(100)    NULL      COMMENT '첨부파일 ID',
    ZREMARK            VARCHAR(200)    NULL      COMMENT '비고',

    -- [동시성 제어]
    VERSION            INT             NOT NULL DEFAULT 0,

    -- [Audit]
    CREATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY         VARCHAR(50)     NOT NULL,
    UPDATED_AT         DATETIME        NULL     ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY         VARCHAR(50)     NULL,

    PRIMARY KEY (REWARD_ID),
    UNIQUE KEY UK_EMP_REWARD (PERNR, ZSEQ),
    CONSTRAINT FK_REWARD_MASTER FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER(PERNR) ON DELETE CASCADE

) COMMENT '사원 포상 이력 정보';

-- 더미 데이터 --
INSERT INTO ZHR_EMP_REWARD 
(PERNR, ZSEQ, ZREWARD_TYPE, ZREWARD_NAME, ZREWARD_ORG, ZREWARD_DATE, ZREASON, ZREWARD_AMT, ZCONTENT, CREATED_BY) 
VALUES 

-- ============================================================
-- [1] 2018001 양한재 (기술연구소 부장)
-- ============================================================
('2018001', 1, '30', '차세대 시스템 오픈 공로상', 'CL SoftLab', '2020-12-31', '성공적인 시스템 오픈 기여', 1000000, '상장 및 금일봉', 'system_admin'),
('2018001', 2, '20', '2021년 최우수 리더상', 'CL SoftLab', '2021-12-31', '조직 성과 관리 우수', 2000000, '해외 연수 기회', 'system_admin'),
('2018001', 3, '10', '5년 장기근속상', 'CL SoftLab', '2023-03-01', '창립 멤버 장기 근속', 2000000, '순금 열쇠 1돈', 'system_admin'),
('2018001', 4, '90', 'SW 산업 발전 유공자 표창', '과학기술정보통신부', '2023-11-30', '국가 SW 경쟁력 강화 기여', 0, '장관 표창장', 'system_admin'),

-- ============================================================
-- [2] 2201001 김철수 (퇴직자) 
-- ============================================================
('2201001', 1, '20', '2022년 상반기 우수사원', 'CL SoftLab', '2022-07-01', '서버 안정화 기여', 500000, '백화점 상품권', 'system_admin'),
('2201001', 2, '30', 'MSA 전환 프로젝트 완료', 'CL SoftLab', '2023-06-30', '레거시 시스템 개선', 1000000, '특별 휴가 3일', 'system_admin'),

-- ============================================================
-- [3] 영업/마케팅 (Sales & Marketing) - 성과 중심 포상
-- ============================================================
-- 2312020 조민서 (영업)
('2312020', 1, '20', '2024 Sales King', 'CL SoftLab', '2024-12-31', '연간 매출 목표 150% 달성', 3000000, '동남아 여행권', 'system_admin'),
('2312020', 2, '20', '2024 1분기 영업 우수', 'CL SoftLab', '2024-04-01', '분기 매출 1위', 300000, '기프트카드', 'system_admin'),

-- 2201002 이영희 (마케팅 - 퇴직)
('2201002', 1, '40', '브랜드 네이밍 공모전 1등', 'CL SoftLab', '2022-05-15', '신규 서비스 네이밍 채택', 300000, '현금', 'system_admin'),

-- 2210009 한지우 (마케팅)
('2210009', 1, '20', '이달의 마케터', 'CL SoftLab', '2023-09-01', 'SNS 캠페인 조회수 100만 달성', 200000, '호텔 뷔페권', 'system_admin'),

-- 2302013 송지아 (사업)
('2302013', 1, '30', '신규 사업 수주 공로', 'CL SoftLab', '2023-12-20', '공공 입찰 1순위 선정', 1500000, '특별 보너스', 'system_admin'),

-- 2305015 황수빈 (마케팅)
('2305015', 1, '40', '사내 굿즈 디자인 공모전', 'CL SoftLab', '2023-10-10', '웰컴키트 디자인 제안', 100000, '스타벅스 카드', 'system_admin'),

-- 2407032 방민호 (영업)
('2407032', 1, '20', '신입 영업 루키상', 'CL SoftLab', '2024-12-31', '신규 거래처 10곳 개척', 500000, '정장 교환권', 'system_admin'),

-- 2411037 금예서 (마케팅)
('2411037', 1, '40', '바이럴 마케팅 아이디어상', 'CL SoftLab', '2024-12-01', '숏폼 챌린지 기획', 100000, '올리브영 상품권', 'system_admin'),

-- 2411038 도윤재 (사업)
('2411038', 1, '30', '글로벌 파트너십 체결', 'CL SoftLab', '2024-12-15', '일본 파트너사 계약 성사', 1000000, '금일봉', 'system_admin'),

-- ============================================================
-- [4] 개발/기술 (R&D) - 프로젝트 및 기술 공로
-- ============================================================
-- 2207006 윤서아 (웹개발)
('2207006', 1, '90', 'K-Global 해커톤 우수상', 'NIPA', '2023-08-20', '사내 동호회 팀 출전 입상', 0, '상장', 'system_admin'),
('2207006', 2, '30', '홈페이지 리뉴얼 오픈', 'CL SoftLab', '2023-01-01', '성공적인 메인 개편', 500000, '팀 회식비 지원', 'system_admin'),

-- 2209007 강도윤 (서버개발)
('2209007', 1, '30', '서버 비용 절감 TF', 'CL SoftLab', '2023-06-30', 'AWS 비용 30% 절감 달성', 2000000, '특별 격려금', 'system_admin'),
('2209007', 2, '20', '2023년 기술 혁신상', 'CL SoftLab', '2023-12-31', '무중단 배포 시스템 구축', 1000000, '최신형 키보드', 'system_admin'),

-- 2301012 장은우 (AI개발)
('2301012', 1, '90', 'AI 데이터 분석 경진대회 은상', 'DACON', '2023-10-15', '개인 자격 참가', 0, '상장', 'system_admin'),
('2301012', 2, '30', '추천 시스템 고도화', 'CL SoftLab', '2024-02-01', '클릭률 15% 상승 기여', 800000, '아이패드', 'system_admin'),

-- 2309018 고은별 (웹개발)
('2309018', 1, '40', '코드 리뷰 문화 정착 캠페인', 'CL SoftLab', '2023-11-01', '개발 문화 개선 제안', 100000, '문화상품권', 'system_admin'),

-- 2310019 배준호 (서버개발)
('2310019', 1, '30', '보안 취약점 조치 완료', 'CL SoftLab', '2023-05-20', 'ISMS 심사 완벽 대응', 500000, '복지 포인트', 'system_admin'),

-- 2401022 홍예준 (웹개발)
('2401022', 1, '20', '2024 상반기 베스트 루키', 'CL SoftLab', '2024-07-01', '신입 사원 중 최고 평가', 300000, '에어팟', 'system_admin'),

-- 2403025 노하린 (AI개발)
('2403025', 1, '30', '챗봇 엔진 성능 개선', 'CL SoftLab', '2024-09-30', '응답 속도 2배 향상', 700000, '스마트워치', 'system_admin'),

-- 2404027 표지성 (서버개발)
('2404027', 1, '10', '무사고 100일 달성', 'CL SoftLab', '2024-08-01', '서버 장애 0건 유지', 100000, '치킨 쿠폰', 'system_admin'),

-- 2501041 진세아 (신입)
('2501041', 1, '40', '신입사원 입문교육 우수자', 'CL SoftLab', '2025-01-31', '교육 태도 및 과제 1등', 100000, '웰컴 보너스', 'system_admin'),

-- 2504046 경수호 (AI)
('2504046', 1, '30', 'LLM 모델 도입 PoC', 'CL SoftLab', '2025-06-30', '성공적인 개념 증명', 500000, '회식비', 'system_admin'),

-- ============================================================
-- [5] 경영지원/인사 (Management & HR) - 공로 및 제안
-- ============================================================
-- 2207005 정지훈 (재무 - 퇴직)
('2207005', 1, '30', '결산 일정 단축 프로젝트', 'CL SoftLab', '2023-03-31', '월 결산 3일 단축', 800000, '성과급', 'system_admin'),

-- 2211010 오시우 (경영)
('2211010', 1, '20', '2023년 모범사원상', 'CL SoftLab', '2023-12-31', '근태 및 동료 평가 우수', 300000, '상품권', 'system_admin'),
('2211010', 2, '40', '사무실 에너지 절약 캠페인', 'CL SoftLab', '2024-01-15', '월 전기료 10% 절감 아이디어', 100000, '커피 머신', 'system_admin'),

-- 2301011 신유나 (인사 - 퇴직)
('2301011', 1, '30', '평가 시스템 개편 TF', 'CL SoftLab', '2023-12-01', '다면평가 도입 완료', 500000, '수고비', 'system_admin'),

-- 2305016 안태현 (경영)
('2305016', 1, '30', '자산 실사 100% 완료', 'CL SoftLab', '2023-12-31', '유휴 자산 매각 수익 창출', 300000, '상품권', 'system_admin'),

-- 2308017 문채원 (인사 - 퇴직)
('2308017', 1, '40', '채용 브랜딩 아이디어', 'CL SoftLab', '2023-06-01', '채용 유튜브 채널 개설 제안', 100000, '문화상품권', 'system_admin'),

-- 2401021 유정민 (재무 - 퇴직예정)
('2401021', 1, '20', '2024 2분기 친절사원', 'CL SoftLab', '2024-06-30', '직원 경비 처리 지원 우수', 100000, '영화관람권', 'system_admin'),

-- 2402024 백시원 (인사)
('2402024', 1, '40', '사내 문화 개선 아이디어상', 'CL SoftLab', '2024-05-01', '유연근무제 효율화 제안', 100000, '커피 쿠폰', 'system_admin'),
('2402024', 2, '30', '전사 워크샵 기획', 'CL SoftLab', '2024-11-01', '성공적인 행사 운영', 300000, '팀 보너스', 'system_admin'),

-- 2409034 성주원 (재무)
('2409034', 1, '30', '부가세 환급 프로젝트', 'CL SoftLab', '2024-10-25', '과오납 세금 5천만원 환급', 1500000, '특별 성과급', 'system_admin'),

-- 2503044 설강민 (인사)
('2503044', 1, '40', '신규 입사자 온보딩 개선', 'CL SoftLab', '2025-04-01', '웰컴 가이드북 제작', 100000, '도서상품권', 'system_admin'),

-- ============================================================
-- [6] 기타 추가 데이터 (다건 수상자 등)
-- ============================================================
-- 2203003 박민준 (사업 - 퇴직)
('2203003', 1, '30', '공공기관 BPR 사업 수주', 'CL SoftLab', '2022-11-15', '대형 프로젝트 수주 성공', 2000000, '인센티브', 'system_admin'),
('2203003', 2, '20', '2023년 상반기 최우수 PM', 'CL SoftLab', '2023-07-01', '프로젝트 납기 준수 및 이익률 달성', 1000000, '호텔 숙박권', 'system_admin'),

-- 2304014 권혁준 (앱개발 - 퇴직)
('2304014', 1, '40', '앱 성능 최적화 아이디어', 'CL SoftLab', '2023-08-01', '로딩 속도 30% 개선', 200000, '기계식 키보드', 'system_admin'),

-- 2405028 기태영 (경영)
('2405028', 1, '20', '이달의 스마일 사원', 'CL SoftLab', '2024-09-01', '항상 밝은 미소로 응대', 50000, '커피 쿠폰', 'system_admin'),

-- 2405029 선우진 (앱개발)
('2405029', 1, '90', 'Google I/O Extended 해커톤', 'GDG Korea', '2024-07-20', '앱 부문 2등', 0, '상패', 'system_admin'),

-- 2503045 옥다은 (재무)
('2503045', 1, '40', '법인카드 사용 가이드 제작', 'CL SoftLab', '2025-05-10', '불필요한 지출 방지', 100000, '상품권', 'system_admin'),

-- 2508050 함유주 (앱개발)
('2508050', 1, '40', '사내 버그 바운티 1등', 'CL SoftLab', '2025-09-01', '크리티컬 버그 최다 발견', 300000, '닌텐도 스위치', 'system_admin');

-- 교육 -- 
CREATE TABLE ZHR_EMP_EDU (
    EDU_ID             BIGINT          NOT NULL AUTO_INCREMENT COMMENT '교육 ID (PK)',
    PERNR              VARCHAR(10)     NOT NULL COMMENT '사번 (FK)',
    ZSEQ               INT             NOT NULL COMMENT '교육 순번',

    ZEDU_TYPE          VARCHAR(20)     NOT NULL COMMENT '교육 유형 코드',
    
    ZEDU_NAME          VARCHAR(100)    NOT NULL COMMENT '교육과정명',
    ZEDU_ORG           VARCHAR(100)    NOT NULL COMMENT '교육기관',
    
    ZSTART_DATE        DATE            NOT NULL COMMENT '시작일',
    ZEND_DATE          DATE            NOT NULL COMMENT '종료일',
    
    ZCOMPLETE_YN       CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '수료 여부 (Y/N)',
    
    ZMANDATORY_YN      CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '필수 교육 여부 (Y/N)',
    ZEDU_SCORE         INT             NULL     COMMENT '교육 점수/학점 (승진 포인트 등)',
    
    ZHOUR              INT             NULL     COMMENT '총 교육시간',
    ZCOST              DECIMAL(13, 0)  DEFAULT 0 COMMENT '교육비용 (원)', -- 소수점 제거 (원화 기준)
    
    ZATTACH_ID         VARCHAR(100)    NULL     COMMENT '수료증 파일 ID',
    ZREMARK            VARCHAR(200)    NULL     COMMENT '비고',

    -- [동시성 제어]
    VERSION            INT             NOT NULL DEFAULT 0,

    -- [Audit]
    CREATED_AT         DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CREATED_BY         VARCHAR(50)     NOT NULL,
    UPDATED_AT         DATETIME        NULL     ON UPDATE CURRENT_TIMESTAMP,
    UPDATED_BY         VARCHAR(50)     NULL,

    PRIMARY KEY (EDU_ID),
    UNIQUE KEY UK_EMP_EDU (PERNR, ZSEQ),
    CONSTRAINT FK_EDU_MASTER FOREIGN KEY (PERNR) REFERENCES ZHR_EMP_MASTER(PERNR) ON DELETE CASCADE

) COMMENT '사원 교육 이력 정보';

-- 더미데이터 --
INSERT INTO ZHR_EMP_EDU 
(PERNR, ZSEQ, ZEDU_TYPE, ZEDU_NAME, ZEDU_ORG, ZSTART_DATE, ZEND_DATE, ZCOMPLETE_YN, ZMANDATORY_YN, ZEDU_SCORE, ZHOUR, ZCOST, CREATED_BY) 
VALUES 

-- ============================================================
-- [1. 필수] 2018001 양한재 (부장/팀장) - 리더십 & 고급 기술
-- ============================================================
('2018001', 1, 'LEAD', '신임 팀장 리더십 과정', '휴넷', '2018-04-01', '2018-04-03', 'Y', 'Y', 95, 24, 500000, 'system_admin'),
('2018001', 2, 'JOB', 'MSA 아키텍처 설계 실무', '패스트캠퍼스', '2022-09-01', '2022-11-30', 'Y', 'N', NULL, 40, 300000, 'system_admin'),
('2018001', 3, 'LAW', '2023년 개인정보보호 책임자 교육', 'KISA', '2023-05-10', '2023-05-10', 'Y', 'Y', 100, 8, 0, 'system_admin'),
('2018001', 4, 'JOB', 'AWS Cloud 전략 세미나', 'AWS Korea', '2024-01-15', '2024-01-15', 'Y', 'N', NULL, 4, 0, 'system_admin'),

-- ============================================================
-- [2. 필수] 2201001 김철수 (퇴직자) - 기본 교육
-- ============================================================
('2201001', 1, 'OJT', '경력사원 입문 교육', '인재개발팀', '2022-01-02', '2022-01-05', 'Y', 'Y', 90, 32, 0, 'system_admin'),
('2201001', 2, 'LAW', '직장 내 성희롱 예방 교육', '사내LMS', '2022-06-01', '2022-06-01', 'Y', 'Y', 100, 2, 0, 'system_admin'),
('2201001', 3, 'JOB', 'Spring Boot 3.0 마이그레이션', '인프런', '2023-02-01', '2023-03-31', 'Y', 'N', NULL, 20, 150000, 'system_admin'),

-- ============================================================
-- [3] 신입 사원 (OJT 및 기초 직무)
-- ============================================================
-- 2402024 백시원 (인사)
('2402024', 1, 'OJT', '2024 신입사원 입문교육 (공채)', '그룹연수원', '2024-01-02', '2024-01-28', 'Y', 'Y', 98, 160, 2500000, 'system_admin'),
('2402024', 2, 'JOB', 'HRM 실무 기초 (근로기준법)', '한국인사관리협회', '2024-03-01', '2024-03-03', 'Y', 'N', 90, 24, 450000, 'system_admin'),
('2402024', 3, 'LAW', '정보보안 서약 및 교육', '사내LMS', '2024-02-01', '2024-02-01', 'Y', 'Y', 100, 2, 0, 'system_admin'),

-- 2501041 진세아 (웹개발)
('2501041', 1, 'OJT', '2025 신입사원 입문교육', '인재개발팀', '2025-01-02', '2025-01-10', 'Y', 'Y', 95, 64, 1000000, 'system_admin'),
('2501041', 2, 'JOB', 'Java Secure Coding', '사내기술세미나', '2025-02-15', '2025-02-15', 'Y', 'N', NULL, 4, 0, 'system_admin'),

-- 2505047 봉준서 (서버개발)
('2505047', 1, 'OJT', '수시채용 입문 과정', '인재개발팀', '2025-05-02', '2025-05-04', 'Y', 'Y', NULL, 24, 0, 'system_admin'),

-- 2503045 옥다은 (재무)
('2503045', 1, 'OJT', '신입사원 멘토링 프로그램', '재무회계팀', '2025-03-02', '2025-05-31', 'Y', 'Y', 90, 40, 200000, 'system_admin'),

-- 2508050 함유주 (앱개발)
('2508050', 1, 'OJT', '하반기 신입 입문', '인재개발팀', '2025-08-01', '2025-08-03', 'Y', 'Y', NULL, 24, 0, 'system_admin'),

-- ============================================================
-- [4] 개발 직군 (DEV) - 직무 스킬업
-- ============================================================
-- 2207006 윤서아 (웹)
('2207006', 1, 'JOB', 'Modern React 심화 과정', '유데미', '2023-01-01', '2023-02-28', 'Y', 'N', NULL, 30, 50000, 'system_admin'),
('2207006', 2, 'JOB', 'UX/UI 디자인 패턴의 이해', '패스트캠퍼스', '2023-06-01', '2023-07-31', 'Y', 'N', NULL, 20, 120000, 'system_admin'),

-- 2209007 강도윤 (서버)
('2209007', 1, 'JOB', 'Kubernetes 운영 실무', '멀티캠퍼스', '2022-10-01', '2022-10-03', 'Y', 'N', NULL, 24, 800000, 'system_admin'),
('2209007', 2, 'JOB', '대용량 트래픽 처리 아키텍처', '사내기술세미나', '2023-04-10', '2023-04-10', 'Y', 'N', NULL, 4, 0, 'system_admin'),
('2209007', 3, 'LEAD', '중간관리자 역량 강화', '휴넷', '2024-01-01', '2024-01-31', 'Y', 'Y', 85, 10, 150000, 'system_admin'),

-- 2301012 장은우 (AI)
('2301012', 1, 'JOB', 'LLM 파인튜닝 실습', 'Google Cloud', '2023-05-01', '2023-05-03', 'Y', 'N', NULL, 24, 1200000, 'system_admin'),
('2301012', 2, 'JOB', 'Python 고급 데이터 분석', '데이터진흥원', '2023-09-01', '2023-09-05', 'Y', 'N', 90, 40, 500000, 'system_admin'),

-- 2310019 배준호 (서버)
('2310019', 1, 'JOB', 'AWS 보안 모범 사례', 'AWS Webinar', '2023-11-15', '2023-11-15', 'Y', 'N', NULL, 2, 0, 'system_admin'),

-- 2401022 홍예준 (웹)
('2401022', 1, 'OJT', '2024 신입사원 입문교육', '인재개발원', '2024-01-02', '2024-01-15', 'Y', 'Y', 95, 80, 1500000, 'system_admin'),
('2401022', 2, 'JOB', 'TypeScript 기초', '인프런', '2024-03-01', '2024-03-31', 'Y', 'N', NULL, 10, 55000, 'system_admin'),

-- 2404027 표지성 (서버)
('2404027', 1, 'OJT', '경력사원 입문 교육', '인재개발팀', '2024-04-02', '2024-04-05', 'Y', 'Y', NULL, 32, 0, 'system_admin'),

-- 2504046 경수호 (AI)
('2504046', 1, 'OJT', '수시채용 입문 과정', '인재개발팀', '2025-04-02', '2025-04-04', 'Y', 'Y', NULL, 24, 0, 'system_admin'),
('2504046', 2, 'JOB', 'RAG 기반 검색 시스템 구축', 'AI Summit', '2025-06-10', '2025-06-12', 'Y', 'N', NULL, 20, 800000, 'system_admin'),


-- ============================================================
-- [5] 경영지원/인사 (MGT, HR) - 법정의무, 직무
-- ============================================================
-- 2203004 최서연 (인사)
('2203004', 1, 'LAW', '직장내 괴롭힘 예방 강사과정', '고용노동부', '2022-04-01', '2022-04-02', 'Y', 'Y', 100, 16, 0, 'system_admin'),
('2203004', 2, 'JOB', '성과관리(KPI) 워크샵', 'HR인사이트', '2023-01-15', '2023-01-16', 'Y', 'N', NULL, 16, 400000, 'system_admin'),
('2203004', 3, 'LEAD', '여성 리더십 과정', 'W-Campus', '2023-08-01', '2023-08-31', 'Y', 'N', NULL, 20, 300000, 'system_admin'),

-- 2207005 정지훈 (재무 - 퇴직)
('2207005', 1, 'JOB', 'IFRS 회계 결산 실무', '삼일아카데미', '2022-11-01', '2022-11-03', 'Y', 'N', NULL, 24, 500000, 'system_admin'),
('2207005', 2, 'LAW', '산업안전보건교육 (사무직)', '사내LMS', '2023-03-01', '2023-03-31', 'Y', 'Y', 100, 3, 0, 'system_admin'),

-- 2211010 오시우 (경영)
('2211010', 1, 'JOB', '총무/자산관리 실무', '한국생산성본부', '2023-05-10', '2023-05-12', 'Y', 'N', NULL, 20, 400000, 'system_admin'),
('2211010', 2, 'LAW', '소방안전관리자 2급', '소방안전원', '2023-09-01', '2023-09-05', 'Y', 'N', 80, 40, 200000, 'system_admin'),

-- 2301011 신유나 (인사)
('2301011', 1, 'JOB', '개정 노동법 세미나', '노무법인', '2023-02-20', '2023-02-20', 'Y', 'N', NULL, 4, 100000, 'system_admin'),
('2301011', 2, 'LANG', '전화영어 (Biz)', '당근영어', '2023-04-01', '2023-06-30', 'N', 'N', NULL, 24, 300000, 'system_admin'),

-- 2305016 안태현 (경영)
('2305016', 1, 'JOB', '전사적자원관리(ERP) 운영', '더존비즈온', '2023-06-01', '2023-06-03', 'Y', 'N', NULL, 24, 350000, 'system_admin'),

-- 2401021 유정민 (재무)
('2401021', 1, 'OJT', '2024 신입사원 입문교육', '인재개발원', '2024-01-02', '2024-01-15', 'Y', 'Y', 92, 80, 1500000, 'system_admin'),
('2401021', 2, 'JOB', '법인세 실무 기초', '영화조세통람', '2024-03-10', '2024-03-12', 'Y', 'N', NULL, 16, 250000, 'system_admin'),

-- 2503044 설강민 (인사)
('2503044', 1, 'OJT', '신입사원 멘토링', '인사팀', '2025-03-02', '2025-05-31', 'Y', 'Y', NULL, 40, 200000, 'system_admin'),


-- ============================================================
-- [6] 영업/마케팅 (BIZ) - 커뮤니케이션, 마케팅 스킬
-- ============================================================
-- 2210009 한지우 (마케팅)
('2210009', 1, 'JOB', '디지털 마케팅 트렌드 2023', '아이보스', '2023-01-10', '2023-01-10', 'Y', 'N', NULL, 8, 200000, 'system_admin'),
('2210009', 2, 'JOB', 'GA4 데이터 분석 실무', '마케팅아카데미', '2023-05-01', '2023-05-31', 'Y', 'N', NULL, 20, 250000, 'system_admin'),

-- 2312020 조민서 (영업)
('2312020', 1, 'JOB', 'B2B 제안서 작성 스킬', '한국능률협회', '2024-02-10', '2024-02-11', 'Y', 'N', NULL, 16, 350000, 'system_admin'),
('2312020', 2, 'LANG', '비즈니스 중국어 회화', '파고다', '2024-03-01', '2024-05-31', 'Y', 'N', NULL, 30, 450000, 'system_admin'),

-- 2407032 방민호 (영업)
('2407032', 1, 'OJT', '영업 현장 OJT', '영업팀', '2024-07-01', '2024-07-31', 'Y', 'Y', NULL, 160, 0, 'system_admin'),
('2407032', 2, 'JOB', '성공적인 협상 스킬', '휴넷', '2024-09-01', '2024-09-30', 'Y', 'N', 80, 10, 100000, 'system_admin'),

-- 2411037 금예서 (마케팅)
('2411037', 1, 'OJT', '경력사원 입문 교육', '인재개발팀', '2024-11-02', '2024-11-05', 'Y', 'Y', NULL, 32, 0, 'system_admin'),
('2411037', 2, 'JOB', '숏폼 콘텐츠 기획', '패스트캠퍼스', '2024-12-01', '2024-12-31', 'Y', 'N', NULL, 15, 100000, 'system_admin'),

-- 2506048 마동욱 (영업)
('2506048', 1, 'OJT', '하반기 신입 입문', '인재개발팀', '2025-06-02', '2025-06-10', 'Y', 'Y', NULL, 64, 0, 'system_admin'),


-- ============================================================
-- [7] 전사 공통 (법정의무교육 등) - 나머지 인원 채우기
-- ============================================================
-- 2201002 이영희
('2201002', 1, 'LAW', '2024년 장애인 인식개선 교육', '사내LMS', '2024-04-01', '2024-04-01', 'Y', 'Y', 100, 1, 0, 'system_admin'),
-- 2203003 박민준
('2203003', 1, 'LAW', '2024년 개인정보보호 교육', '사내LMS', '2024-05-01', '2024-05-01', 'Y', 'Y', 100, 1, 0, 'system_admin'),
-- 2210008 임하윤
('2210008', 1, 'LAW', '직장내 괴롭힘 예방 교육', '사내LMS', '2023-10-01', '2023-10-01', 'Y', 'Y', 100, 1, 0, 'system_admin'),
-- 2302013 송지아
('2302013', 1, 'ETC', '심폐소생술 실습', '보건소', '2023-11-11', '2023-11-11', 'Y', 'N', NULL, 2, 0, 'system_admin'),
-- 2304014 권혁준
('2304014', 1, 'LAW', '산업안전보건교육', '사내LMS', '2023-06-01', '2023-06-01', 'Y', 'Y', 100, 3, 0, 'system_admin'),
-- 2305015 황수빈
('2305015', 1, 'JOB', '엑셀 데이터 분석', '오피스튜터', '2023-08-01', '2023-08-31', 'Y', 'N', NULL, 10, 80000, 'system_admin'),
-- 2308017 문채원
('2308017', 1, 'LAW', '퇴직연금 교육', '사내LMS', '2023-12-01', '2023-12-01', 'Y', 'Y', 100, 1, 0, 'system_admin'),
-- 2309018 고은별
('2309018', 1, 'ETC', '신규 입사자 웰컴데이', '인사팀', '2023-09-01', '2023-09-01', 'Y', 'N', NULL, 8, 0, 'system_admin'),
-- 2403025 노하린
('2403025', 1, 'OJT', '경력사원 입문 교육', '인재개발팀', '2024-03-02', '2024-03-05', 'Y', 'Y', NULL, 32, 0, 'system_admin'),
-- 2404026 차유진
('2404026', 1, 'JOB', '물류 시스템의 이해', '사내강사', '2024-04-10', '2024-04-10', 'Y', 'N', NULL, 4, 0, 'system_admin'),
-- 2405028 기태영
('2405028', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-05-02', '2024-05-10', 'Y', 'Y', 96, 64, 1200000, 'system_admin'),
-- 2405029 선우진
('2405029', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-05-02', '2024-05-10', 'Y', 'Y', 94, 64, 1200000, 'system_admin'),
-- 2406030 왕지현
('2406030', 1, 'JOB', 'SNS 트렌드 분석', '외부세미나', '2024-06-20', '2024-06-20', 'Y', 'N', NULL, 4, 150000, 'system_admin'),
-- 2407031 서재윤
('2407031', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-07-02', '2024-07-10', 'Y', 'Y', 90, 64, 1200000, 'system_admin'),
-- 2408033 편지후
('2408033', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-08-02', '2024-08-10', 'Y', 'Y', 92, 64, 1200000, 'system_admin'),
-- 2409034 성주원
('2409034', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-09-02', '2024-09-10', 'Y', 'Y', 95, 64, 1200000, 'system_admin'),
-- 2409035 위하늘
('2409035', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-09-02', '2024-09-10', 'Y', 'Y', 98, 64, 1200000, 'system_admin'),
-- 2410036 명지안
('2410036', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-10-02', '2024-10-10', 'Y', 'Y', 91, 64, 1200000, 'system_admin'),
-- 2411038 도윤재
('2411038', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-11-02', '2024-11-10', 'Y', 'Y', 93, 64, 1200000, 'system_admin'),
-- 2412039 채수현
('2412039', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-12-02', '2024-12-10', 'Y', 'Y', 97, 64, 1200000, 'system_admin'),
-- 2412040 하동균
('2412040', 1, 'OJT', '신입사원 입문교육', '인재개발원', '2024-12-02', '2024-12-10', 'Y', 'Y', 94, 64, 1200000, 'system_admin'),
-- 2501042 원태준
('2501042', 1, 'OJT', '2025 신입사원 입문교육', '인재개발원', '2025-01-02', '2025-01-10', 'Y', 'Y', 96, 64, 1200000, 'system_admin'),
-- 2502043 라희선
('2502043', 1, 'OJT', '2025 신입사원 입문교육', '인재개발원', '2025-02-03', '2025-02-11', 'Y', 'Y', 92, 64, 1200000, 'system_admin'),
-- 2507049 엄지아
('2507049', 1, 'OJT', '수시채용 입문 과정', '인재개발팀', '2025-07-01', '2025-07-03', 'Y', 'Y', NULL, 24, 0, 'system_admin');


--  평가 템플릿/항목 설정 (Template)
CREATE TABLE ZHR_EVAL_TEMPLATE (
    -- [Key & Core Info]
    TEMPLATE_ID   VARCHAR(20)   NOT NULL COMMENT '템플릿 ID (예: 2024_REG_V1)',
    TEMPLATE_NM   VARCHAR(100)  NOT NULL COMMENT '평가 템플릿 명',
    
    -- [Business Logic]
    ZYEAR         CHAR(4)       NOT NULL COMMENT '평가 연도',
    ZEV_TYPE      VARCHAR(10)   NOT NULL COMMENT '평가 유형 (RG:정기, SP:수시)',
    VERSION       INT           NOT NULL DEFAULT 1 COMMENT '버전',
    ZSTATUS       CHAR(1)       DEFAULT 'T' COMMENT '상태 (T:작성중, O:오픈, C:마감)',
    
    -- [Period Control - DATE 타입으로 변경]
    START_DATE    DATE          NOT NULL COMMENT '평가 시작일',
    END_DATE      DATE          NOT NULL COMMENT '평가 종료일',

    -- [Audit Fields - Entity의 BaseEntity가 처리하므로 컬럼은 존재해야 함]
    CREATED_BY    VARCHAR(20)   NOT NULL COMMENT '최초 생성자',
    CREATED_AT    TIMESTAMP     DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    UPDATED_BY    VARCHAR(20)   NULL     COMMENT '최종 수정자',
    UPDATED_AT    TIMESTAMP     NULL     ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',

    PRIMARY KEY (TEMPLATE_ID)
);


-- 평가 항목 --
CREATE TABLE ZHR_EVAL_ITEM_MST (
    -- [PK: 대리키]
    ITEM_MST_ID   BIGINT         NOT NULL AUTO_INCREMENT COMMENT '항목 고유 ID (PK)',

    -- [Business Keys]
    TEMPLATE_ID   VARCHAR(20)    NOT NULL COMMENT '템플릿 ID (FK)',

    -- [Content]
    ITEM_NM       VARCHAR(200)   NOT NULL COMMENT '평가 문항',
    ITEM_DESC     VARCHAR(1000)  NULL     COMMENT '상세 설명',
    ZWEIGHT       INT            NOT NULL DEFAULT 0 COMMENT '배점',
    
    -- [Control]
    ZUSE_YN       CHAR(1)        NOT NULL DEFAULT 'Y' COMMENT '사용 여부',
    ZORDER        INT            NOT NULL DEFAULT 0 COMMENT '정렬 순서',
    VERSION       INT            NOT NULL DEFAULT 1 COMMENT '데이터 버전',

    -- [Audit]
    CREATED_BY    VARCHAR(20)    NOT NULL,
    CREATED_AT    TIMESTAMP      DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY    VARCHAR(20)    NULL,
    UPDATED_AT    TIMESTAMP      NULL ON UPDATE CURRENT_TIMESTAMP,

    PRIMARY KEY (ITEM_MST_ID),

    -- [Foreign Key 추가]
    CONSTRAINT FK_ITEM_MST_TPL 
        FOREIGN KEY (TEMPLATE_ID) REFERENCES ZHR_EVAL_TEMPLATE (TEMPLATE_ID)
        ON DELETE CASCADE 
) COMMENT '평가 항목 마스터';

-- 평가 결과 --
CREATE TABLE ZHR_EVAL_RESULT (
    -- [PK: 대리키]
    RESULT_ID       BIGINT          NOT NULL AUTO_INCREMENT COMMENT '평가 결과 ID (PK)',

    -- [기준 정보]
    TEMPLATE_ID     VARCHAR(20)     NOT NULL COMMENT '템플릿 ID (FK)',
    EVAL_STEP       VARCHAR(10)     NOT NULL COMMENT '평가 단계 (공통코드 EV_STEP: 300=본인, 400=1차)',
    
    -- [인물 정보]
    TARGET_EMP_ID   VARCHAR(20)     NOT NULL COMMENT '피평가자 사번 (FK)',
    EVAL_EMP_ID     VARCHAR(20)     NOT NULL COMMENT '평가자 사번 (FK)',

    -- [평가 결과]
    TOTAL_SCORE     INT             DEFAULT 0 COMMENT '총점',
    EVAL_GRADE      VARCHAR(10)     NULL      COMMENT '평가 등급',
    ZCOMMENT        VARCHAR(2000)   NULL      COMMENT '종합 의견',
    
    -- [진행 상태]
    ZSTATUS         CHAR(1)         NOT NULL DEFAULT 'T' COMMENT '상태',
    SUBMIT_DT       DATETIME        NULL      COMMENT '제출 일시',
    
    -- [동시성 제어]
    VERSION         INT             NOT NULL DEFAULT 1 COMMENT '데이터 버전 (낙관적 락)',

    -- [Audit]
    CREATED_BY      VARCHAR(20)     NOT NULL,
    CREATED_AT      TIMESTAMP       DEFAULT CURRENT_TIMESTAMP,
    UPDATED_BY      VARCHAR(20)     NULL,
    UPDATED_AT      TIMESTAMP       NULL ON UPDATE CURRENT_TIMESTAMP,

    PRIMARY KEY (RESULT_ID),

    -- [중복 방지]
    UNIQUE KEY UQ_EVAL_RESULT (TEMPLATE_ID, EVAL_STEP, TARGET_EMP_ID, EVAL_EMP_ID),

    -- [Foreign Keys: 물리적 제약 설정]
    CONSTRAINT FK_RESULT_TPL 
        FOREIGN KEY (TEMPLATE_ID) REFERENCES ZHR_EVAL_TEMPLATE (TEMPLATE_ID),
        
    CONSTRAINT FK_RESULT_TARGET 
        FOREIGN KEY (TARGET_EMP_ID) REFERENCES zhr_emp_master (pernr),
        
    CONSTRAINT FK_RESULT_EVAL 
        FOREIGN KEY (EVAL_EMP_ID) REFERENCES zhr_emp_master (pernr)
) COMMENT '평가 결과 (평가표)';


-- 학력 --
CREATE TABLE ZHR_EMP_EDU_HIST (
    -- 기본 키 컬럼 (PK)
    EDU_HIST_ID     BIGINT          NOT NULL AUTO_INCREMENT COMMENT '학력 이력 고유 ID (PK)',

    -- 학력 정보
    PERNR           VARCHAR(10)     NOT NULL COMMENT '사번',
    ZSEQ            INT             NOT NULL COMMENT '순번',
    ZSCHOOL         VARCHAR(100)    NOT NULL COMMENT '학교명',
    ZCOUNTRY        VARCHAR(10)     NOT NULL COMMENT '국가 코드 (KR, US, JP 등)',
    ZSTART_DATE     DATE            NOT NULL COMMENT '입학일',
    ZEND_DATE       DATE            NOT NULL COMMENT '졸업일',
    ZDEGREE         VARCHAR(20)     NOT NULL COMMENT '학위 (고졸, 학사, 석사, 박사 등)',
    ZMAJOR          VARCHAR(100)    NOT NULL COMMENT '전공',
    ZSTATUS         VARCHAR(20)     NOT NULL COMMENT '졸업구분 (졸업, 수료, 중퇴, 재학 등)',
    ZFINAL_YN       CHAR(1)         NOT NULL DEFAULT 'N' COMMENT '최종학력 여부 (Y/N)',
    ZREMARK         VARCHAR(255)    NULL COMMENT '비고 (기타 특이사항)',

    -- 낙관적 락(Optimistic Lock) 버전 관리
    VERSION         BIGINT          NOT NULL DEFAULT 0 COMMENT '데이터 버전 관리 필드',

    -- 감사(Audit) 필드
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (EDU_HIST_ID),

    -- 중복 데이터 방지를 위한 유니크 제약조건 (사번 + 순번)
    UNIQUE KEY UK_EMP_EDU_HIST (PERNR, ZSEQ)

) COMMENT '사원 학력 이력 정보 테이블';



-- 더미데이터 --
INSERT INTO ZHR_EMP_EDU_HIST
(PERNR, ZSEQ, ZSCHOOL, ZCOUNTRY, ZSTART_DATE, ZEND_DATE, ZDEGREE, ZMAJOR, ZSTATUS, ZFINAL_YN, ZREMARK, CREATED_BY, UPDATED_BY)
VALUES
-- 2012011 (재무팀) - 학사/석사
('2012011', 1, '한국대학교', 'KR', '2008-03-01', '2012-02-28', '학사', '회계학', '졸업', 'N', NULL, 'system', NULL),
('2012011', 2, '한국대학교 대학원', 'KR', '2012-03-01', '2014-02-28', '석사', '재무관리', '졸업', 'Y', '최우수 졸업', 'system', NULL),

-- 2015022 (마케팅팀) - 학사
('2015022', 1, '글로벌고등학교', 'KR', '2008-03-01', '2011-02-28', '고졸', '인문계', '졸업', 'N', NULL, 'system', NULL),
('2015022', 2, '세종대학교', 'KR', '2011-03-01', '2015-02-28', '학사', '광고홍보학', '졸업', 'Y', NULL, 'system', NULL),

-- 2018013 (연구소) - 학사/석사/박사
('2018013', 1, 'KAIST', 'KR', '2010-03-01', '2014-02-28', '학사', '컴퓨터공학', '졸업', 'N', '조기 졸업', 'system', NULL),
('2018013', 2, 'KAIST 대학원', 'KR', '2014-03-01', '2016-02-28', '석사', '인공지능', '졸업', 'N', NULL, 'system', NULL),
('2018013', 3, 'Stanford University', 'US', '2016-09-01', '2020-08-31', '박사', 'Computer Science', '졸업', 'Y', NULL, 'system', NULL),

-- 2019101 (영업팀) - 학사
('2019101', 1, '부산상업고등학교', 'KR', '2012-03-01', '2015-02-28', '고졸', '상업', '졸업', 'N', NULL, 'system', NULL),
('2019101', 2, '동국대학교', 'KR', '2015-03-01', '2019-02-28', '학사', '국제통상학', '졸업', 'Y', NULL, 'system', NULL),

-- 2019113 (인사팀) - 학사/석사
('2019113', 1, '한양대학교', 'KR', '2013-03-01', '2017-08-31', '학사', '교육공학', '졸업', 'N', NULL, 'system', NULL),
('2019113', 2, '고려대학교 교육대학원', 'KR', '2017-09-01', '2019-08-31', '석사', '인적자원개발', '졸업', 'Y', NULL, 'system', NULL),

-- 2020023 (마케팅팀) - 전문학사
('2020023', 1, '서울예술대학교', 'KR', '2018-03-01', '2020-02-28', '전문학사', '시각디자인', '졸업', 'Y', NULL, 'system', NULL),

-- 2021002 (연구소) - 학사
('2021002', 1, '포항공과대학교', 'KR', '2017-03-01', '2021-02-28', '학사', '신소재공학', '졸업', 'Y', NULL, 'system', NULL),

-- 2023133 (재무팀) - 재학
('2023133', 1, '서울대학교', 'KR', '2020-03-01', '2024-08-31', '학사', '경제학', '재학', 'Y', '2024년 8월 졸업 예정', 'system', NULL),

-- 2010001 (관리자) - 학사/석사
('2010001', 1, '연세대학교', 'KR', '2004-03-01', '2008-02-28', '학사', '경영학', '졸업', 'N', NULL, 'system', NULL),
('2010001', 2, 'University of Michigan', 'US', '2008-09-01', '2010-05-31', '석사', 'MBA', '졸업', 'Y', NULL, 'system', NULL),

-- 2022055 (관리자) - 학사
('2022055', 1, '성균관대학교', 'KR', '2014-03-01', '2018-02-28', '학사', '시스템경영공학', '졸업', 'Y', NULL, 'system', NULL),

-- 2017055 (신규 추가)
('2017055', 1, '경기과학고등학교', 'KR', '2010-03-01', '2013-02-28', '고졸', '과학', '졸업', 'N', '조기 졸업', 'system', NULL),
('2017055', 2, '서울대학교', 'KR', '2013-03-01', '2017-02-28', '학사', '컴퓨터공학', '졸업', 'Y', '복수전공: 통계학', 'system', NULL),

-- 2016088 (신규 추가)
('2016088', 1, '홍익대학교', 'KR', '2012-03-01', '2016-02-28', '학사', '산업디자인', '졸업', 'Y', NULL, 'system', NULL),

-- 2014030 (신규 추가)
('2014030', 1, '대원외국어고등학교', 'KR', '2007-03-01', '2010-02-28', '고졸', '영어과', '졸업', 'N', NULL, 'system', NULL),
('2014030', 2, '서울대학교', 'KR', '2010-03-01', '2014-02-28', '학사', '법학', '졸업', 'N', NULL, 'system', NULL),
('2014030', 3, '서울대학교 법학전문대학원', 'KR', '2014-03-01', '2017-02-28', '전문석사', '법학', '졸업', 'Y', NULL, 'system', NULL),

-- 2022011 (신규 추가)
('2022011', 1, '중앙대학교', 'KR', '2018-03-01', '2022-08-31', '학사', '문헌정보학', '졸업', 'Y', NULL, 'system', NULL),

-- 2013077 (신규 추가)
('2013077', 1, '북경대학교', 'CN', '2009-09-01', '2013-06-30', '학사', '중어중문학', '졸업', 'Y', NULL, 'system', NULL),
('2013077', 2, '외국어고등학교', 'KR', '2006-03-01', '2009-02-28', '고졸', '중국어', '졸업', 'N', NULL, 'system', NULL),

-- 2011042 (신규 추가)
('2011042', 1, '도쿄대학교', 'JP', '2007-04-01', '2011-03-31', '학사', '경제학', '졸업', 'N', NULL, 'system', NULL),
('2011042', 2, '도쿄대학교 대학원', 'JP', '2011-04-01', '2013-03-31', '석사', '국제경제학', '졸업', 'Y', NULL, 'system', NULL),

-- 2020100 (신규 추가)
('2020100', 1, '경희대학교', 'KR', '2015-03-01', '2019-02-28', '학사', '정치외교학', '중퇴', 'N', NULL, 'system', NULL),
('2020100', 2, '사이버대학교', 'KR', '2019-09-01', '2022-08-31', '학사', '소프트웨어공학', '졸업', 'Y', '학점은행제 연계', 'system', NULL);


-- 인사정보 --
CREATE TABLE ZHR_EMP_PERSONAL (
    -- 기본 키 컬럼 (PK)
    PERNR           VARCHAR(10)     NOT NULL COMMENT '사번 (PK)',

    -- 인사 기본 정보
    ZJOIN_DATE      DATE            NOT NULL COMMENT '입사일',
    ZEMP_TYPE       VARCHAR(4)      NOT NULL COMMENT '고용형태 코드',
    ZLOC_CODE       VARCHAR(5)      NOT NULL COMMENT '소속 사업장 코드',
    ZDEPT_CD        VARCHAR(10)     NOT NULL COMMENT '부서 코드',
    ZGRADE_CD       VARCHAR(5)      NOT NULL COMMENT '직급 코드',
    ZPOS_CD         VARCHAR(5)      NULL COMMENT '직책 코드',
    ZSTATUS         VARCHAR(2)      NOT NULL COMMENT '고용상태 (재직, 휴직, 퇴직 등)',

    -- 발령 정보
    ZRULE_ID        VARCHAR(10)     NULL COMMENT '최근 발령 기준 ID',
    ZEFF_DATE       DATE            NULL COMMENT '최근 발령 시행일',

    -- 기타 정보
    ZREMARK         VARCHAR(255)    NULL COMMENT '비고 (기타 특이사항)',

    -- 낙관적 락(Optimistic Lock) 버전 관리
    VERSION         BIGINT          NOT NULL DEFAULT 0 COMMENT '데이터 버전 관리 필드',

    -- 감사(Audit) 필드
    CREATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY      VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT      DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY      VARCHAR(50)     NULL COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (PERNR)

) COMMENT '사원 인사정보 마스터 테이블';

-- 더미 데이터 --
INSERT INTO ZHR_EMP_PERSONAL
(PERNR, ZJOIN_DATE, ZEMP_TYPE, ZLOC_CODE, ZDEPT_CD, ZGRADE_CD, ZPOS_CD, ZSTATUS, ZRULE_ID, ZEFF_DATE, ZREMARK, CREATED_BY, UPDATED_BY)
VALUES
-- ZSTATUS 값을 'ST01' -> '01', 'ST02' -> '02', 'ST03' -> '03' 으로 수정
-- 2012011 (재무팀)
('2012011', '2014-03-03', 'ET01', 'LOC1', 'DEPT01', 'G4', 'P2', '01', 'AP20240101', '2024-01-01', '재무팀 팀장', 'system', NULL),

-- 2015022 (마케팅팀)
('2015022', '2015-03-02', 'ET01', 'LOC1', 'DEPT02', 'G3', 'P1', '01', 'AP20240101', '2024-01-01', NULL, 'system', NULL),

-- 2018013 (연구소)
('2018013', '2020-09-07', 'ET01', 'LOC2', 'DEPT03', 'G4', 'P3', '01', 'AP20230701', '2023-07-01', 'AI Lab 파트장, 외부 영입 인재', 'system', NULL),

-- 2019101 (영업팀)
('2019101', '2019-03-04', 'ET01', 'LOC3', 'DEPT04', 'G3', 'P1', '01', 'AP20240101', '2024-01-01', '부산지사 근무', 'system', NULL),

-- 2019113 (인사팀)
('2019113', '2019-09-02', 'ET01', 'LOC1', 'DEPT05', 'G3', 'P2', '01', 'AP20220101', '2022-01-01', '인사팀 채용파트 담당', 'system', NULL),

-- 2020023 (마케팅팀)
('2020023', '2020-03-02', 'ET02', 'LOC1', 'DEPT02', 'G1', NULL, '03', NULL, NULL, '2022-02-28 계약만료 퇴사', 'system', 'system'),

-- 2021002 (연구소)
('2021002', '2021-03-01', 'ET01', 'LOC2', 'DEPT03', 'G2', 'P1', '01', 'AP20230101', '2023-01-01', '신소재 연구원', 'system', NULL),

-- 2023133 (재무팀) - 재학
('2023133', '2023-07-01', 'ET03', 'LOC1', 'DEPT01', 'G0', NULL, '01', NULL, NULL, '산학협력 인턴', 'system', NULL),

-- 2010001 (관리자)
('2010001', '2010-07-01', 'ET01', 'LOC1', 'DEPT06', 'G5', 'P4', '01', 'AP20210101', '2021-01-01', '경영지원실 실장', 'system', NULL),

-- 2022055 (관리자)
('2022055', '2018-03-05', 'ET01', 'LOC1', 'DEPT06', 'G3', 'P1', '02', NULL, NULL, '육아휴직 (2025.01.01 ~ 2025.12.31)', 'system', 'system'),

-- 2017055 (신규 추가)
('2017055', '2017-03-02', 'ET01', 'LOC2', 'DEPT03', 'G4', 'P1', '01', 'AP20240101', '2024-01-01', NULL, 'system', NULL),

-- 2016088 (신규 추가)
('2016088', '2016-03-02', 'ET01', 'LOC1', 'DEPT02', 'G2', 'P1', '01', 'AP20240101', '2024-01-01', '디자인 파트', 'system', NULL),

-- 2014030 (신규 추가)
('2014030', '2017-03-02', 'ET01', 'LOC1', 'DEPT07', 'G4', 'P2', '01', 'AP20230101', '2023-01-01', '법무팀 팀장', 'system', NULL),

-- 2022011 (신규 추가)
('2022011', '2022-09-01', 'ET01', 'LOC1', 'DEPT06', 'G1', 'P1', '01', NULL, NULL, '경영지원팀 소속', 'system', NULL),

-- 2013077 (신규 추가)
('2013077', '2013-08-19', 'ET01', 'LOC4', 'DEPT04', 'G4', 'P2', '01', 'AP20220701', '2022-07-01', '중국 지사장', 'system', NULL),

-- 2011042 (신규 추가)
('2011042', '2013-04-08', 'ET01', 'LOC5', 'DEPT01', 'G4', NULL, '01', 'AP20220701', '2022-07-01', '일본 지사 파견', 'system', NULL),

-- 2020100 (신규 추가)
('2020100', '2022-09-01', 'ET01', 'LOC2', 'DEPT03', 'G1', 'P1', '01', NULL, NULL, 'SW 개발자', 'system', NULL);


-- 노조 가입 관리 --
CREATE TABLE ZHR_UNION_MEMBER (
    -- 기본 키 컬럼 (PK)
    UNION_HISTORY_ID BIGINT          NOT NULL AUTO_INCREMENT COMMENT '노조가입이력 ID (PK)',

    -- 사원 및 가입 정보
    PERNR            VARCHAR(10)     NOT NULL COMMENT '사번 (FK from ZHR_EMP_PERSONAL)',
    ZJOIN_DATE       DATE            NOT NULL COMMENT '가입일',
    ZUNION_YN        VARCHAR(1)      NOT NULL COMMENT '가입 여부 (Y/N)',
    ZLEAVE_DATE      DATE            NULL COMMENT '탈퇴일',
    ZUNION_TYPE      VARCHAR(5)      NOT NULL COMMENT '노조 유형 코드',
    ZCLUB_CD         VARCHAR(10)     NOT NULL COMMENT '회비 코드',
    ZFEE             DECIMAL(15, 2)  NOT NULL COMMENT '회비 금액',
    ZAUTO_DEDUCT     VARCHAR(1)      NOT NULL COMMENT '자동공제 여부 (Y/N)',
    ZREMARK          VARCHAR(255)    NULL COMMENT '비고 (탈퇴 사유 등)',


	VERSION         BIGINT          NOT NULL DEFAULT 0 COMMENT '낙관적 락을 위한 버전 관리 필드',
    
    -- 감사(Audit) 필드
    CREATED_AT       DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY       VARCHAR(50)     NOT NULL COMMENT '생성자',
    UPDATED_AT       DATETIME        NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY       VARCHAR(50)     NULL COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (UNION_HISTORY_ID),

    -- 고유 제약 조건 (사번 + 가입일 중복 방지)
    UNIQUE KEY UK_ZHR_UNION_MEMBER (PERNR, ZJOIN_DATE)

) COMMENT '사원별 노조 가입 이력 및 회비 정보 테이블';

-- 더미 데이터 --

INSERT INTO ZHR_UNION_MEMBER
(PERNR, ZJOIN_DATE, ZUNION_YN, ZLEAVE_DATE, ZUNION_TYPE, ZCLUB_CD, ZFEE, ZAUTO_DEDUCT, ZREMARK, CREATED_BY, UPDATED_BY)
VALUES
-- 2012011 (재무팀 팀장) : 현재 가입 상태
('2012011', '2015-04-01', 'Y', NULL, 'UT02', 'UNIONFEE', 50000, 'Y', '사무직 노조 가입', 'system', NULL),

-- 2015022 (마케팅팀) : 과거 가입 이력 (현재 탈퇴)
('2015022', '2016-01-01', 'N', '2023-12-31', 'UT01', 'UNIONFEE', 30000, 'Y', '개인 사유로 탈퇴', 'system', 'system'),

-- 2018013 (연구소 파트장) : 현재 가입 상태
('2018013', '2021-01-01', 'Y', NULL, 'UT02', 'UNIONFEE', 50000, 'Y', '연구직 노조 가입', 'system', NULL),

-- 2019101 (영업팀) : 탈퇴 후 재가입한 케이스
('2019101', '2019-06-01', 'N', '2021-05-31', 'UT01', 'UNIONFEE', 30000, 'Y', '일시 탈퇴', 'system', 'system'),
('2019101', '2023-01-01', 'Y', NULL, 'UT01', 'UNIONFEE', 35000, 'Y', '재가입 (회비 인상분 반영)', 'system', NULL),

-- 2021002 (연구소 연구원) : 현재 가입 상태
('2021002', '2021-04-01', 'Y', NULL, 'UT01', 'UNIONFEE', 30000, 'Y', '정기 가입', 'system', NULL),

-- 2016088 (마케팅팀 디자인 파트) : 현재 가입 상태
('2016088', '2016-09-01', 'Y', NULL, 'UT01', 'UNIONFEE', 30000, 'Y', NULL, 'system', NULL),

-- 2014030 (법무팀 팀장) : 과거 가입 이력 (현재 탈퇴)
('2014030', '2018-01-01', 'N', '2024-03-31', 'UT02', 'UNIONFEE', 45000, 'N', '팀장 보직 변경으로 인한 탈퇴', 'system', 'system'),

-- 2013077 (중국 지사장) : 현재 가입 상태
('2013077', '2014-01-01', 'Y', NULL, 'UT02', 'UNIONFEE', 50000, 'Y', '해외 지사 노조 가입', 'system', NULL);

-- 근무지 관리 --
CREATE TABLE ZHR_EMP_WORKPLACE (
    -- 기본 키 컬럼 (PK)
    WORKPLACE_HISTORY_ID BIGINT        NOT NULL AUTO_INCREMENT COMMENT '근무지이력 ID (PK)',

    -- 사원 및 근무지 정보
    PERNR                VARCHAR(10)   NOT NULL COMMENT '사번 (FK from ZHR_EMP_PERSONAL)',
    ZWORK_LOC_CD         VARCHAR(10)   NOT NULL COMMENT '근무지 코드 (FK from ZHR_BIZPLACE)', -- 주석 변경
    ZSTART_DATE          DATE          NOT NULL COMMENT '시작일자',
    ZEND_DATE            DATE          NULL     COMMENT '종료일자',
    ZCURRENT_YN          VARCHAR(1)    NOT NULL COMMENT '현재 근무지 여부 (Y/N)',
    ZREMARK              VARCHAR(255)  NULL     COMMENT '비고 (프로젝트 근무, 파견 등)',

    -- 기술 필드
    VERSION              BIGINT        NOT NULL DEFAULT 0 COMMENT '낙관적 락을 위한 버전 관리 필드',

    -- 감사(Audit) 필드
    CREATED_AT           DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY           VARCHAR(50)   NOT NULL COMMENT '생성자',
    UPDATED_AT           DATETIME      NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY           VARCHAR(50)   NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (WORKPLACE_HISTORY_ID),

    -- 고유 제약 조건 (사번 + 시작일자 중복 방지)
    UNIQUE KEY UK_ZHR_EMP_WORKPLACE (PERNR, ZSTART_DATE),

    -- 외래 키(Foreign Key) 제약 조건 추가
    CONSTRAINT FK_WORKPLACE_BIZPLACE
    FOREIGN KEY (ZWORK_LOC_CD) REFERENCES ZHR_BIZPLACE (ZBIZ_CD)

) COMMENT '사원 근무지 이력 테이블';

-- 더미 데이터 --
INSERT INTO ZHR_EMP_WORKPLACE
(PERNR, ZWORK_LOC_CD, ZSTART_DATE, ZEND_DATE, ZCURRENT_YN, ZREMARK, CREATED_BY, UPDATED_BY)
VALUES
-- 2012011 (재무팀 팀장) : 근무지 이동 이력 3건 (기능 테스트용)
('2012011', 'B0101', '2015-04-01', '2019-12-31', 'N', '부산 지사 발령', 'system_loader', 'system_loader'),
('2012011', 'F0301', '2020-01-01', '2022-12-31', 'N', '평택 반도체 캠퍼스 파견 근무', 'system_loader', 'system_loader'),
('2012011', 'H0001', '2023-01-01', NULL, 'Y', '서울 본사 복귀', 'system_loader', NULL),

-- 2015022 (마케팅팀) : 입사 후 본사 계속 근무
('2015022', 'H0001', '2016-01-01', NULL, 'Y', '신입 입사 배치', 'system_loader', NULL),

-- 2018013 (연구소 파트장) : 판교 R&D 센터 계속 근무
('2018013', 'R0001', '2018-01-01', NULL, 'Y', '연구소 배치', 'system_loader', NULL),

-- 2019101 (영업팀) : 지사 이동 이력이 있는 케이스
('2019101', 'B0401', '2019-06-01', '2022-05-31', 'N', '대구 지사 발령', 'system_loader', 'system_loader'),
('2019101', 'S0101', '2022-06-01', NULL, 'Y', '강남 영업소 이동', 'system_loader', NULL),

-- 2021002 (연구소 연구원) : 송도 R&D 캠퍼스로 발령
('2021002', 'R0001', '2021-04-01', '2024-06-30', 'N', '판교 R&D 센터 신입 배치', 'system_loader', 'system_loader'),
('2021002', 'T0002', '2024-07-01', NULL, 'Y', '송도 바이오 R&D 캠퍼스 이동', 'system_loader', NULL),

-- 2016088 (마케팅팀 디자인 파트) : 본사 계속 근무
('2016088', 'H0001', '2016-09-01', NULL, 'Y', '본사 배치', 'system_loader', NULL),

-- 2014030 (법무팀 팀장) : 본사 계속 근무
('2014030', 'H0001', '2014-03-01', NULL, 'Y', '본사 배치', 'system_loader', NULL),

-- 2013077 (중국 지사장) : 해외 지사 발령 이력
('2013077', 'H0001', '2013-07-01', '2020-12-31', 'N', '본사 근무', 'system_loader', 'system_loader'),
('2013077', 'B9301', '2021-01-01', NULL, 'Y', '상하이 지사장 발령', 'system_loader', NULL);


-- 인사카드 마스터 --
CREATE TABLE ZHR_EMP_CARD (
    -- 기본 키 컬럼 (PK)
    PERNR               VARCHAR(10)  NOT NULL COMMENT '사번 (PK)',

    -- 1. 기본 정보 (탭 1)
    ENAME               VARCHAR(50)  NOT NULL COMMENT '성명',
    ZBIRTH              DATE         NOT NULL COMMENT '생년월일',
    ZSEX                CHAR(1)      NOT NULL COMMENT '성별 (M/F)',
    ZNATION             VARCHAR(50)  NOT NULL COMMENT '국적',
    ZRRN                VARCHAR(255) NOT NULL COMMENT '주민등록번호 (암호화 저장)',
    ZPHONE              VARCHAR(20)  NOT NULL COMMENT '휴대전화',
    ZEMAIL              VARCHAR(100) NOT NULL COMMENT '이메일',
    ZADDR               VARCHAR(255) NULL     COMMENT '주소 및 상세주소',
    ZEMER_PHONE         VARCHAR(20)  NULL     COMMENT '비상연락처',
    
    -- 2. 입사 정보 (탭 2) & 상단 공통
    ZJOIN_DATE          DATE         NOT NULL COMMENT '입사일',
    ZFIRST_JOIN_DATE    DATE         NULL     COMMENT '최초입사일',
    ZJOIN_TYPE          VARCHAR(3)   NOT NULL COMMENT '입사유형 (코드: 신입/경력)',
    ZJOIN_PATH          VARCHAR(3)   NULL     COMMENT '입사경로 (코드: 공채/추천)',
    ZCONTRACT_TYPE      VARCHAR(3)   NOT NULL COMMENT '고용형태/계약구분 (코드: 정규직/계약직)',
    ZPROBATION_PERIOD   VARCHAR(50)  NULL     COMMENT '수습기간',
    ZJOIN_CATEGORY      VARCHAR(3)   NULL     COMMENT '입사형태 (코드: 일반/장애인)',
    ZWORK_STATUS        VARCHAR(3)   NOT NULL COMMENT '재직상태 (코드: 재직/휴직/퇴직)',

    -- 3. 보호자 정보 (탭 3)
    ZPROTECT_NAME       VARCHAR(50)  NOT NULL COMMENT '보호자 성명',
    ZPROTECT_REL        VARCHAR(20)  NOT NULL COMMENT '보호자 관계',
    ZPROTECT_PHONE      VARCHAR(20)  NOT NULL COMMENT '보호자 연락처',
    ZPROTECT_ADDR       VARCHAR(255) NULL     COMMENT '보호자 주소',

    -- 4. 병역/보훈 정보 (탭 4)
    ZMIL_SERVICE_STATUS VARCHAR(3)   NULL     COMMENT '병역구분 (코드: 필/면제/미필)',
    ZMIL_TYPE           VARCHAR(20)  NULL     COMMENT '병역종류 (예: 육군)',
    ZMIL_PERIOD_START   DATE         NULL     COMMENT '병역 시작일',
    ZMIL_PERIOD_END     DATE         NULL     COMMENT '병역 종료일',
    ZVET_YN             CHAR(1)      NULL     DEFAULT 'N' COMMENT '보훈대상여부 (Y/N)',
    ZDISABILITY_YN      CHAR(1)      NULL     DEFAULT 'N' COMMENT '장애등록여부 (Y/N)',

    -- 기술 필드
    VERSION             BIGINT       NOT NULL DEFAULT 0 COMMENT '낙관적 락을 위한 버전 관리 필드',

    -- 감사(Audit) 필드
    CREATED_AT          DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성 일시',
    CREATED_BY          VARCHAR(50)  NOT NULL COMMENT '생성자',
    UPDATED_AT          DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '수정 일시',
    UPDATED_BY          VARCHAR(50)  NULL     COMMENT '수정자',

    -- 기본 키 설정
    PRIMARY KEY (PERNR)

) COMMENT '사원 인사카드 마스터 테이블';

-- 더미데이터 --
INSERT INTO ZHR_EMP_CARD
(PERNR, ENAME, ZBIRTH, ZSEX, ZNATION, ZRRN, ZPHONE, ZEMAIL, ZADDR, ZEMER_PHONE, 
 ZJOIN_DATE, ZFIRST_JOIN_DATE, ZJOIN_TYPE, ZJOIN_PATH, ZCONTRACT_TYPE, ZPROBATION_PERIOD, ZJOIN_CATEGORY, ZWORK_STATUS, 
 ZPROTECT_NAME, ZPROTECT_REL, ZPROTECT_PHONE, ZPROTECT_ADDR, 
 ZMIL_SERVICE_STATUS, ZMIL_TYPE, ZMIL_PERIOD_START, ZMIL_PERIOD_END, ZVET_YN, ZDISABILITY_YN, 
 CREATED_BY, UPDATED_BY)
VALUES
-- 2012011 (재무팀 팀장) : 경력직 남성, 병역필
('2012011', '김철수', '1980-05-15', 'M', '대한민국', 'oaBnm2z3JfH5rldPPauxlyFElj9QEsDwB3nxVHZzKmI=', '010-1111-2222', 'cs.kim@company.com', '서울시 강남구 테헤란로 123, 101동 501호', '010-1111-3333',
 '2012-01-10', '2008-03-01', 'EXP', 'REC', 'REG', NULL, 'GEN', 'ACV',
 '박영희', 'SPOUSE', '010-2222-3333', '서울시 강남구 테헤란로 123, 101동 501호',
 'FIN', 'ARMY', '2000-03-10', '2002-05-09', 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),

-- 2015022 (마케팅팀) : 신입 여성
('2015022', '이유진', '1992-11-20', 'F', '대한민국', 'jUy8ePDJfrKTzDWcBdakj6zJh/IcHahMhGyVeF9Ak8g=', '010-3333-4444', 'yj.lee@company.com', '경기도 성남시 분당구 판교역로 235', '010-3333-5555',
 '2016-01-01', '2016-01-01', 'NEW', 'PUB', 'REG', '3개월', 'GEN', 'ACV',
 '이정국', 'FATHER', '010-4444-5555', '경기도 성남시 분당구 판교역로 235',
 'NA', NULL, NULL, NULL, 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),

-- 2018013 (연구소 파트장) : 경력직 남성, 전문연구요원
('2018013', '박서준', '1988-02-18', 'M', '대한민국', '/9QGeTWoPCZJhUyJrQAzZp0tl/6qRm6E3ljfIAVNo8o=', '010-5555-6666', 'sj.park@company.com', '경기도 수원시 영통구 삼성로 129', '010-5555-7777',
 '2018-01-01', '2014-01-02', 'EXP', 'REC', 'REG', NULL, 'GEN', 'ACV',
 '박현식', 'FATHER', '010-6666-7777', '경기도 수원시 영통구 삼성로 129',
 'FIN', 'OTHER', '2014-01-02', '2017-01-01', 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),

-- 2019101 (영업팀) : 신입 남성, 병역필
('2019101', '최민준', '1994-08-30', 'M', '대한민국', 'e4I7OPoYoOz3LL5IGTVACNFE3dHdqXV8tXOsKmHZTcQ=', '010-7777-8888', 'mj.choi@company.com', '대구시 수성구 달구벌대로 2424', '010-7777-9999',
 '2019-06-01', '2019-06-01', 'NEW', 'PUB', 'REG', '3개월', 'GEN', 'ACV',
 '최경환', 'FATHER', '010-8888-9999', '대구시 수성구 달구벌대로 2424',
 'FIN', 'MARINE', '2014-03-01', '2016-01-31', 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),

-- 2021002 (연구소 연구원) : 신입 여성, 장애/보훈 케이스
('2021002', '정다은', '1996-03-12', 'F', '대한민국', 'zAFql1ICPBpAA0KcoOfrdp+dT6A7i+fNeKuMnqA4Pbo=', '010-9999-0000', 'de.jung@company.com', '인천시 연수구 송도과학로 32', '010-9999-1111',
 '2021-04-01', '2021-04-01', 'NEW', 'REC', 'REG', '3개월', 'DIS', 'ACV',
 '한미숙', 'MOTHER', '010-0000-1111', '인천시 연수구 송도과학로 32',
 'NA', NULL, NULL, NULL, 'Y', 'Y', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),

-- 2016088 (마케팅팀 디자인 파트) : 경력직 여성
('2016088', '윤지수', '1990-07-07', 'F', '대한민국', 'v6/ehyI51ooGdB/Y+21402daNmQMn0EyS1e9stsxj50=', '010-1234-5678', 'js.yoon@company.com', '서울시 서초구 서초대로 77길 54', '010-1234-9999',
 '2016-09-01', '2013-02-01', 'EXP', 'REC', 'REG', NULL, 'GEN', 'ACV',
 '윤태영', 'FATHER', '010-5678-1234', '서울시 서초구 서초대로 77길 54',
 'NA', NULL, NULL, NULL, 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),

-- 2014030 (법무팀 팀장) : 경력직 남성, 병역 면제
('2014030', '강태현', '1985-12-25', 'M', '대한민국', 'gtQiFIFSXxGf7NpxDEKssXZu1olS1rinJs/sFWnoIKU=', '010-8765-4321', 'th.kang@company.com', '서울시 종로구 종로3길 17', '010-8765-1111',
 '2014-03-01', '2011-01-15', 'EXP', 'REC', 'REG', NULL, 'GEN', 'ACV',
 '강신일', 'FATHER', '010-4321-8765', '서울시 종로구 종로3길 17',
 'EXM', NULL, NULL, NULL, 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL),
 
-- 2013077 (중국 지사장) : 외국인 케이스
('2013077', '왕웨이', '1978-10-01', 'M', '중국', 'fOca9m6k+fnIJoEs/GuEJYUVLZPc3+NJ0Tmd23WnSNc=' , '010-5555-1234', 'wei.wang@company.com', '중국 상하이시 푸동신구 세기대도 88', '010-5555-4321',
 '2013-07-01', '2013-07-01', 'EXP', 'REC', 'REG', NULL, 'GEN', 'ACV',
 'CHEN LI', 'SPOUSE', '010-1111-4321', '중국 상하이시 푸동신구 세기대도 88',
 'NA', NULL, NULL, NULL, 'N', 'N', -- ZMIL_SERVICE_STATUS 값 변경
 'system_loader', NULL);

